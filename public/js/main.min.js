/*!  06-12-2016 */
 function Segment(a,b,c,d){this.path=a,this.length=a.getTotalLength(),this.path.style.strokeDashoffset=2*this.length,this.begin="undefined"!=typeof b?this.valueOf(b):0,this.end="undefined"!=typeof c?this.valueOf(c):this.length,this.circular="undefined"!==d?d:!1,this.timer=null,this.animationTimer=null,this.draw(this.begin,this.end,0,{circular:this.circular})}function customHandler(a,b,c,d){F.errList.push({message:"<b>JAVASCRIPT "+a+"</b><br/>"+b+"("+c+") "+(d?":"+d:""),state:0})-1;return!0}function F(){this.FObjects=[],this.clientH=0,this.clientW=0,this.handlers={onload:new Array,onresize:new Array,ajaxonload:new Array,ajaxonresize:new Array,ajaxloadcompleted:new Array,onmousedown:new Array,onmouseup:new Array},this.errList=new Array,this.__curentEvent="",this.__curentRun="",this.handleEvent=function(evName,event,target){clientW=this.clientW||document.getElementsByTagName("html")[0].clientWidth,clientH=this.clientH||document.getElementsByTagName("html")[0].clientHeight,this.clientW=clientW,this.clientH=clientH,this.__curentEvent=evName;for(var i in this.handlers[evName]||[]){var f=this.handlers[evName][i];this.__curentRun=f;try{"function"==typeof f?f(event,target):eval(f)}catch(e){customHandler(e.name+" "+e.message,e.fileName,e.lineNumber,0)}this.__curentRun=""}"onload"==evName&&this.handleEvent("onresize")},this.manageEvent=function(a,b){if("function"==typeof a.pop)for(var c in a)this.manageEvent(a[c],b);else void 0==this.handlers[a]&&this.addHandler(a),this.handlers[a][b]=b},this.removeEvent=function(a,b){delete this.handlers[a]},this.clearEvent=function(a,b){msg="",this.handlers[a]&&(b?delete this.handlers[a][b]:this.handlers[a]=new Array)},this.addHandler=function(a){this.handlers[a]=new Array},this.get=function(a){for(var b in this.FObjects)if(this.FObjects[b].id==a)return this.FObjects[b]},this.add=function(a){this.FObjects.push(a)},this.startResize=function(){F.clientW=Math.max(document.getElementsByTagName("html")[0].clientWidth,document.body.clientWidth),F.clientH=Math.max(document.getElementsByTagName("html")[0].clientHeight,document.body.clientHeight),F.handleEvent("onresize"),F.handleEvent("ajaxonresize")}}function FObject(a){this.id=a}function Action(){this.refresh=function(){document.location.reload(!0)},this.redirect=function(a){window.location=a}}function ilAlert(a){var b='<div class="alert fade in"><button class="close" data-dismiss="alert" type="button"><i class="icon-off icon-white"></i></button><div id="alert-text">'+a+"</div></div>";$(".container.main").prepend(b),$(".alert").show("slow"),$(".alert").alert()}function ilfate_init(){Ajax.init(),$(".tip").tooltip(),$(".tip-bottom").tooltip({placement:"bottom"}),$(".tip-left").tooltip({placement:"left"}),$(".tip-right").tooltip({placement:"right"}),$(".label-stars").starred(),$(".rounded_block").roundedBlock()}function info(a){console.info(a)}function array_shuffle(a){var b,c,d;for(d=a.length;d;d-=1)b=Math.floor(Math.random()*d),c=a[d-1],a[d-1]=a[b],a[b]=c}function array_rand(a){return a[Math.floor(Math.random()*a.length)]}function rand(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function info(a){console.info(a)}function debug(a){}function isInt(a){return"number"==typeof a&&isFinite(a)&&a%1===0}function is_object(a){return"object"==typeof a}function Guess(){}function pasteText(a,b,c){if(c&&void 0!==c.duration)if(1==a.length)var d=c.duration;else{var d=parseInt(c.duration/a.length*(rand(8,12)/10));c.duration-=d}else var d=rand(10,80);var e=a.substr(0,1),f=a.substr(1);if(b.append(e),a.length>1)setTimeout(function(){pasteText(f,b,c)},d);else if(c&&void 0!==c.queue){var g=c.queue[0];c.queue.shift(),void 0==g.options&&(g.options={}),c.queue.length>0&&(g.options.queue=c.queue),pasteText(g.text,g.el,g.options)}}function IL(){}function MathEffectPage(){this.hideMENameForm=function(){$("#MENameForm").hide(),$("#MENameFormContainer").html("Name saved")}}function rand(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function info(a){console.info(a)}function debug(a){}function isInt(a){return"number"==typeof a&&isFinite(a)&&a%1===0}function TD(){}function Pulsar(a,b){if(this.options=b,this.options.interval||(this.options.interval=10),this.options.time_limit||(this.options.time_limit=30),this.events=[],this.layers=[],this.func=[],this.time_func=[],this.ready=0,this.start_on_ready=0,this.id_interval=0,this.time=0,this.runing=0,this.shutDown=!1,b.multi_canvas){this.is_multi_canvas=1,this.div=document.getElementById(a);for(var c in this.options)"interval"!=c&&(this.div[c]=this.options[c])}else{this.is_multi_canvas=0;var d=document.getElementById(a);for(var c in this.options)"interval"!=c&&(d[c]=this.options[c]);this.ctx=d.getContext("2d")}this.setOptions=function(a){this.options=a},this.addLayer=function(a,b){if(void 0!=this.layers[b])return console.error("Error layer creating"),!1;if(this.layers[b]=new Layer(a,b,this),1==this.is_multi_canvas){var c=document.createElement("canvas");c.id=a,c.className="Pulsar_Canvas",c.style.zIndex=b,this.div.appendChild(c);for(var d in this.options)"interval"!=d&&(c[d]=this.options[d]);this.layers[b].ctx=c.getContext("2d"),this.layers[b].tag=c}return this.layers[b]},this.getLayer=function(a){for(var b in this.layers)if(this.layers[b].name==a)return this.layers[b];return!1},this.tryReady=function(){for(var a in this.layers)if(1!=this.layers[a].ready)return this.ready=0,!1;return this.ready=1,1==this.start_on_ready&&this.draw(),this},this.draw=function(){if(1==this.ready){for(var a in this.layers)this.layers[a].draw();0==this.runing&&this.run(this)}else this.start_on_ready=1},this.run=function(a){this.runing=1,this.id_interval=setInterval(function(){a.update()},this.options.interval)},this.addFunction=function(a){return this.func[this.func.length+1]=a,this},this.addTimeFunction=function(a,b){return this.time_func[b]=a,this},this.clearAll=function(){this.is_multi_canvas||this.ctx.clearRect(0,0,this.options.width,this.options.height)},this.update=function(){this.time+=this.options.interval,(this.time>1e3*this.options.time_limit||this.shutDown)&&clearInterval(this.id_interval);for(var a in this.func)this.func[a](this);for(var a in this.time_func)a<=this.time&&(this.time_func[a](this),delete this.time_func[a]);this.clearAll(),this.draw()}}function Layer(a,b,c){this.index=b,this.name=a,this.objects=[],this.supporting_objects=[],this.parent=c,this.ready=1,this.x=c.options.width/2,this.y=c.options.height/2,this.updated=1,this.ctx,this.tag,this.start_time=0,this.vx=0,this.vy=0,this.iter=0,this.a_iter=0,this.angle=0,this.vangle=0,this.time=0,this.was_r=[],this.getCtx=function(){return this.ctx?this.ctx:this.parent.ctx},this.clear=function(){var a=this.parent.options.width,b=this.parent.options.height;this.getCtx().clearRect(-a,-b,2*a,2*b)},this.setIndex=function(a){return void 0!=this.parent.layers[a]?!1:(this.update(),this.parent.layers[a]=this,delete this.parent.layers[this.index],this.index=a,1==this.parent.is_multi_canvas&&(this.tag.style.zIndex=a),this)},this.addObject=function(a,b,c){return"string"==typeof b?c?(this.update(),this.supporting_objects[a]=new PlObject(a,b,this),this.supporting_objects[a]):a?(this.objects[a]=new PlObject(a,b,this),this.objects[a]):(this.objects[this.objects.length+1]=new PlObject(a,b,this),this.objects[this.objects.length]):"object"==typeof b?c?(this.supporting_objects[a]=b.clone(),this.supporting_objects[a]):(this.objects[a]=b.clone(),this.objects[a]):void 0},this.getObject=function(a){return this.objects[a]?this.objects[a]:this.supporting_objects[a]?this.supporting_objects[a]:void 0},this.moveTo=function(a,b,c){c||console.error("U mast set time for function moveTo"),this.update();var d=this.parent.options.interval;this.start_time=this.parent.time;var e=this.x-a,f=this.y-b;return this.vx=-(e/c)*d,this.vy=-(f/c)*d,this.iter=Math.round(c/d),this},this.rotate=function(a,b){this.update();var c=this.angle-a,d=this.parent.options.interval;return this.vangle=c/b*d,this.a_iter=Math.round(b/d),this},this.tryReady=function(){for(o in this.objects)if(1!=this.objects[o].ready)return this.ready=0,!1;for(o in this.supporting_objects)if(1!=this.supporting_objects[o].ready)return this.ready=0,!1;return this.ready=1,this.parent.tryReady(),this},this.update=function(){this.updated=1},this.chechUpdate=function(){if(1!=this.updated){if(this.iter>0)return this.update(),!0;if(this.a_iter>0)return this.update(),!0;for(o in this.objects)if(this.objects[o].chechUpdate())return!0;for(o in this.supporting_objects)if(this.supporting_objects[o].chechUpdate())return!0}},this.draw=function(){if(this.chechUpdate(),1==this.updated){this.clear(),this.iter>0&&(this.x+=this.vx,this.y+=this.vy,this.iter--),this.time!=this.parent.time&&this.a_iter>0&&(this.angle-=this.vangle,this.a_iter--),this.getCtx().translate(this.x,this.y),this.angle&&this.getCtx().rotate(-Math.PI*(this.angle/180));for(o in this.objects)this.objects[o].draw();this.angle&&this.getCtx().rotate(Math.PI*(this.angle/180)),this.getCtx().translate(-this.x,-this.y)}this.updated=0}}function Pl_drawing(a){this.x=0,this.y=0,this.w=0,this.h=0,this.sx=0,this.sy=0,this.sw=0,this.sh=0,this.was=[],this.was_r=[],this.angle=0,this.vangle=0,this.animation_iters=0,this.animation_frame=0,this.animation_frame_counter=1,this.animation_name="",this.animations=[],this.object=a,this.object.ready=1,this.ready=1,this.time,this.type,this.gx=function(){return this.x},this.gy=function(){return this.y},this.addAnimation=function(a,b,c,d){if(!d)var d=[];this.animations[a]={row:b,frames:c,speed:d}},this.runAnimation=function(a,b){return this.animations[a]&&(this.animation_name=a,this.was.sy=this.sy,this.was.sx=this.sx,this.sy=(this.animations[a].row-1)*this.sh,this.sx=0,this.animation_frame=1,this.animation_iters=b),this},this.stopAnimation=function(){this.animation_iters=0},this.update=function(){this.object.update()},this.chechUpdate=function(){return this.was.x!=this.x||this.was.y!=this.y||this.was.w!=this.w||this.was.h!=this.h?(this.was.x=this.x,this.was.y=this.y,this.was.w=this.w,this.was.h=this.h,this.update(),!0):!1},this.draw=function(){"fillRect"==this.type&&this.object.layer.getCtx().fillRect(this.x,this.y,this.w,this.h)}}function PlObject(name,type,layer){this.x=0,this.y=0,this.ready=1,this.layer=layer,this.name=name,this.type=type,"string"==typeof type&&eval("this.essence = new Pl_"+this.type+"(this);"),this.start_time=0,this.vx=0,this.vy=0,this.iter=0,this.a_iter=0,this.angle=0,this.vangle=0,this.time=0,this.was_r=[],this.set=function(a,b){return this.update(),this.essence[a]=b,this},this.get=function(a){return this.essence[a]},this.clone=function(a){var b=new PlObject(this.name,this.type,this.layer);for(var c in this)"essence"!=c&&(b[c]=this[c]);if("image"==this.type)for(var c in this.essence)b.essence[c]=this.essence[c];return b.ready=1,b.essence.ready=1,b},this.setXY=function(a,b,c,d,e,f,g,h){return this.update(),this.essence.x=a,this.essence.y=b,c&&d&&(this.essence.w=c,this.essence.h=d),g&&h&&(this.essence.sx=e,this.essence.sy=f,this.essence.sw=g,this.essence.sh=h),this},this.img=function(a){return this.update(),"image"==this.type&&(this.essence.img.src=a),this},this.setTable=function(a){return this.update(),"table"==this.type&&this.essence.setTable(a),this},this.setSize=function(a,b,c,d){return this.update(),"table"==this.type&&this.essence.setSize(a,b,c,d),this},this.setCells=function(a){return this.update(),"table"==this.type&&this.essence.setCells(a),this},this.tryReady=function(){1==this.essence.ready&&(this.ready=1,this.layer.tryReady())},this.addAnimation=function(a,b,c,d){return this.essence.addAnimation(a,b,c,d),this},this.runAnimation=function(a,b){return this.update(),this.essence.runAnimation(a,b),this},this.stopAnimation=function(){return this.update(),this.essence.stopAnimation(),this},this.moveTo=function(a,b,c){this.update();var d=this.layer.parent.options.interval;this.start_time=this.layer.parent.time;var e=this.essence.x-a,f=this.essence.y-b;return this.vx=-(e/c)*d,this.vy=-(f/c)*d,this.iter=Math.round(c/d),this},this.rotate=function(a,b){this.update();var c=this.angle-a,d=this.layer.parent.options.interval;return this.vangle=c/b*d,this.a_iter=Math.round(b/d),this},this.fillRect=function(a,b,c,d){return"drawing"==this.type&&(this.essence.type="fillRect",this.essence.x=a,this.essence.y=b,this.essence.w=c,this.essence.h=d),this},this.update=function(){this.layer.update()},this.chechUpdate=function(){return this.iter>0||this.a_iter>0?(this.update(),!0):this.essence.chechUpdate()?!0:!1},this.draw=function(){this.iter>0&&(this.essence.x+=this.vx,this.essence.y+=this.vy,this.iter--),this.time!=this.layer.parent.time&&this.a_iter>0&&(this.angle-=this.vangle,this.a_iter--),this.angle&&(this.layer.getCtx().save(),this.layer.getCtx().translate(this.essence.gx()+this.essence.w/2,this.essence.gy()+this.essence.h/2),this.layer.getCtx().rotate(-Math.PI*(this.angle/180)),this.was_r.x=this.essence.x,this.was_r.y=this.essence.y,this.essence.x=-(this.essence.w/2),this.essence.y=-(this.essence.h/2)),this.essence.draw(),this.angle&&(this.essence.x=this.was_r.x,this.essence.y=this.was_r.y,this.was_r=[],this.layer.getCtx().restore()),this.time=this.layer.parent.time}}function Pl_image(a){this.x=0,this.y=0,this.w=0,this.h=0,this.sx=0,this.sy=0,this.sw=0,this.sh=0,this.was=[],this.was_r=[],this.angle=0,this.vangle=0,this.animation_iters=0,this.animation_frame=0,this.animation_frame_counter=1,this.animation_name="",this.animations=[],this.object=a,this.object.layer.ready=0,this.object.ready=0,this.ready=0,this.time,this.img=new Image,this.img.parent=this,this.img.onload=function(){this.parent.ready=1,this.parent.object.tryReady()},this.gx=function(){return this.x},this.gy=function(){return this.y},this.addAnimation=function(a,b,c,d){if(!d)var d=[];this.animations[a]={row:b,frames:c,speed:d}},this.runAnimation=function(a,b){return this.animations[a]&&(this.animation_name=a,this.was.sy=this.sy,this.was.sx=this.sx,this.sy=(this.animations[a].row-1)*this.sh,this.sx=0,this.animation_frame=1,this.animation_iters=b),this},this.stopAnimation=function(){this.animation_iters=0},this.update=function(){this.object.update()},this.chechUpdate=function(){return this.animation_frame>0?(this.update(),!0):0!=this.animation_iters?(this.update(),!0):this.a_iter>0?(this.update(),!0):!1},this.draw=function(){this.w||this.h?this.sw||this.sh||this.sx||this.sy?(this.animation_frame>0&&(1!=this.animation_frame&&this.animation_frame<=this.animations[this.animation_name].frames?this.sx=this.sw*(this.animation_frame-1):this.animation_frame>=this.animations[this.animation_name].frames&&(this.sy=this.was.sy,this.sx=this.was.sx,this.animation_frame=-1,this.was=[],this.animation_iters>1?this.runAnimation(this.animation_name,this.animation_iters-1):this.animation_iters<0&&this.runAnimation(this.animation_name,-1)),this.animations[this.animation_name].speed[this.animation_frame-1]||(this.animations[this.animation_name].speed[this.animation_frame-1]=1),this.animations[this.animation_name].speed[this.animation_frame-1]<=this.animation_frame_counter?(this.animation_frame++,this.animation_frame_counter=1):this.animation_frame_counter++),this.object.layer.getCtx().drawImage(this.img,this.sx,this.sy,this.sw,this.sh,this.gx(),this.gy(),this.w,this.h)):this.object.layer.getCtx().drawImage(this.img,this.gx(),this.gy(),this.w,this.h):this.object.layer.getCtx().drawImage(this.img,this.gx(),this.gy())}}function Pl_table(a){this.x=0,this.y=0,this.w=0,this.h=0,this.cmh=0,this.cmw=0,this.cw=24,this.ch=24,this.ctx=a.layer.getCtx(),this.object=a,this.ready=1,this.table=[],this.cells=[],this.attrs=[],this.gx=function(){return this.x+this.object.layer.x},this.gy=function(){return this.y+this.object.layer.y},this.setTable=function(a){this.table=a,this.w=this.table.length*this.cw+this.table.length*this.cmw*2,this.h=this.table[0].length*this.ch+this.table[0].length*this.cmh*2},this.setSize=function(a,b,c,d){a&&(this.cw=a),b&&(this.ch=b),c&&(this.cmw=c),d&&(this.cmh=d)},this.setCells=function(a){for(var b in a)"string"==typeof a[b]?(this.attrs[b]=a[b],this.cells[b]=function(a,b,c,d){var e=a.ctx.fillStyle;a.ctx.fillStyle=a.attrs[d],a.ctx.fillRect(b,c,a.cw,a.ch),a.ctx.fillStyle=e}):"function"==typeof a[b]?this.cells[b]=a[b]:"object"==typeof a[b]&&(this.attrs[b]=a[b],this.cells[b]=function(a,b,c,d){a.attrs[d].setXY(b,c),a.attrs[d].draw()})},this.drawType=function(a,b,c){this.cells[a]?this.cells[a](this,b,c,a):this.ctx.fillRect(b,c,this.cw,this.ch)},this.update=function(){this.object.update()},this.chechUpdate=function(){},this.draw=function(){var a=this.x+this.cmw,b=this.y+this.cmh;for(var c in this.table){for(var d in this.table[c])this.drawType(this.table[c][d],a,b),a=a+this.cw+2*this.cmw;a=this.x+this.cmw,b=b+this.ch+2*this.cmh}}}function RRAnimator(a,b){this.map=a,this.timeEnd=b,this.square=32,this.bot_square=48,this.img_marg=16,this.players=[],this.layers=[],this.events=[],this.canv_options={width:700,height:700,interval:10,time_limit:30,multi_canvas:1},this.options={cw:this.square,ch:this.square},this.path="",this.p="",this.init=function(b){this.path=b,this.p=new Pulsar("div_canvas",this.canv_options),this.layers.map=this.p.addLayer("map",4);var c=this.layers.map.addObject("2","image",1).img(b+"pics/texture/R27.jpg").setXY(0,0,this.square,this.square,0,0,128,128),d=this.layers.map.addObject("0","image",1).img(b+"pics/texture/B1.jpg").setXY(0,0,this.square,this.square,0,30,64,64),e=this.layers.map.addObject("1",d,1);d.setXY(0,0,this.square,this.square,20,30,94,94);var f=this.layers.map.addObject("map","table");return this.layers.map.x=0,this.layers.map.y=0,f.setTable(a).setSize(this.options.cw,this.options.ch),f.setCells({2:c,0:d,1:e}),this.layers.bullets=this.p.addLayer("bullets",6),this.layers.bullets.x=0,this.layers.bullets.y=0,this},this.getX=function(a){if(this.img_marg)var b=this.img_marg;else var b=0;return(a-1)*this.options.cw+b},this.getY=function(a){if(this.img_marg)var b=this.img_marg;else var b=0;return(a-1)*this.options.ch+b},this.getAbsX=function(a){return(a-1)*this.options.cw},this.getAbsY=function(a){return(a-1)*this.options.ch},this.addPlayer=function(a,b){var c=0;for(time in a.log)c>0&&(a.timer[c]=time-c),c=time;if(this.players[a.id]=a,this.layers[a.id]=this.p.addLayer(a.id,20+a.id),this.layers[a.id].x=0,this.layers[a.id].y=0,loadBot(a.bot.model,a,this),this.layers[a.id].x=this.getX(a.bot.x),this.layers[a.id].y=this.getY(a.bot.y),this.layers[a.id].angle=90*a.bot.d-90,a.bots)for(key in a.bots){var d=this.layers[a.id].addObject(a.bots[key].id,"image").img(a.bots[key].file).setXY(a.bots[key].x-this.bot_square/2,a.bots[key].y-this.bot_square/2,this.bot_square,this.bot_square,0,0,this.bot_square,this.bot_square);a.bots[key].animations&&(d=a.bots[key].animations(d))}},this.addEvent=function(a,b,c){this.events[a+"_"+b]=c},this.draw=function(){this.p.parent=this,this.p.addFunction(function(a){a.parent.execute(a)}),this.p.draw()},this.execute=function(a){if(a.time>=this.timeEnd+1e3)return a.shutDown=!0,!1;for(id_player in this.players)for(log_time in this.players[id_player].log)if(log_time<=a.time&&(this["do"](this.players[id_player].log[log_time],id_player,a,log_time),delete this.players[id_player].log[log_time]),this.players[id_player].events)for(var b in this.players[id_player].events)this.players[id_player].events[b].time<=a.time&&(this.runEvent(this.players[id_player].events[b],id_player,a,b),delete this.players[id_player].events[b])},this["do"]=function(a,b,c,d){var e=this.players[b].timer[d],f=this.players[b].bot,g=c.getLayer(b),h=g.getObject("bot");switch(h.stopAnimation(),a){case"M1":g.moveTo(this.getX(f.x=f.nextX()),this.getY(f.y=f.nextY()),e),h.runAnimation("move",-1);break;case"R1":f.d=f.right(),g.rotate(g.angle-90,e),h.runAnimation("rotate",-1);break;case"R2":f.d=f.left(),g.rotate(g.angle+90,e),h.runAnimation("rotate",-1);break;case"F1":this.events["F1_"+b]?this.events["F1_"+b](c,b):h.runAnimation("fire",1);break;case"D1":this.events["D1_"+b]?this.events["D1_"+b](c,b):(h.set("sy",48).set("sx",240215).runAnimation("death",1),c.getLayer(b).setIndex(10+Math.random(1,9)))}},this.runEvent=function(a,b,c,d){c.getLayer("bullets");switch(bullets=game.layers.bullets,a.code){case"F1":var e=bullets.addObject("b_"+b+"_"+d,"drawing");e.fillRect(this.getAbsX(a.attrs.start_x),this.getAbsY(a.attrs.start_y),4,4).moveTo(this.getAbsX(a.attrs.end_x),this.getAbsY(a.attrs.end_y),a.attrs.end_time-a.time)}}}function Player(){this.id=0,this.log=[],this.bot=new Bot,this.timer=[],this.events=[],this.bots=[],this.addBot=function(a){this.bots[a.id]=a}}function Bot(){this.id=0,this.file="",this.x=0,this.y=0,this.d=0,this.nextX=function(){switch(this.d){case 0:return this.x+1;case 2:return this.x-1;default:return this.x}},this.nextY=function(){switch(this.d){case 1:return this.y-1;case 3:return this.y+1;default:return this.y}},this.right=function(){switch(this.d){case 0:return 3;default:return this.d-1}},this.left=function(){switch(this.d){case 3:return 0;default:return this.d+1}}}function MageS(){}function Map(){}if(function(a,b){function c(a){var b=oa[a]={};return $.each(a.split(ba),function(a,c){b[c]=!0}),b}function d(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(qa,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:pa.test(d)?$.parseJSON(d):d}catch(f){}$.data(a,c,d)}else d=b}return d}function e(a){var b;for(b in a)if(("data"!==b||!$.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(){return!1}function g(){return!0}function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function i(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function j(a,b,c){if(b=b||0,$.isFunction(b))return $.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return $.grep(a,function(a,d){return a===b===c});if("string"==typeof b){var d=$.grep(a,function(a){return 1===a.nodeType});if(Ka.test(b))return $.filter(b,d,!c);b=$.filter(b,d)}return $.grep(a,function(a,d){return $.inArray(a,b)>=0===c})}function k(a){var b=Na.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function l(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function m(a,b){if(1===b.nodeType&&$.hasData(a)){var c,d,e,f=$._data(a),g=$._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)$.event.add(b,c,h[c][d])}g.data&&(g.data=$.extend({},g.data))}}function n(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),$.support.html5Clone&&a.innerHTML&&!$.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Xa.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute($.expando))}function o(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function p(a){Xa.test(a.type)&&(a.defaultChecked=a.checked)}function q(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=rb.length;e--;)if(b=rb[e]+c,b in a)return b;return d}function r(a,b){return a=b||a,"none"===$.css(a,"display")||!$.contains(a.ownerDocument,a)}function s(a,b){for(var c,d,e=[],f=0,g=a.length;g>f;f++)c=a[f],c.style&&(e[f]=$._data(c,"olddisplay"),b?(!e[f]&&"none"===c.style.display&&(c.style.display=""),""===c.style.display&&r(c)&&(e[f]=$._data(c,"olddisplay",w(c.nodeName)))):(d=cb(c,"display"),!e[f]&&"none"!==d&&$._data(c,"olddisplay",d)));for(f=0;g>f;f++)c=a[f],c.style&&(b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?e[f]||"":"none"));return a}function t(a,b,c){var d=kb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function u(a,b,c,d){for(var e=c===(d?"border":"content")?4:"width"===b?1:0,f=0;4>e;e+=2)"margin"===c&&(f+=$.css(a,c+qb[e],!0)),d?("content"===c&&(f-=parseFloat(cb(a,"padding"+qb[e]))||0),"margin"!==c&&(f-=parseFloat(cb(a,"border"+qb[e]+"Width"))||0)):(f+=parseFloat(cb(a,"padding"+qb[e]))||0,"padding"!==c&&(f+=parseFloat(cb(a,"border"+qb[e]+"Width"))||0));return f}function v(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=$.support.boxSizing&&"border-box"===$.css(a,"boxSizing");if(0>=d||null==d){if(d=cb(a,b),(0>d||null==d)&&(d=a.style[b]),lb.test(d))return d;e=f&&($.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+u(a,b,c||(f?"border":"content"),e)+"px"}function w(a){if(nb[a])return nb[a];var b=$("<"+a+">").appendTo(P.body),c=b.css("display");return b.remove(),("none"===c||""===c)&&(db=P.body.appendChild(db||$.extend(P.createElement("iframe"),{frameBorder:0,width:0,height:0})),eb&&db.createElement||(eb=(db.contentWindow||db.contentDocument).document,eb.write("<!doctype html><html><body>"),eb.close()),b=eb.body.appendChild(eb.createElement(a)),c=cb(b,"display"),P.body.removeChild(db)),nb[a]=c,c}function x(a,b,c,d){var e;if($.isArray(b))$.each(b,function(b,e){c||ub.test(a)?d(a,e):x(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==$.type(b))d(a,b);else for(e in b)x(a+"["+e+"]",b[e],c,d)}function y(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(ba),h=0,i=g.length;if($.isFunction(c))for(;i>h;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function z(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===Kb;k>j&&(l||!h);j++)h=i[j](c,d,e),"string"==typeof h&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=z(a,c,d,e,h,g)));return(l||!h)&&!g["*"]&&(h=z(a,c,d,e,"*",g)),h}function A(a,c){var d,e,f=$.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&$.extend(!0,a,e)}function B(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function C(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if("*"!==e){if("*"!==h&&h!==e){if(c=i[h+" "+e]||i["* "+e],!c)for(d in i)if(f=d.split(" "),f[1]===e&&(c=i[h+" "+f[0]]||i["* "+f[0]])){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}if(c!==!0)if(c&&a["throws"])b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function D(){try{return new a.XMLHttpRequest}catch(b){}}function E(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function F(){return setTimeout(function(){Vb=b},0),Vb=$.now()}function G(a,b){$.each(b,function(b,c){for(var d=(_b[b]||[]).concat(_b["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function H(a,b,c){var d,e=0,f=$b.length,g=$.Deferred().always(function(){delete h.elem}),h=function(){for(var b=Vb||F(),c=Math.max(0,i.startTime+i.duration-b),d=1-(c/i.duration||0),e=0,f=i.tweens.length;f>e;e++)i.tweens[e].run(d);return g.notifyWith(a,[i,d,c]),1>d&&f?c:(g.resolveWith(a,[i]),!1)},i=g.promise({elem:a,props:$.extend({},b),opts:$.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Vb||F(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=$.Tween(a,i.opts,b,c,i.opts.specialEasing[b]||i.opts.easing);return i.tweens.push(e),e},stop:function(b){for(var c=0,d=b?i.tweens.length:0;d>c;c++)i.tweens[c].run(1);return b?g.resolveWith(a,[i,b]):g.rejectWith(a,[i,b]),this}}),j=i.props;for(I(j,i.opts.specialEasing);f>e;e++)if(d=$b[e].call(i,a,j,i.opts))return d;return G(i,j),$.isFunction(i.opts.start)&&i.opts.start.call(a,i),$.fx.timer($.extend(h,{anim:i,queue:i.opts.queue,elem:a})),i.progress(i.opts.progress).done(i.opts.done,i.opts.complete).fail(i.opts.fail).always(i.opts.always)}function I(a,b){var c,d,e,f,g;for(c in a)if(d=$.camelCase(c),e=b[d],f=a[c],$.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=$.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function J(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],p=a.nodeType&&r(a);c.queue||(j=$._queueHooks(a,"fx"),null==j.unqueued&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,$.queue(a,"fx").length||j.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],"inline"===$.css(a,"display")&&"none"===$.css(a,"float")&&($.support.inlineBlockNeedsLayout&&"inline"!==w(a.nodeName)?m.zoom=1:m.display="inline-block")),c.overflow&&(m.overflow="hidden",$.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(f=b[d],Xb.exec(f)){if(delete b[d],f===(p?"hide":"show"))continue;o.push(d)}if(g=o.length)for(h=$._data(a,"fxshow")||$._data(a,"fxshow",{}),p?$(a).show():l.done(function(){$(a).hide()}),l.done(function(){var b;$.removeData(a,"fxshow",!0);for(b in n)$.style(a,b,n[b])}),d=0;g>d;d++)e=o[d],i=l.createTween(e,p?h[e]:0),n[e]=h[e]||$.style(a,e),e in h||(h[e]=i.start,p&&(i.end=i.start,i.start="width"===e||"height"===e?1:0))}function K(a,b,c,d,e){return new K.prototype.init(a,b,c,d,e)}function L(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=qb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function M(a){return $.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var N,O,P=a.document,Q=a.location,R=a.navigator,S=a.jQuery,T=a.$,U=Array.prototype.push,V=Array.prototype.slice,W=Array.prototype.indexOf,X=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,Z=String.prototype.trim,$=function(a,b){return new $.fn.init(a,b,N)},_=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,aa=/\S/,ba=/\s+/,ca=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,da=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ea=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fa=/^[\],:{}\s]*$/,ga=/(?:^|:|,)(?:\s*\[)+/g,ha=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ia=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ja=/^-ms-/,ka=/-([\da-z])/gi,la=function(a,b){return(b+"").toUpperCase()},ma=function(){P.addEventListener?(P.removeEventListener("DOMContentLoaded",ma,!1),$.ready()):"complete"===P.readyState&&(P.detachEvent("onreadystatechange",ma),$.ready())},na={};$.fn=$.prototype={constructor:$,init:function(a,c,d){var e,f,g;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:da.exec(a),e&&(e[1]||!c)){if(e[1])return c=c instanceof $?c[0]:c,g=c&&c.nodeType?c.ownerDocument||c:P,a=$.parseHTML(e[1],g,!0),ea.test(e[1])&&$.isPlainObject(c)&&this.attr.call(a,c,!0),$.merge(this,a);if(f=P.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=P,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return $.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),$.makeArray(a,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return V.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=$.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d;
},each:function(a,b){return $.each(this,a,b)},ready:function(a){return $.ready.promise().done(a),this},eq:function(a){return a=+a,-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(V.apply(this,arguments),"slice",V.call(arguments).join(","))},map:function(a){return this.pushStack($.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:[].sort,splice:[].splice},$.fn.init.prototype=$.fn,$.extend=$.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"!=typeof h&&!$.isFunction(h)&&(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],e=a[c],h!==e&&(k&&e&&($.isPlainObject(e)||(f=$.isArray(e)))?(f?(f=!1,g=d&&$.isArray(d)?d:[]):g=d&&$.isPlainObject(d)?d:{},h[c]=$.extend(k,g,e)):e!==b&&(h[c]=e));return h},$.extend({noConflict:function(b){return a.$===$&&(a.$=T),b&&a.jQuery===$&&(a.jQuery=S),$},isReady:!1,readyWait:1,holdReady:function(a){a?$.readyWait++:$.ready(!0)},ready:function(a){if(a===!0?!--$.readyWait:!$.isReady){if(!P.body)return setTimeout($.ready,1);$.isReady=!0,a!==!0&&--$.readyWait>0||(O.resolveWith(P,[$]),$.fn.trigger&&$(P).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===$.type(a)},isArray:Array.isArray||function(a){return"array"===$.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):na[X.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==$.type(a)||a.nodeType||$.isWindow(a))return!1;try{if(a.constructor&&!Y.call(a,"constructor")&&!Y.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||Y.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return a&&"string"==typeof a?("boolean"==typeof b&&(c=b,b=0),b=b||P,(d=ea.exec(a))?[b.createElement(d[1])]:(d=$.buildFragment([a],b,c?null:[]),$.merge([],(d.cacheable?$.clone(d.fragment):d.fragment).childNodes))):null},parseJSON:function(b){return b&&"string"==typeof b?(b=$.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):fa.test(b.replace(ha,"@").replace(ia,"]").replace(ga,""))?new Function("return "+b)():void $.error("Invalid JSON: "+b)):null},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&$.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&aa.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ja,"ms-").replace(ka,la)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||$.isFunction(a);if(d)if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;g>f&&c.apply(a[f++],d)!==!1;);else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;g>f&&c.call(a[f],f,a[f++])!==!1;);return a},trim:Z&&!Z.call("\ufeffÂ ")?function(a){return null==a?"":Z.call(a)}:function(a){return null==a?"":(a+"").replace(ca,"")},makeArray:function(a,b){var c,d=b||[];return null!=a&&(c=$.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||$.isWindow(a)?U.call(d,a):$.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(W)return W.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof $||i!==b&&"number"==typeof i&&(i>0&&a[0]&&a[i-1]||0===i||$.isArray(a));if(j)for(;i>h;h++)e=c(a[h],h,d),null!=e&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),$.isFunction(a)?(e=V.call(arguments,2),f=function(){return a.apply(c,e.concat(V.call(arguments)))},f.guid=a.guid=a.guid||$.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=null==d,k=0,l=a.length;if(d&&"object"==typeof d){for(k in d)$.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){if(i=h===b&&$.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call($(a),c)}):(c.call(a,e),c=null)),c)for(;l>k;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),$.ready.promise=function(b){if(!O)if(O=$.Deferred(),"complete"===P.readyState)setTimeout($.ready,1);else if(P.addEventListener)P.addEventListener("DOMContentLoaded",ma,!1),a.addEventListener("load",$.ready,!1);else{P.attachEvent("onreadystatechange",ma),a.attachEvent("onload",$.ready);var c=!1;try{c=null==a.frameElement&&P.documentElement}catch(d){}c&&c.doScroll&&function e(){if(!$.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}$.ready()}}()}return O.promise(b)},$.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){na["[object "+b+"]"]=b.toLowerCase()}),N=$(P);var oa={};$.Callbacks=function(a){a="string"==typeof a?oa[a]||c(a):$.extend({},a);var d,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(d=a.memory&&b,e=!0,i=g||0,g=0,h=j.length,f=!0;j&&h>i;i++)if(j[i].apply(b[0],b[1])===!1&&a.stopOnFalse){d=!1;break}f=!1,j&&(k?k.length&&l(k.shift()):d?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function c(b){$.each(b,function(b,d){var e=$.type(d);"function"!==e||a.unique&&m.has(d)?d&&d.length&&"string"!==e&&c(d):j.push(d)})}(arguments),f?h=j.length:d&&(g=b,l(d))}return this},remove:function(){return j&&$.each(arguments,function(a,b){for(var c;(c=$.inArray(b,j,c))>-1;)j.splice(c,1),f&&(h>=c&&h--,i>=c&&i--)}),this},has:function(a){return $.inArray(a,j)>-1},empty:function(){return j=[],this},disable:function(){return j=k=d=b,this},disabled:function(){return!j},lock:function(){return k=b,d||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],j&&(!e||k)&&(f?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!e}};return m},$.extend({Deferred:function(a){var b=[["resolve","done",$.Callbacks("once memory"),"resolved"],["reject","fail",$.Callbacks("once memory"),"rejected"],["notify","progress",$.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return $.Deferred(function(c){$.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]]($.isFunction(g)?function(){var a=g.apply(this,arguments);a&&$.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return null!=a?$.extend(a,d):d}},e={};return d.pipe=d.then,$.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=V.call(arguments),g=f.length,h=1!==g||a&&$.isFunction(a.promise)?g:0,i=1===h?a:$.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?V.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&$.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),$.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m=P.createElement("div");if(m.setAttribute("className","t"),m.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=m.getElementsByTagName("*"),d=m.getElementsByTagName("a")[0],d.style.cssText="top:1px;float:left;opacity:.5",!c||!c.length)return{};e=P.createElement("select"),f=e.appendChild(P.createElement("option")),g=m.getElementsByTagName("input")[0],b={leadingWhitespace:3===m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===g.value,optSelected:f.selected,getSetAttribute:"t"!==m.className,enctype:!!P.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==P.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===P.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete m.test}catch(n){b.deleteExpando=!1}if(!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",l=function(){b.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick"),m.detachEvent("onclick",l)),g=P.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue="t"===g.value,g.setAttribute("checked","checked"),g.setAttribute("name","t"),m.appendChild(g),h=P.createDocumentFragment(),h.appendChild(m.lastChild),b.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,h.removeChild(g),h.appendChild(m),m.attachEvent)for(j in{submit:!0,change:!0,focusin:!0})i="on"+j,k=i in m,k||(m.setAttribute(i,"return;"),k="function"==typeof m[i]),b[j+"Bubbles"]=k;return $(function(){var c,d,e,f,g="padding:0;margin:0;border:0;display:block;overflow:hidden;",h=P.getElementsByTagName("body")[0];h&&(c=P.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",h.insertBefore(c,h.firstChild),d=P.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",k=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=k&&0===e[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==h.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,f=P.createElement("div"),f.style.cssText=d.style.cssText=g,f.style.marginRight=f.style.width="0",d.style.width="1px",d.appendChild(f),b.reliableMarginRight=!parseFloat((a.getComputedStyle(f,null)||{}).marginRight)),"undefined"!=typeof d.style.zoom&&(d.innerHTML="",d.style.cssText=g+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),h.removeChild(c),c=d=e=f=null)}),h.removeChild(m),c=d=e=f=g=h=m=null,b}();var pa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,qa=/([A-Z])/g;$.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+($.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?$.cache[a[$.expando]]:a[$.expando],!!a&&!e(a)},data:function(a,c,d,e){if($.acceptData(a)){var f,g,h=$.expando,i="string"==typeof c,j=a.nodeType,k=j?$.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=$.deletedIds.pop()||$.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=$.noop)),("object"==typeof c||"function"==typeof c)&&(e?k[l]=$.extend(k[l],c):k[l].data=$.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[$.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[$.camelCase(c)])):g=f,g}},removeData:function(a,b,c){if($.acceptData(a)){var d,f,g,h=a.nodeType,i=h?$.cache:a,j=h?a[$.expando]:$.expando;if(i[j]){if(b&&(d=c?i[j]:i[j].data)){$.isArray(b)||(b in d?b=[b]:(b=$.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,g=b.length;g>f;f++)delete d[b[f]];if(!(c?e:$.isEmptyObject)(d))return}(c||(delete i[j].data,e(i[j])))&&(h?$.cleanData([a],!0):$.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}},_data:function(a,b,c){return $.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&$.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),$.fn.extend({data:function(a,c){var e,f,g,h,i,j=this[0],k=0,l=null;if(a===b){if(this.length&&(l=$.data(j),1===j.nodeType&&!$._data(j,"parsedAttrs"))){for(g=j.attributes,i=g.length;i>k;k++)h=g[k].name,h.indexOf("data-")||(h=$.camelCase(h.substring(5)),d(j,h,l[h]));$._data(j,"parsedAttrs",!0)}return l}return"object"==typeof a?this.each(function(){$.data(this,a)}):(e=a.split(".",2),e[1]=e[1]?"."+e[1]:"",f=e[1]+"!",$.access(this,function(c){return c===b?(l=this.triggerHandler("getData"+f,[e[0]]),l===b&&j&&(l=$.data(j,a),l=d(j,a,l)),l===b&&e[1]?this.data(e[0]):l):(e[1]=c,void this.each(function(){var b=$(this);b.triggerHandler("setData"+f,e),$.data(this,a,c),b.triggerHandler("changeData"+f,e)}))},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){$.removeData(this,a)})}}),$.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=$._data(a,b),c&&(!d||$.isArray(c)?d=$._data(a,b,$.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=$.queue(a,b),d=c.length,e=c.shift(),f=$._queueHooks(a,b),g=function(){$.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return $._data(a,c)||$._data(a,c,{empty:$.Callbacks("once memory").add(function(){$.removeData(a,b+"queue",!0),$.removeData(a,c,!0)})})}}),$.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?$.queue(this[0],a):c===b?this:this.each(function(){var b=$.queue(this,a,c);$._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&$.dequeue(this,a)})},dequeue:function(a){return this.each(function(){$.dequeue(this,a)})},delay:function(a,b){return a=$.fx?$.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=$.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=$._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var ra,sa,ta,ua=/[\t\r\n]/g,va=/\r/g,wa=/^(?:button|input)$/i,xa=/^(?:button|input|object|select|textarea)$/i,ya=/^a(?:rea|)$/i,za=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Aa=$.support.getSetAttribute;$.fn.extend({attr:function(a,b){return $.access(this,$.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){$.removeAttr(this,a)})},prop:function(a,b){return $.access(this,$.prop,a,b,arguments.length>1)},removeProp:function(a){return a=$.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if($.isFunction(a))return this.each(function(b){$(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(ba),c=0,d=this.length;d>c;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;h>g;g++)f.indexOf(" "+b[g]+" ")<0&&(f+=b[g]+" ");e.className=$.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if($.isFunction(a))return this.each(function(b){$(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(ba),h=0,i=this.length;i>h;h++)if(e=this[h],1===e.nodeType&&e.className){for(d=(" "+e.className+" ").replace(ua," "),f=0,g=c.length;g>f;f++)for(;d.indexOf(" "+c[f]+" ")>=0;)d=d.replace(" "+c[f]+" "," ");e.className=a?$.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return $.isFunction(a)?this.each(function(c){$(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=$(this),h=b,i=a.split(ba);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else("undefined"===c||"boolean"===c)&&(this.className&&$._data(this,"__className__",this.className),this.className=this.className||a===!1?"":$._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ua," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=$.isFunction(a),this.each(function(d){var f,g=$(this);1===this.nodeType&&(f=e?a.call(this,d,g.val()):a,null==f?f="":"number"==typeof f?f+="":$.isArray(f)&&(f=$.map(f,function(a){return null==a?"":a+""})),c=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return c=$.valHooks[f.type]||$.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(va,""):null==d?"":d)}}}),$.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i="select-one"===a.type;if(0>f)return null;for(c=i?f:0,d=i?f+1:h.length;d>c;c++)if(e=h[c],e.selected&&($.support.optDisabled?!e.disabled:null===e.getAttribute("disabled"))&&(!e.parentNode.disabled||!$.nodeName(e.parentNode,"optgroup"))){if(b=$(e).val(),i)return b;g.push(b)}return i&&!g.length&&h.length?$(h[f]).val():g},set:function(a,b){var c=$.makeArray(b);return $(a).find("option").each(function(){this.selected=$.inArray($(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&$.isFunction($.fn[c])?$(a)[c](d):"undefined"==typeof a.getAttribute?$.prop(a,c,d):(h=1!==i||!$.isXMLDoc(a),h&&(c=c.toLowerCase(),g=$.attrHooks[c]||(za.test(c)?sa:ra)),d!==b?null===d?void $.removeAttr(a,c):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f))},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(ba);g<d.length;g++)e=d[g],e&&(c=$.propFix[e]||e,f=za.test(e),f||$.attr(a,e,""),a.removeAttribute(Aa?e:c),f&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(wa.test(a.nodeName)&&a.parentNode)$.error("type property can't be changed");else if(!$.support.radioValue&&"radio"===b&&$.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return ra&&$.nodeName(a,"button")?ra.get(a,b):b in a?a.value:null},set:function(a,b,c){return ra&&$.nodeName(a,"button")?ra.set(a,b,c):void(a.value=b)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!$.isXMLDoc(a),g&&(c=$.propFix[c]||c,f=$.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):xa.test(a.nodeName)||ya.test(a.nodeName)&&a.href?0:b}}}}),sa={get:function(a,c){var d,e=$.prop(a,c);return e===!0||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?$.removeAttr(a,c):(d=$.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},Aa||(ta={name:!0,id:!0,coords:!0},ra=$.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(ta[c]?""!==d.value:d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=P.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},$.each(["width","height"],function(a,b){$.attrHooks[b]=$.extend($.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})}),$.attrHooks.contenteditable={get:ra.get,set:function(a,b,c){""===b&&(b="false"),ra.set(a,b,c)}}),$.support.hrefNormalized||$.each(["href","src","width","height"],function(a,c){$.attrHooks[c]=$.extend($.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),$.support.style||($.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}}),$.support.optSelected||($.propHooks.selected=$.extend($.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),$.support.enctype||($.propFix.enctype="encoding"),$.support.checkOn||$.each(["radio","checkbox"],function(){$.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]=$.extend($.valHooks[this],{set:function(a,b){return $.isArray(b)?a.checked=$.inArray($(a).val(),b)>=0:void 0}})});var Ba=/^(?:textarea|input|select)$/i,Ca=/^([^\.]*|)(?:\.(.+)|)$/,Da=/(?:^|\s)hover(\.\S+|)\b/,Ea=/^key/,Fa=/^(?:mouse|contextmenu)|click/,Ga=/^(?:focusinfocus|focusoutblur)$/,Ha=function(a){return $.event.special.hover?a:a.replace(Da,"mouseenter$1 mouseleave$1")};$.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=$._data(a))){for(d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=$.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return"undefined"==typeof $||a&&$.event.triggered===a.type?b:$.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=$.trim(Ha(c)).split(" "),j=0;j<c.length;j++)k=Ca.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),q=$.event.special[l]||{},l=(f?q.delegateType:q.bindType)||l,q=$.event.special[l]||{},n=$.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&$.expr.match.needsContext.test(f),namespace:m.join(".")},o),p=i[l],p||(p=i[l]=[],p.delegateCount=0,q.setup&&q.setup.call(a,e,m,h)!==!1||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,n):p.push(n),$.event.global[l]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=$.hasData(a)&&$._data(a);if(q&&(m=q.events)){for(b=$.trim(Ha(b||"")).split(" "),f=0;f<b.length;f++)if(g=Ca.exec(b[f])||[],h=i=g[1],j=g[2],h){for(n=$.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0;l<o.length;l++)p=o[l],(e||i===p.origType)&&(!c||c.guid===p.guid)&&(!j||j.test(p.namespace))&&(!d||d===p.selector||"**"===d&&p.selector)&&(o.splice(l--,1),p.selector&&o.delegateCount--,n.remove&&n.remove.call(a,p));0===o.length&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,q.handle)===!1)&&$.removeEvent(a,h,q.handle),delete m[h])}else for(h in m)$.event.remove(a,h+b[f],c,d,!0);$.isEmptyObject(m)&&(delete q.handle,$.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,i,j,k,l,m,n,o,p,q=c.type||c,r=[];if(Ga.test(q+$.event.triggered))return;if(q.indexOf("!")>=0&&(q=q.slice(0,-1),h=!0),q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),(!e||$.event.customEvent[q])&&!$.event.global[q])return;if(c="object"==typeof c?c[$.expando]?c:new $.Event(q,c):new $.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=h,c.namespace=r.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=q.indexOf(":")<0?"on"+q:"",!e){g=$.cache;for(i in g)g[i].events&&g[i].events[q]&&$.event.trigger(c,d,g[i].handle.elem,!0);return}if(c.result=b,c.target||(c.target=e),d=null!=d?$.makeArray(d):[],d.unshift(c),m=$.event.special[q]||{},m.trigger&&m.trigger.apply(e,d)===!1)return;if(o=[[e,m.bindType||q]],!f&&!m.noBubble&&!$.isWindow(e)){for(p=m.delegateType||q,j=Ga.test(p+q)?e:e.parentNode,k=e;j;j=j.parentNode)o.push([j,p]),k=j;k===(e.ownerDocument||P)&&o.push([k.defaultView||k.parentWindow||a,p])}for(i=0;i<o.length&&!c.isPropagationStopped();i++)j=o[i][0],c.type=o[i][1],n=($._data(j,"events")||{})[c.type]&&$._data(j,"handle"),n&&n.apply(j,d),n=l&&j[l],n&&$.acceptData(j)&&n.apply&&n.apply(j,d)===!1&&c.preventDefault();return c.type=q,!f&&!c.isDefaultPrevented()&&(!m._default||m._default.apply(e.ownerDocument,d)===!1)&&("click"!==q||!$.nodeName(e,"a"))&&$.acceptData(e)&&l&&e[q]&&("focus"!==q&&"blur"!==q||0!==c.target.offsetWidth)&&!$.isWindow(e)&&(k=e[l],k&&(e[l]=null),$.event.triggered=q,e[q](),$.event.triggered=b,k&&(e[l]=k)),c.result}},dispatch:function(c){c=$.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m=($._data(this,"events")||{})[c.type]||[],n=m.delegateCount,o=V.call(arguments),p=!c.exclusive&&!c.namespace,q=$.event.special[c.type]||{},r=[];if(o[0]=c,c.delegateTarget=this,!q.preDispatch||q.preDispatch.call(this,c)!==!1){if(n&&(!c.button||"click"!==c.type))for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==c.type){for(h={},j=[],d=0;n>d;d++)k=m[d],l=k.selector,h[l]===b&&(h[l]=k.needsContext?$(l,this).index(f)>=0:$.find(l,this,null,[f]).length),h[l]&&j.push(k);j.length&&r.push({elem:f,matches:j})}for(m.length>n&&r.push({elem:this,matches:m.slice(n)}),d=0;d<r.length&&!c.isPropagationStopped();d++)for(i=r[d],c.currentTarget=i.elem,e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++)k=i.matches[e],(p||!c.namespace&&!k.namespace||c.namespace_re&&c.namespace_re.test(k.namespace))&&(c.data=k.data,c.handleObj=k,g=(($.event.special[k.origType]||{}).handle||k.handler).apply(i.elem,o),g!==b&&(c.result=g,g===!1&&(c.preventDefault(),c.stopPropagation())));return q.postDispatch&&q.postDispatch.call(this,c),c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||P,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),!a.which&&g!==b&&(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[$.expando])return a;var b,c,d=a,e=$.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props;for(a=$.Event(d),b=f.length;b;)c=f[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||P),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,e.filter?e.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){$.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=$.extend(new $.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?$.event.trigger(e,null,b):$.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},$.event.handle=$.event.dispatch,$.removeEvent=P.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},$.Event=function(a,b){return this instanceof $.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?g:f):this.type=a,b&&$.extend(this,b),this.timeStamp=a&&a.timeStamp||$.now(),this[$.expando]=!0,void 0):new $.Event(a,b)},$.Event.prototype={preventDefault:function(){this.isDefaultPrevented=g;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g,this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f},$.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){$.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;f.selector;return(!e||e!==d&&!$.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),$.support.submitBubbles||($.event.special.submit={setup:function(){return $.nodeName(this,"form")?!1:void $.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=$.nodeName(c,"input")||$.nodeName(c,"button")?c.form:b;d&&!$._data(d,"_submit_attached")&&($.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),$._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&$.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return $.nodeName(this,"form")?!1:void $.event.remove(this,"._submit")}}),$.support.changeBubbles||($.event.special.change={setup:function(){return Ba.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&($.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),$.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),$.event.simulate("change",this,a,!0)})),!1):void $.event.add(this,"beforeactivate._change",function(a){var b=a.target;Ba.test(b.nodeName)&&!$._data(b,"_change_attached")&&($.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&$.event.simulate("change",this.parentNode,a,!0)}),$._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return $.event.remove(this,"._change"),!Ba.test(this.nodeName)}}),$.support.focusinBubbles||$.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){$.event.simulate(b,a.target,$.event.fix(a),!0)};$.event.special[b]={setup:function(){0===c++&&P.addEventListener(a,d,!0)},teardown:function(){0===--c&&P.removeEventListener(a,d,!0)}}}),$.fn.extend({on:function(a,c,d,e,g){var h,i;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,
d=b):(e=d,d=c,c=b)),e===!1)e=f;else if(!e)return this;return 1===g&&(h=e,e=function(a){return $().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=$.guid++)),this.each(function(){$.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,g;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,$(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(g in a)this.off(g,c,a[g]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=f),this.each(function(){$.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return $(this.context).on(a,this.selector,b,c),this},die:function(a,b){return $(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){$.event.trigger(a,b,this)})},triggerHandler:function(a,b){return this[0]?$.event.trigger(a,b,this[0],!0):void 0},toggle:function(a){var b=arguments,c=a.guid||$.guid++,d=0,e=function(c){var e=($._data(this,"lastToggle"+a.guid)||0)%d;return $._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){$.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Ea.test(b)&&($.event.fixHooks[b]=$.event.keyHooks),Fa.test(b)&&($.event.fixHooks[b]=$.event.mouseHooks)}),function(a,b){function c(a,b,c,d){c=c||[],b=b||F;var e,f,g,h,i=b.nodeType;if(!a||"string"!=typeof a)return c;if(1!==i&&9!==i)return[];if(g=v(b),!g&&!d&&(e=ca.exec(a)))if(h=e[1]){if(9===i){if(f=b.getElementById(h),!f||!f.parentNode)return c;if(f.id===h)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(h))&&w(b,f)&&f.id===h)return c.push(f),c}else{if(e[2])return K.apply(c,L.call(b.getElementsByTagName(a),0)),c;if((h=e[3])&&ma&&b.getElementsByClassName)return K.apply(c,L.call(b.getElementsByClassName(h),0)),c}return p(a.replace(Z,"$1"),b,c,d,g)}function d(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function e(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function f(a){return N(function(b){return b=+b,N(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function g(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}function h(a,b){var d,e,f,g,h,i,j,k=Q[D][a];if(k)return b?0:k.slice(0);for(h=a,i=[],j=t.preFilter;h;){(!d||(e=_.exec(h)))&&(e&&(h=h.slice(e[0].length)),i.push(f=[])),d=!1,(e=aa.exec(h))&&(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=e[0].replace(Z," "));for(g in t.filter)(e=ha[g].exec(h))&&(!j[g]||(e=j[g](e,F,!0)))&&(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=g,d.matches=e);if(!d)break}return b?h.length:h?c.error(a):Q(a,i).slice(0)}function i(a,b,c){var d=b.dir,e=c&&"parentNode"===b.dir,f=I++;return b.first?function(b,c,f){for(;b=b[d];)if(e||1===b.nodeType)return a(b,c,f)}:function(b,c,g){if(g){for(;b=b[d];)if((e||1===b.nodeType)&&a(b,c,g))return b}else for(var h,i=H+" "+f+" ",j=i+r;b=b[d];)if(e||1===b.nodeType){if((h=b[D])===j)return b.sizset;if("string"==typeof h&&0===h.indexOf(i)){if(b.sizset)return b}else{if(b[D]=j,a(b,c,g))return b.sizset=!0,b;b.sizset=!1}}}}function j(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function k(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function l(a,b,c,d,e,f){return d&&!d[D]&&(d=l(d)),e&&!e[D]&&(e=l(e,f)),N(function(f,g,h,i){if(!f||!e){var j,l,m,n=[],p=[],q=g.length,r=f||o(b||"*",h.nodeType?[h]:h,[],f),s=!a||!f&&b?r:k(r,n,a,h,i),t=c?e||(f?a:q||d)?[]:g:s;if(c&&c(s,t,h,i),d)for(m=k(t,p),d(m,[],h,i),j=m.length;j--;)(l=m[j])&&(t[p[j]]=!(s[p[j]]=l));if(f)for(j=a&&t.length;j--;)(l=t[j])&&(f[n[j]]=!(g[n[j]]=l));else t=k(t===g?t.splice(q,t.length):t),e?e(null,g,t,i):K.apply(g,t)}})}function m(a){for(var b,c,d,e=a.length,f=t.relative[a[0].type],g=f||t.relative[" "],h=f?1:0,k=i(function(a){return a===b},g,!0),n=i(function(a){return M.call(b,a)>-1},g,!0),o=[function(a,c,d){return!f&&(d||c!==A)||((b=c).nodeType?k(a,c,d):n(a,c,d))}];e>h;h++)if(c=t.relative[a[h].type])o=[i(j(o),c)];else{if(c=t.filter[a[h].type].apply(null,a[h].matches),c[D]){for(d=++h;e>d&&!t.relative[a[d].type];d++);return l(h>1&&j(o),h>1&&a.slice(0,h-1).join("").replace(Z,"$1"),c,d>h&&m(a.slice(h,d)),e>d&&m(a=a.slice(d)),e>d&&a.join(""))}o.push(c)}return j(o)}function n(a,b){var d=b.length>0,e=a.length>0,f=function(g,h,i,j,l){var m,n,o,p=[],q=0,s="0",u=g&&[],v=null!=l,w=A,x=g||e&&t.find.TAG("*",l&&h.parentNode||h),y=H+=null==w?1:Math.E;for(v&&(A=h!==F&&h,r=f.el);null!=(m=x[s]);s++){if(e&&m){for(n=0;o=a[n];n++)if(o(m,h,i)){j.push(m);break}v&&(H=y,r=++f.el)}d&&((m=!o&&m)&&q--,g&&u.push(m))}if(q+=s,d&&s!==q){for(n=0;o=b[n];n++)o(u,p,h,i);if(g){if(q>0)for(;s--;)!u[s]&&!p[s]&&(p[s]=J.call(j));p=k(p)}K.apply(j,p),v&&!g&&p.length>0&&q+b.length>1&&c.uniqueSort(j)}return v&&(H=y,A=w),u};return f.el=0,d?N(f):f}function o(a,b,d,e){for(var f=0,g=b.length;g>f;f++)c(a,b[f],d,e);return d}function p(a,b,c,d,e){var f,g,i,j,k,l=h(a);l.length;if(!d&&1===l.length){if(g=l[0]=l[0].slice(0),g.length>2&&"ID"===(i=g[0]).type&&9===b.nodeType&&!e&&t.relative[g[1].type]){if(b=t.find.ID(i.matches[0].replace(ga,""),b,e)[0],!b)return c;a=a.slice(g.shift().length)}for(f=ha.POS.test(a)?-1:g.length-1;f>=0&&(i=g[f],!t.relative[j=i.type]);f--)if((k=t.find[j])&&(d=k(i.matches[0].replace(ga,""),da.test(g[0].type)&&b.parentNode||b,e))){if(g.splice(f,1),a=d.length&&g.join(""),!a)return K.apply(c,L.call(d,0)),c;break}}return x(a,l)(d,b,e,c,da.test(a)),c}function q(){}var r,s,t,u,v,w,x,y,z,A,B=!0,C="undefined",D=("sizcache"+Math.random()).replace(".",""),E=String,F=a.document,G=F.documentElement,H=0,I=0,J=[].pop,K=[].push,L=[].slice,M=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},N=function(a,b){return a[D]=null==b||b,a},O=function(){var a={},b=[];return N(function(c,d){return b.push(c)>t.cacheLength&&delete a[b.shift()],a[c]=d},a)},P=O(),Q=O(),R=O(),S="[\\x20\\t\\r\\n\\f]",T="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",U=T.replace("w","w#"),V="([*^$|!~]?=)",W="\\["+S+"*("+T+")"+S+"*(?:"+V+S+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+U+")|)|)"+S+"*\\]",X=":("+T+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+W+")|[^:]|\\\\.)*|.*))\\)|)",Y=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+S+"*((?:-\\d)?\\d*)"+S+"*\\)|)(?=[^-]|$)",Z=new RegExp("^"+S+"+|((?:^|[^\\\\])(?:\\\\.)*)"+S+"+$","g"),_=new RegExp("^"+S+"*,"+S+"*"),aa=new RegExp("^"+S+"*([\\x20\\t\\r\\n\\f>+~])"+S+"*"),ba=new RegExp(X),ca=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,da=/[\x20\t\r\n\f]*[+~]/,ea=/h\d/i,fa=/input|select|textarea|button/i,ga=/\\(?!\\)/g,ha={ID:new RegExp("^#("+T+")"),CLASS:new RegExp("^\\.("+T+")"),NAME:new RegExp("^\\[name=['\"]?("+T+")['\"]?\\]"),TAG:new RegExp("^("+T.replace("w","w*")+")"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+X),POS:new RegExp(Y,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+S+"*(even|odd|(([+-]|)(\\d*)n|)"+S+"*(?:([+-]|)"+S+"*(\\d+)|))"+S+"*\\)|)","i"),needsContext:new RegExp("^"+S+"*[>+~]|"+Y,"i")},ia=function(a){var b=F.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}},ja=ia(function(a){return a.appendChild(F.createComment("")),!a.getElementsByTagName("*").length}),ka=ia(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==C&&"#"===a.firstChild.getAttribute("href")}),la=ia(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),ma=ia(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),na=ia(function(a){a.id=D+0,a.innerHTML="<a name='"+D+"'></a><div name='"+D+"'></div>",G.insertBefore(a,G.firstChild);var b=F.getElementsByName&&F.getElementsByName(D).length===2+F.getElementsByName(D+0).length;return s=!F.getElementById(D),G.removeChild(a),b});try{L.call(G.childNodes,0)[0].nodeType}catch(oa){L=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){return c(b,null,null,[a]).length>0},u=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=u(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=u(b);return c},v=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},w=c.contains=G.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:G.compareDocumentPosition?function(a,b){return b&&!!(16&a.compareDocumentPosition(b))}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},c.attr=function(a,b){var c,d=v(a);return d||(b=b.toLowerCase()),(c=t.attrHandle[b])?c(a):d||la?a.getAttribute(b):(c=a.getAttributeNode(b),c?"boolean"==typeof a[b]?a[b]?b:null:c.specified?c.value:null:null)},t=c.selectors={cacheLength:50,createPseudo:N,match:ha,attrHandle:ka?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:s?function(a,b,c){if(typeof b.getElementById!==C&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==C&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==C&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:ja?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c},NAME:na&&function(a,b){return typeof b.getElementsByName!==C?b.getElementsByName(name):void 0},CLASS:ma&&function(a,b,c){return typeof b.getElementsByClassName===C||c?void 0:b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ga,""),a[3]=(a[4]||a[5]||"").replace(ga,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||c.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&c.error(a[0]),a},PSEUDO:function(a){var b,c;return ha.CHILD.test(a[0])?null:(a[3]?a[2]=a[3]:(b=a[4])&&(ba.test(b)&&(c=h(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b),a.slice(0,3))}},filter:{ID:s?function(a){return a=a.replace(ga,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(ga,""),function(b){var c=typeof b.getAttributeNode!==C&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ga,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=P[D][a];return b||(b=P(a,new RegExp("(^|"+S+")"+a+"("+S+"|$)"))),function(a){return b.test(a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")}},ATTR:function(a,b,d){return function(e,f){var g=c.attr(e,a);return null==g?"!="===b:b?(g+="","="===b?g===d:"!="===b?g!==d:"^="===b?d&&0===g.indexOf(d):"*="===b?d&&g.indexOf(d)>-1:"$="===b?d&&g.substr(g.length-d.length)===d:"~="===b?(" "+g+" ").indexOf(d)>-1:"|="===b?g===d||g.substr(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d){return"nth"===a?function(a){var b,e,f=a.parentNode;if(1===c&&0===d)return!0;if(f)for(e=0,b=f.firstChild;b&&(1!==b.nodeType||(e++,a!==b));b=b.nextSibling);return e-=d,e===c||e%c===0&&e/c>=0}:function(b){var c=b;switch(a){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var d,e=t.pseudos[a]||t.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return e[D]?e(b):e.length>1?(d=[a,a,"",b],t.setFilters.hasOwnProperty(a.toLowerCase())?N(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=M.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:N(function(a){var b=[],c=[],d=x(a.replace(Z,"$1"));return d[D]?N(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:N(function(a){return function(b){return c(a,b).length>0}}),contains:N(function(a){return function(b){return(b.textContent||b.innerText||u(b)).indexOf(a)>-1}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!t.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if(a.nodeName>"@"||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return ea.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:d("radio"),checkbox:d("checkbox"),file:d("file"),password:d("password"),image:d("image"),submit:e("submit"),reset:e("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return fa.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:f(function(a,b,c){return[0]}),last:f(function(a,b,c){return[b-1]}),eq:f(function(a,b,c){return[0>c?c+b:c]}),even:f(function(a,b,c){for(var d=0;b>d;d+=2)a.push(d);return a}),odd:f(function(a,b,c){for(var d=1;b>d;d+=2)a.push(d);return a}),lt:f(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:f(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},y=G.compareDocumentPosition?function(a,b){return a===b?(z=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b):a.compareDocumentPosition)?-1:1}:function(a,b){if(a===b)return z=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return g(a,b);if(!h)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;c>k&&d>k;k++)if(e[k]!==f[k])return g(e[k],f[k]);return k===c?g(a,f[k],-1):g(e[k],b,1)},[0,0].sort(y),B=!z,c.uniqueSort=function(a){var b,c=1;if(z=B,a.sort(y),z)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);return a},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},x=c.compile=function(a,b){var c,d=[],e=[],f=R[D][a];if(!f){for(b||(b=h(a)),c=b.length;c--;)f=m(b[c]),f[D]?d.push(f):e.push(f);f=R(a,n(e,d))}return f},F.querySelectorAll&&function(){var a,b=p,d=/'|\\/g,e=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,f=[":focus"],g=[":active",":focus"],i=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector;ia(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||f.push("\\["+S+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||f.push(":checked")}),ia(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&f.push("[*^$]="+S+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")}),f=new RegExp(f.join("|")),p=function(a,c,e,g,i){if(!(g||i||f&&f.test(a))){var j,k,l=!0,m=D,n=c,o=9===c.nodeType&&a;if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){for(j=h(a),(l=c.getAttribute("id"))?m=l.replace(d,"\\$&"):c.setAttribute("id",m),m="[id='"+m+"'] ",k=j.length;k--;)j[k]=m+j[k].join("");n=da.test(a)&&c.parentNode||c,o=j.join(",")}if(o)try{return K.apply(e,L.call(n.querySelectorAll(o),0)),e}catch(p){}finally{l||c.removeAttribute("id")}}return b(a,c,e,g,i)},i&&(ia(function(b){a=i.call(b,"div");try{i.call(b,"[test!='']:sizzle"),g.push("!=",X)}catch(c){}}),g=new RegExp(g.join("|")),c.matchesSelector=function(b,d){if(d=d.replace(e,"='$1']"),!(v(b)||g.test(d)||f&&f.test(d)))try{var h=i.call(b,d);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(j){}return c(d,null,null,[b]).length>0})}(),t.pseudos.nth=t.pseudos.eq,t.filters=q.prototype=t.pseudos,t.setFilters=new q,c.attr=$.attr,$.find=c,$.expr=c.selectors,$.expr[":"]=$.expr.pseudos,$.unique=c.uniqueSort,$.text=c.getText,$.isXMLDoc=c.isXML,$.contains=c.contains}(a);var Ia=/Until$/,Ja=/^(?:parents|prev(?:Until|All))/,Ka=/^.[^:#\[\.,]*$/,La=$.expr.match.needsContext,Ma={children:!0,contents:!0,next:!0,prev:!0};$.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!=typeof a)return $(a).filter(function(){for(b=0,c=h.length;c>b;b++)if($.contains(h[b],this))return!0});for(g=this.pushStack("","find",a),b=0,c=this.length;c>b;b++)if(d=g.length,$.find(a,this[b],g),b>0)for(e=d;e<g.length;e++)for(f=0;d>f;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var b,c=$(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if($.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?La.test(a)?$(a,this.context).index(this[0])>=0:$.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=La.test(a)||"string"!=typeof a?$(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:$.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return f=f.length>1?$.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?"string"==typeof a?$.inArray(this[0],$(a)):$.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?$(a,b):$.makeArray(a&&a.nodeType?[a]:a),d=$.merge(this.get(),c);return this.pushStack(h(c[0])||h(d[0])?d:$.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),$.fn.andSelf=$.fn.addBack,$.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return $.dir(a,"parentNode")},parentsUntil:function(a,b,c){return $.dir(a,"parentNode",c)},next:function(a){return i(a,"nextSibling")},prev:function(a){return i(a,"previousSibling")},nextAll:function(a){return $.dir(a,"nextSibling")},prevAll:function(a){return $.dir(a,"previousSibling")},nextUntil:function(a,b,c){return $.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return $.dir(a,"previousSibling",c)},siblings:function(a){return $.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return $.sibling(a.firstChild)},contents:function(a){return $.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:$.merge([],a.childNodes)}},function(a,b){$.fn[a]=function(c,d){var e=$.map(this,b,c);return Ia.test(a)||(d=c),d&&"string"==typeof d&&(e=$.filter(d,e)),e=this.length>1&&!Ma[a]?$.unique(e):e,this.length>1&&Ja.test(a)&&(e=e.reverse()),this.pushStack(e,a,V.call(arguments).join(","))}}),$.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?$.find.matchesSelector(b[0],a)?[b[0]]:[]:$.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!$(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Na="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Oa=/ jQuery\d+="(?:null|\d+)"/g,Pa=/^\s+/,Qa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ra=/<([\w:]+)/,Sa=/<tbody/i,Ta=/<|&#?\w+;/,Ua=/<(?:script|style|link)/i,Va=/<(?:script|object|embed|option|style)/i,Wa=new RegExp("<(?:"+Na+")[\\s/>]","i"),Xa=/^(?:checkbox|radio)$/,Ya=/checked\s*(?:[^=]|=\s*.checked.)/i,Za=/\/(java|ecma)script/i,$a=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,_a={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ab=k(P),bb=ab.appendChild(P.createElement("div"));_a.optgroup=_a.option,_a.tbody=_a.tfoot=_a.colgroup=_a.caption=_a.thead,_a.th=_a.td,$.support.htmlSerialize||(_a._default=[1,"X<div>","</div>"]),$.fn.extend({text:function(a){return $.access(this,function(a){return a===b?$.text(this):this.empty().append((this[0]&&this[0].ownerDocument||P).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if($.isFunction(a))return this.each(function(b){$(this).wrapAll(a.call(this,b))});if(this[0]){var b=$(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return $.isFunction(a)?this.each(function(b){$(this).wrapInner(a.call(this,b))}):this.each(function(){var b=$(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=$.isFunction(a);return this.each(function(c){$(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){$.nodeName(this,"body")||$(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||$.filter(a,[c]).length)&&(!b&&1===c.nodeType&&($.cleanData(c.getElementsByTagName("*")),$.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&$.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return $.clone(this,a,b)})},html:function(a){return $.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Oa,""):b;if("string"==typeof a&&!Ua.test(a)&&($.support.htmlSerialize||!Wa.test(a))&&($.support.leadingWhitespace||!Pa.test(a))&&!_a[(Ra.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Qa,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&($.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return h(this[0])?this.length?this.pushStack($($.isFunction(a)?a():a),"replaceWith",a):this:$.isFunction(a)?this.each(function(b){var c=$(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=$(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;$(this).remove(),b?$(b).before(a):$(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],m=this.length;if(!$.support.checkClone&&m>1&&"string"==typeof j&&Ya.test(j))return this.each(function(){$(this).domManip(a,c,d)});if($.isFunction(j))return this.each(function(e){var f=$(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(e=$.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,1===g.childNodes.length&&(g=f),f)for(c=c&&$.nodeName(f,"tr"),h=e.cacheable||m-1;m>i;i++)d.call(c&&$.nodeName(this[i],"table")?l(this[i],"tbody"):this[i],i===h?g:$.clone(g,!0,!0));g=f=null,k.length&&$.each(k,function(a,b){b.src?$.ajax?$.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):$.error("no ajax"):$.globalEval((b.text||b.textContent||b.innerHTML||"").replace($a,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),$.buildFragment=function(a,c,d){var e,f,g,h=a[0];return c=c||P,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,1===a.length&&"string"==typeof h&&h.length<512&&c===P&&"<"===h.charAt(0)&&!Va.test(h)&&($.support.checkClone||!Ya.test(h))&&($.support.html5Clone||!Wa.test(h))&&(f=!0,e=$.fragments[h],g=e!==b),e||(e=c.createDocumentFragment(),$.clean(a,c,e,d),f&&($.fragments[h]=g&&e)),{fragment:e,cacheable:f}},$.fragments={},$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){$.fn[a]=function(c){var d,e=0,f=[],g=$(c),h=g.length,i=1===this.length&&this[0].parentNode;if((null==i||i&&11===i.nodeType&&1===i.childNodes.length)&&1===h)return g[b](this[0]),this;for(;h>e;e++)d=(e>0?this.clone(!0):this).get(),$(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),$.extend({clone:function(a,b,c){var d,e,f,g;if($.support.html5Clone||$.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bb.innerHTML=a.outerHTML,bb.removeChild(g=bb.firstChild)),!($.support.noCloneEvent&&$.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||$.isXMLDoc(a)))for(n(a,g),d=o(a),e=o(g),f=0;d[f];++f)e[f]&&n(d[f],e[f]);if(b&&(m(a,g),c))for(d=o(a),e=o(g),f=0;d[f];++f)m(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var e,f,g,h,i,j,l,m,n,o,q,r=b===P&&ab,s=[];for(b&&"undefined"!=typeof b.createDocumentFragment||(b=P),e=0;null!=(g=a[e]);e++)if("number"==typeof g&&(g+=""),g){if("string"==typeof g)if(Ta.test(g)){for(r=r||k(b),l=b.createElement("div"),r.appendChild(l),g=g.replace(Qa,"<$1></$2>"),h=(Ra.exec(g)||["",""])[1].toLowerCase(),i=_a[h]||_a._default,j=i[0],l.innerHTML=i[1]+g+i[2];j--;)l=l.lastChild;if(!$.support.tbody)for(m=Sa.test(g),n="table"!==h||m?"<table>"!==i[1]||m?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes,f=n.length-1;f>=0;--f)$.nodeName(n[f],"tbody")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f]);!$.support.leadingWhitespace&&Pa.test(g)&&l.insertBefore(b.createTextNode(Pa.exec(g)[0]),l.firstChild),g=l.childNodes,l.parentNode.removeChild(l)}else g=b.createTextNode(g);g.nodeType?s.push(g):$.merge(s,g)}if(l&&(g=l=r=null),!$.support.appendChecked)for(e=0;null!=(g=s[e]);e++)$.nodeName(g,"input")?p(g):"undefined"!=typeof g.getElementsByTagName&&$.grep(g.getElementsByTagName("input"),p);if(c)for(o=function(a){return!a.type||Za.test(a.type)?d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a):void 0},e=0;null!=(g=s[e]);e++)$.nodeName(g,"script")&&o(g)||(c.appendChild(g),"undefined"!=typeof g.getElementsByTagName&&(q=$.grep($.merge([],g.getElementsByTagName("script")),o),s.splice.apply(s,[e+1,0].concat(q)),e+=q.length));return s},cleanData:function(a,b){for(var c,d,e,f,g=0,h=$.expando,i=$.cache,j=$.support.deleteExpando,k=$.event.special;null!=(e=a[g]);g++)if((b||$.acceptData(e))&&(d=e[h],c=d&&i[d])){if(c.events)for(f in c.events)k[f]?$.event.remove(e,f):$.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,$.deletedIds.push(d))}}}),function(){var a,b;$.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=$.uaMatch(R.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),$.browser=b,$.sub=function(){function a(b,c){return new a.fn.init(b,c)}$.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function c(c,d){return d&&d instanceof $&&!(d instanceof a)&&(d=a(d)),$.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(P);return a}}();var cb,db,eb,fb=/alpha\([^)]*\)/i,gb=/opacity=([^)]*)/,hb=/^(top|right|bottom|left)$/,ib=/^(none|table(?!-c[ea]).+)/,jb=/^margin/,kb=new RegExp("^("+_+")(.*)$","i"),lb=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),mb=new RegExp("^([-+])=("+_+")","i"),nb={},ob={position:"absolute",visibility:"hidden",display:"block"},pb={letterSpacing:0,fontWeight:400},qb=["Top","Right","Bottom","Left"],rb=["Webkit","O","Moz","ms"],sb=$.fn.toggle;$.fn.extend({css:function(a,c){return $.access(this,function(a,c,d){return d!==b?$.style(a,c,d):$.css(a,c)},a,c,arguments.length>1)},show:function(){return s(this,!0)},hide:function(){return s(this)},toggle:function(a,b){var c="boolean"==typeof a;return $.isFunction(a)&&$.isFunction(b)?sb.apply(this,arguments):this.each(function(){(c?a:r(this))?$(this).show():$(this).hide()})}}),$.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=cb(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":$.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=$.camelCase(c),j=a.style;if(c=$.cssProps[i]||($.cssProps[i]=q(j,i)),h=$.cssHooks[c]||$.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=mb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat($.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"===g&&!$.cssNumber[i]&&(d+="px"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=$.camelCase(c);return c=$.cssProps[i]||($.cssProps[i]=q(a.style,i)),h=$.cssHooks[c]||$.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=cb(a,c)),"normal"===f&&c in pb&&(f=pb[c]),d||e!==b?(g=parseFloat(f),d||$.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?cb=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h[c],""===d&&!$.contains(b.ownerDocument,b)&&(d=$.style(b,c)),lb.test(d)&&jb.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d}:P.documentElement.currentStyle&&(cb=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;
return null==e&&f&&f[b]&&(e=f[b]),lb.test(e)&&!hb.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),""===e?"auto":e}),$.each(["height","width"],function(a,b){$.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&ib.test(cb(a,"display"))?$.swap(a,ob,function(){return v(a,b,d)}):v(a,b,d):void 0},set:function(a,c,d){return t(a,c,d?u(a,b,d,$.support.boxSizing&&"border-box"===$.css(a,"boxSizing")):0)}}}),$.support.opacity||($.cssHooks.opacity={get:function(a,b){return gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=$.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===$.trim(f.replace(fb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=fb.test(f)?f.replace(fb,e):f+" "+e)}}),$(function(){$.support.reliableMarginRight||($.cssHooks.marginRight={get:function(a,b){return $.swap(a,{display:"inline-block"},function(){return b?cb(a,"marginRight"):void 0})}}),!$.support.pixelPosition&&$.fn.position&&$.each(["top","left"],function(a,b){$.cssHooks[b]={get:function(a,c){if(c){var d=cb(a,b);return lb.test(d)?$(a).position()[b]+"px":d}}}})}),$.expr&&$.expr.filters&&($.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!$.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||cb(a,"display"))},$.expr.filters.visible=function(a){return!$.expr.filters.hidden(a)}),$.each({margin:"",padding:"",border:"Width"},function(a,b){$.cssHooks[a+b]={expand:function(c){var d,e="string"==typeof c?c.split(" "):[c],f={};for(d=0;4>d;d++)f[a+qb[d]+b]=e[d]||e[d-2]||e[0];return f}},jb.test(a)||($.cssHooks[a+b].set=t)});var tb=/%20/g,ub=/\[\]$/,vb=/\r?\n/g,wb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,xb=/^(?:select|textarea)/i;$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?$.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||xb.test(this.nodeName)||wb.test(this.type))}).map(function(a,b){var c=$(this).val();return null==c?null:$.isArray(c)?$.map(c,function(a,c){return{name:b.name,value:a.replace(vb,"\r\n")}}):{name:b.name,value:c.replace(vb,"\r\n")}}).get()}}),$.param=function(a,c){var d,e=[],f=function(a,b){b=$.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=$.ajaxSettings&&$.ajaxSettings.traditional),$.isArray(a)||a.jquery&&!$.isPlainObject(a))$.each(a,function(){f(this.name,this.value)});else for(d in a)x(d,a[d],c,f);return e.join("&").replace(tb,"+")};var yb,zb,Ab=/#.*$/,Bb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Cb=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb=/\?/,Gb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Hb=/([?&])_=[^&]*/,Ib=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Jb=$.fn.load,Kb={},Lb={},Mb=["*/"]+["*"];try{zb=Q.href}catch(Nb){zb=P.createElement("a"),zb.href="",zb=zb.href}yb=Ib.exec(zb.toLowerCase())||[],$.fn.load=function(a,c,d){if("string"!=typeof a&&Jb)return Jb.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),$.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(f="POST"),$.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?$("<div>").append(a.replace(Gb,"")).find(e):a)}),this},$.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){$.fn[b]=function(a){return this.on(b,a)}}),$.each(["get","post"],function(a,c){$[c]=function(a,d,e,f){return $.isFunction(d)&&(f=f||e,e=d,d=b),$.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),$.extend({getScript:function(a,c){return $.get(a,b,c,"script")},getJSON:function(a,b,c){return $.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?A(a,$.ajaxSettings):(b=a,a=$.ajaxSettings),A(a,b),a},ajaxSettings:{url:zb,isLocal:Cb.test(yb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Mb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":$.parseJSON,"text xml":$.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:y(Kb),ajaxTransport:y(Lb),ajax:function(a,c){function d(a,c,d,g){var j,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),h=b,f=g||"",w.readyState=a>0?4:0,d&&(t=B(m,w,d)),a>=200&&300>a||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&($.lastModified[e]=v),v=w.getResponseHeader("Etag"),v&&($.etag[e]=v)),304===a?(x="notmodified",j=!0):(j=C(m,t),x=j.state,l=j.data,s=j.error,j=!s)):(s=x,(!x||a)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,k&&o.trigger("ajax"+(j?"Success":"Error"),[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--$.active||$.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=$.ajaxSetup({},c),n=m.context||m,o=n!==m&&(n.nodeType||n instanceof $)?$(n):$.event,p=$.Deferred(),q=$.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,setRequestHeader:function(a,b){if(!u){var c=a.toLowerCase();a=t[c]=t[c]||a,s[a]=b}return this},getAllResponseHeaders:function(){return 2===u?f:null},getResponseHeader:function(a){var c;if(2===u){if(!g)for(g={};c=Bb.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return u||(m.mimeType=a),this},abort:function(a){return a=a||v,h&&h.abort(a),d(0,a),this}};if(p.promise(w),w.success=w.done,w.error=w.fail,w.complete=q.add,w.statusCode=function(a){if(a){var b;if(2>u)for(b in a)r[b]=[r[b],a[b]];else b=a[w.status],w.always(b)}return this},m.url=((a||m.url)+"").replace(Ab,"").replace(Eb,yb[1]+"//"),m.dataTypes=$.trim(m.dataType||"*").toLowerCase().split(ba),null==m.crossDomain&&(j=Ib.exec(m.url.toLowerCase())||!1,m.crossDomain=j&&j.join(":")+(j[3]?"":"http:"===j[1]?80:443)!==yb.join(":")+(yb[3]?"":"http:"===yb[1]?80:443)),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=$.param(m.data,m.traditional)),z(Kb,m,c,w),2===u)return w;if(k=m.global,m.type=m.type.toUpperCase(),m.hasContent=!Db.test(m.type),k&&0===$.active++&&$.event.trigger("ajaxStart"),!m.hasContent&&(m.data&&(m.url+=(Fb.test(m.url)?"&":"?")+m.data,delete m.data),e=m.url,m.cache===!1)){var x=$.now(),y=m.url.replace(Hb,"$1_="+x);m.url=y+(y===m.url?(Fb.test(m.url)?"&":"?")+"_="+x:"")}(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(e=e||m.url,$.lastModified[e]&&w.setRequestHeader("If-Modified-Since",$.lastModified[e]),$.etag[e]&&w.setRequestHeader("If-None-Match",$.etag[e])),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Mb+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(!m.beforeSend||m.beforeSend.call(n,w,m)!==!1&&2!==u){v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(h=z(Lb,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,h.send(s,d)}catch(A){if(!(2>u))throw A;d(-1,A)}}else d(-1,"No Transport");return w}return w.abort()},active:0,lastModified:{},etag:{}});var Ob=[],Pb=/\?/,Qb=/(=)\?(?=&|$)|\?\?/,Rb=$.now();$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ob.pop()||$.expando+"_"+Rb++;return this[a]=!0,a}}),$.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&Qb.test(j),m=k&&!l&&"string"==typeof i&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qb.test(i);return"jsonp"===c.dataTypes[0]||l||m?(f=c.jsonpCallback=$.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(Qb,"$1"+f):m?c.data=i.replace(Qb,"$1"+f):k&&(c.url+=(Pb.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||$.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Ob.push(f)),h&&$.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0}),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return $.globalEval(a),a}}}),$.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),$.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=P.head||P.getElementsByTagName("head")[0]||P.documentElement;return{send:function(e,f){c=P.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var Sb,Tb=a.ActiveXObject?function(){for(var a in Sb)Sb[a](0,1)}:!1,Ub=0;$.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&D()||E()}:D,function(a){$.extend($.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}($.ajaxSettings.xhr()),$.support.ajax&&$.ajaxTransport(function(c){if(!c.crossDomain||$.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=$.noop,Tb&&delete Sb[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?4===i.readyState?setTimeout(d,0):(g=++Ub,Tb&&(Sb||(Sb={},$(a).unload(Tb)),Sb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var Vb,Wb,Xb=/^(?:toggle|show|hide)$/,Yb=new RegExp("^(?:([-+])=|)("+_+")([a-z%]*)$","i"),Zb=/queueHooks$/,$b=[J],_b={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=Yb.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],d=f[3]||($.cssNumber[a]?"":"px"),"px"!==d&&h){h=$.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,$.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};$.Animation=$.extend(H,{tweener:function(a,b){$.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],_b[c]=_b[c]||[],_b[c].unshift(b)},prefilter:function(a,b){b?$b.unshift(a):$b.push(a)}}),$.Tween=K,K.prototype={constructor:K,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||($.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.options.duration?this.pos=b=$.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}},K.prototype.init.prototype=K.prototype,K.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=$.css(a.elem,a.prop,!1,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){$.fx.step[a.prop]?$.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[$.cssProps[a.prop]]||$.cssHooks[a.prop])?$.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},$.each(["toggle","show","hide"],function(a,b){var c=$.fn[b];$.fn[b]=function(d,e,f){return null==d||"boolean"==typeof d||!a&&$.isFunction(d)&&$.isFunction(e)?c.apply(this,arguments):this.animate(L(b,!0),d,e,f)}}),$.fn.extend({fadeTo:function(a,b,c,d){return this.filter(r).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=$.isEmptyObject(a),f=$.speed(b,c,d),g=function(){var b=H(this,$.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=$.timers,g=$._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Zb.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem===this&&(null==a||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&$.dequeue(this,a)})}}),$.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){$.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),$.speed=function(a,b,c){var d=a&&"object"==typeof a?$.extend({},a):{complete:c||!c&&b||$.isFunction(a)&&a,duration:a,easing:c&&b||b&&!$.isFunction(b)&&b};return d.duration=$.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in $.fx.speeds?$.fx.speeds[d.duration]:$.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){$.isFunction(d.old)&&d.old.call(this),d.queue&&$.dequeue(this,d.queue)},d},$.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},$.timers=[],$.fx=K.prototype.init,$.fx.tick=function(){for(var a,b=$.timers,c=0;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||$.fx.stop()},$.fx.timer=function(a){a()&&$.timers.push(a)&&!Wb&&(Wb=setInterval($.fx.tick,$.fx.interval))},$.fx.interval=13,$.fx.stop=function(){clearInterval(Wb),Wb=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fx.step={},$.expr&&$.expr.filters&&($.expr.filters.animated=function(a){return $.grep($.timers,function(b){return a===b.elem}).length});var ac=/^(?:body|html)$/i;$.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){$.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j={top:0,left:0},k=this[0],l=k&&k.ownerDocument;if(l)return(d=l.body)===k?$.offset.bodyOffset(k):(c=l.documentElement,$.contains(c,k)?("undefined"!=typeof k.getBoundingClientRect&&(j=k.getBoundingClientRect()),e=M(l),f=c.clientTop||d.clientTop||0,g=c.clientLeft||d.clientLeft||0,h=e.pageYOffset||c.scrollTop,i=e.pageXOffset||c.scrollLeft,{top:j.top+h-f,left:j.left+i-g}):j)},$.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return $.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat($.css(a,"marginTop"))||0,c+=parseFloat($.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=$.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=$(a),h=g.offset(),i=$.css(a,"top"),j=$.css(a,"left"),k=("absolute"===d||"fixed"===d)&&$.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),$.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},$.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=this.offset(),d=ac.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat($.css(a,"marginTop"))||0,c.left-=parseFloat($.css(a,"marginLeft"))||0,d.top+=parseFloat($.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat($.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||P.body;a&&!ac.test(a.nodeName)&&"static"===$.css(a,"position");)a=a.offsetParent;return a||P.body})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);$.fn[a]=function(e){return $.access(this,function(a,e,f){var g=M(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?$(g).scrollLeft():f,d?f:$(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),$.each({Height:"height",Width:"width"},function(a,c){$.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){$.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return $.access(this,function(c,d,e){var f;return $.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?$.css(c,d,e,h):$.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=$,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return $})}(window),$.fn.bounce=function(){var a=4,b=2,c=$(this).height();$(this).stop(!0,!0);for(var d=0;a>=d;d++)$(this).animate({"line-height":(d%2===0?c+(a-d)*b:c-(a-d)*b)+"px"},80+5*d)},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function d(b){var c=j(),d=c._rgba=[];return b=b.toLowerCase(),o(i,function(a,e){var f,g=e.re.exec(b),h=g&&e.parse(g),i=e.space||"rgba";return h?(f=c[i](h),c[k[i].cache]=f[k[i].cache],d=c._rgba=f._rgba,!1):void 0}),d.length?("0,0,0,0"===d.join()&&a.extend(d,f.transparent),c):f[b]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&a.inArray(null,l[f].slice(0,3))<0&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):void 0},is:function(a){var b=j(a),c=!0,d=this;return o(k,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],o(e.props,function(a,b){return null!=g[b.idx]?c=g[b.idx]===f[b.idx]:void 0})),c}),c},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(i){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(i){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*(2*Math.PI)/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=e*(.3*1.5)),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*(b*b*(((f*=1.525)+1)*b-f))+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*(7.5625*b*b)+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return e/2>b?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}}),!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&ha(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==ka?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ia.length;){if(c=ia[g],e=c?c+f:b,e in a)return e;g++}return d}function v(){return qa++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new(b=c?c:ta?M:ua?P:sa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Aa&&d-e===0,g=b&(Ca|Da)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=na(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=ma(j.x)>ma(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===Aa||f.eventType===Ca)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Da&&(i>za||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=ma(l.x)>ma(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:la(a.pointers[c].clientX),clientY:la(a.pointers[c].clientY)},c++;return{timeStamp:na(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:la(a[0].clientX),y:la(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:la(c/b),y:la(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ea:ma(a)>=ma(b)?0>a?Fa:Ga:0>b?Ha:Ia}function H(a,b,c){
c||(c=Ma);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Ma);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Na)+I(a[1],a[0],Na)}function K(a,b){return H(b[0],b[1],Na)/H(a[0],a[1],Na)}function L(){this.evEl=Pa,this.evWin=Qa,this.allow=!0,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Ta,this.evWin=Ua,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=Wa,this.evWin=Xa,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ca|Da)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=Za,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Aa|Ba)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Aa)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ca|Da)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a)}function S(a,b){this.manager=a,this.set(b)}function T(a){if(p(a,db))return db;var b=p(a,eb),c=p(a,fb);return b&&c?db:b||c?b?eb:fb:p(a,cb)?cb:bb}function U(a){this.options=ha({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=gb,this.simultaneous={},this.requireFail=[]}function V(a){return a&lb?"cancel":a&jb?"end":a&ib?"move":a&hb?"start":""}function W(a){return a==Ia?"down":a==Ha?"up":a==Fa?"left":a==Ga?"right":""}function X(a,b){var c=b.manager;return c?c.get(a):a}function Y(){U.apply(this,arguments)}function Z(){Y.apply(this,arguments),this.pX=null,this.pY=null}function $(){Y.apply(this,arguments)}function _(){U.apply(this,arguments),this._timer=null,this._input=null}function aa(){Y.apply(this,arguments)}function ba(){Y.apply(this,arguments)}function ca(){U.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function da(a,b){return b=b||{},b.recognizers=l(b.recognizers,da.defaults.preset),new ea(a,b)}function ea(a,b){this.options=ha({},da.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=y(this),this.touchAction=new S(this,this.options.touchAction),fa(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function fa(a,b){var c=a.element;c.style&&g(a.options.cssProps,function(a,d){c.style[u(c.style,d)]=b?a:""})}function ga(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ha,ia=["","webkit","Moz","MS","ms","o"],ja=b.createElement("div"),ka="function",la=Math.round,ma=Math.abs,na=Date.now;ha="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var oa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),pa=h(function(a,b){return oa(a,b,!0)},"merge","Use `assign`."),qa=1,ra=/mobile|tablet|ip(ad|hone|od)|android/i,sa="ontouchstart"in a,ta=u(a,"PointerEvent")!==d,ua=sa&&ra.test(navigator.userAgent),va="touch",wa="pen",xa="mouse",ya="kinect",za=25,Aa=1,Ba=2,Ca=4,Da=8,Ea=1,Fa=2,Ga=4,Ha=8,Ia=16,Ja=Fa|Ga,Ka=Ha|Ia,La=Ja|Ka,Ma=["x","y"],Na=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Oa={mousedown:Aa,mousemove:Ba,mouseup:Ca},Pa="mousedown",Qa="mousemove mouseup";i(L,x,{handler:function(a){var b=Oa[a.type];b&Aa&&0===a.button&&(this.pressed=!0),b&Ba&&1!==a.which&&(b=Ca),this.pressed&&this.allow&&(b&Ca&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:xa,srcEvent:a}))}});var Ra={pointerdown:Aa,pointermove:Ba,pointerup:Ca,pointercancel:Da,pointerout:Da},Sa={2:va,3:wa,4:xa,5:ya},Ta="pointerdown",Ua="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Ta="MSPointerDown",Ua="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Ra[d],f=Sa[a.pointerType]||a.pointerType,g=f==va,h=r(b,a.pointerId,"pointerId");e&Aa&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ca|Da)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Va={touchstart:Aa,touchmove:Ba,touchend:Ca,touchcancel:Da},Wa="touchstart",Xa="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Va[a.type];if(b===Aa&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ca|Da)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:va,srcEvent:a})}}});var Ya={touchstart:Aa,touchmove:Ba,touchend:Ca,touchcancel:Da},Za="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=Ya[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:va,srcEvent:a})}}),i(R,x,{handler:function(a,b,c){var d=c.pointerType==va,e=c.pointerType==xa;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Ca|Da)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var $a=u(ja.style,"touchAction"),_a=$a!==d,ab="compute",bb="auto",cb="manipulation",db="none",eb="pan-x",fb="pan-y";S.prototype={set:function(a){a==ab&&(a=this.compute()),_a&&this.manager.element.style&&(this.manager.element.style[$a]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),T(a.join(" "))},preventDefaults:function(a){if(!_a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=p(d,db),f=p(d,fb),g=p(d,eb);if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}if(!g||!f)return e||f&&c&Ja||g&&c&Ka?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var gb=1,hb=2,ib=4,jb=8,kb=jb,lb=16,mb=32;U.prototype={defaults:{},set:function(a){return ha(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=X(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=X(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=X(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=X(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;jb>d&&b(c.options.event+V(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=jb&&b(c.options.event+V(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=mb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(mb|gb)))return!1;a++}return!0},recognize:function(a){var b=ha({},a);return k(this.options.enable,[this,b])?(this.state&(kb|lb|mb)&&(this.state=gb),this.state=this.process(b),void(this.state&(hb|ib|jb|lb)&&this.tryEmit(b))):(this.reset(),void(this.state=mb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(Y,U,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(hb|ib),e=this.attrTest(a);return d&&(c&Da||!e)?b|lb:d||e?c&Ca?b|jb:b&hb?b|ib:hb:mb}}),i(Z,Y,{defaults:{event:"pan",threshold:10,pointers:1,direction:La},getTouchAction:function(){var a=this.options.direction,b=[];return a&Ja&&b.push(fb),a&Ka&&b.push(eb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Ja?(e=0===f?Ea:0>f?Fa:Ga,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ea:0>g?Ha:Ia,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Y.prototype.attrTest.call(this,a)&&(this.state&hb||!(this.state&hb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=W(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i($,Y,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[db]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&hb)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(_,U,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[bb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ca|Da)&&!f)this.reset();else if(a.eventType&Aa)this.reset(),this._timer=e(function(){this.state=kb,this.tryEmit()},b.time,this);else if(a.eventType&Ca)return kb;return mb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===kb&&(a&&a.eventType&Ca?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=na(),this.manager.emit(this.options.event,this._input)))}}),i(aa,Y,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[db]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&hb)}}),i(ba,Y,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ja|Ka,pointers:1},getTouchAction:function(){return Z.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Ja|Ka)?b=a.overallVelocity:c&Ja?b=a.overallVelocityX:c&Ka&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&ma(b)>this.options.velocity&&a.eventType&Ca},emit:function(a){var b=W(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ca,U,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[cb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Aa&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ca)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=kb,this.tryEmit()},b.interval,this),hb):kb}return mb},failTimeout:function(){return this._timer=e(function(){this.state=mb},this.options.interval,this),mb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==kb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),da.VERSION="2.0.6",da.defaults={domEvents:!1,touchAction:ab,enable:!0,inputTarget:null,inputClass:null,preset:[[aa,{enable:!1}],[$,{enable:!1},["rotate"]],[ba,{direction:Ja}],[Z,{direction:Ja},["swipe"]],[ca],[ca,{event:"doubletap",taps:2},["tap"]],[_]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var nb=1,ob=2;ea.prototype={set:function(a){return ha(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?ob:nb},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&kb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===ob||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(hb|ib|jb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof U)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&ga(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&fa(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ha(da,{INPUT_START:Aa,INPUT_MOVE:Ba,INPUT_END:Ca,INPUT_CANCEL:Da,STATE_POSSIBLE:gb,STATE_BEGAN:hb,STATE_CHANGED:ib,STATE_ENDED:jb,STATE_RECOGNIZED:kb,STATE_CANCELLED:lb,STATE_FAILED:mb,DIRECTION_NONE:Ea,DIRECTION_LEFT:Fa,DIRECTION_RIGHT:Ga,DIRECTION_UP:Ha,DIRECTION_DOWN:Ia,DIRECTION_HORIZONTAL:Ja,DIRECTION_VERTICAL:Ka,DIRECTION_ALL:La,Manager:ea,Input:x,TouchAction:S,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:U,AttrRecognizer:Y,Tap:ca,Pan:Z,Swipe:ba,Pinch:$,Rotate:aa,Press:_,on:m,off:n,each:g,merge:pa,extend:oa,assign:ha,inherit:i,bindFn:j,prefixed:u});var pb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};pb.Hammer=da,"function"==typeof define&&define.amd?define(function(){return da}):"undefined"!=typeof module&&module.exports?module.exports=da:a[c]=da}(window,document,"Hammer"),!function(){var a=window.MutationObserver||window.WebKitMutationObserver,b="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,c=void 0!==document.documentElement.style["touch-action"]||document.documentElement.style["-ms-touch-action"];if(!c&&b&&a){window.Hammer=window.Hammer||{};var d=/touch-action[:][\s]*(none)[^;'"]*/,e=/touch-action[:][\s]*(manipulation)[^;'"]*/,f=/touch-action/,g=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,h=function(){try{var a=document.createElement("canvas");return!(!window.WebGLRenderingContext||!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(b){return!1}}(),i=h&&g;window.Hammer.time={getTouchAction:function(a){return this.checkStyleString(a.getAttribute("style"))},checkStyleString:function(a){return f.test(a)?d.test(a)?"none":e.test(a)?"manipulation":!0:void 0},shouldHammer:function(a){var b=this.hasParent(a.target);return b&&(!i||Date.now()-a.target.lastStart<125)?b:!1},touchHandler:function(a){var b=a.target.getBoundingClientRect(),c=b.top!==this.pos.top||b.left!==this.pos.left,d=this.shouldHammer(a);("none"===d||c===!1&&"manipulation"===d)&&("touchend"===a.type&&(a.target.focus(),setTimeout(function(){a.target.click()},0)),a.preventDefault()),this.scrolled=!1,delete a.target.lastStart},touchStart:function(a){this.pos=a.target.getBoundingClientRect(),i&&this.hasParent(a.target)&&(a.target.lastStart=Date.now())},styleWatcher:function(a){a.forEach(this.styleUpdater,this)},styleUpdater:function(a){if(a.target.updateNext)return void(a.target.updateNext=!1);var b=this.getTouchAction(a.target);return b?void("none"!==b&&(a.target.hadTouchNone=!1)):void(!b&&(a.oldValue&&this.checkStyleString(a.oldValue)||a.target.hadTouchNone)&&(a.target.hadTouchNone=!0,a.target.updateNext=!1,a.target.setAttribute("style",a.target.getAttribute("style")+" touch-action: none;")))},hasParent:function(a){for(var b,c=a;c&&c.parentNode;c=c.parentNode)if(b=this.getTouchAction(c))return b;return!1},installStartEvents:function(){document.addEventListener("touchstart",this.touchStart.bind(this)),document.addEventListener("mousedown",this.touchStart.bind(this))},installEndEvents:function(){document.addEventListener("touchend",this.touchHandler.bind(this),!0),document.addEventListener("mouseup",this.touchHandler.bind(this),!0)},installObserver:function(){this.observer=new a(this.styleWatcher.bind(this)).observe(document,{subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})},install:function(){this.installEndEvents(),this.installStartEvents(),this.installObserver()}},window.Hammer.time.install()}}(),this.createjs=this.createjs||{},function(){var a=function(){this.init()};a.prototype={};var b=a.prototype;b.loaded=!1,b.canceled=!1,b.progress=0,b._item=null,b.onProgress=null,b.onLoadStart=null,b.onFileLoad=null,b.onFileProgress=null,b.onComplete=null,b.onError=null,b.getItem=function(){return this._item},b.init=function(){},b.load=function(){},b.cancel=function(){},b._sendLoadStart=function(){!this._isCanceled()&&this.onLoadStart&&this.onLoadStart({target:this})},b._sendProgress=function(a){if(!this._isCanceled()){var b;a instanceof Number?(this.progress=a,b={loaded:this.progress,total:1}):(b=a,this.progress=a.loaded/a.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),b.target=this,this.onProgress&&this.onProgress(b)}},b._sendFileProgress=function(a){this._isCanceled()?this._cleanUp():this.onFileProgress&&(a.target=this,this.onFileProgress(a))},b._sendComplete=function(){!this._isCanceled()&&this.onComplete&&this.onComplete({target:this})},b._sendFileComplete=function(a){!this._isCanceled()&&this.onFileLoad&&(a.target=this,this.onFileLoad(a))},b._sendError=function(a){!this._isCanceled()&&this.onError&&(null==a&&(a={}),a.target=this,this.onError(a))},b._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},b.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype=new createjs.AbstractLoader;a.IMAGE="image",a.SVG="svg",a.SOUND="sound",a.JSON="json",a.JAVASCRIPT="javascript",a.CSS="css",a.XML="xml",a.TEXT="text",a.TIMEOUT_TIME=8e3,b.useXHR=!0,b.stopOnError=!1,b.maintainScriptOrder=!0,b.next=null,b.typeHandlers=null,b.extensionHandlers=null,b._loadStartWasDispatched=!1,b._maxConnections=1,b._currentLoads=null,b._loadQueue=null,b._loadedItemsById=null,b._loadedItemsBySrc=null,b._targetProgress=0,b._numItems=0,b._numItemsLoaded=null,b._scriptOrder=null,b._loadedScripts=null,b.TAG_LOAD_OGGS=!0,b.initialize=function(a){this._targetProgress=this._numItemsLoaded=this._numItems=0,this._paused=!1,this._currentLoads=[],this._loadQueue=[],this._scriptOrder=[],this._loadedScripts=[],this._loadedItemsById={},this._loadedItemsBySrc={},this.typeHandlers={},this.extensionHandlers={},this._loadStartWasDispatched=!1,this.useXHR=0!=a&&null!=window.XMLHttpRequest,this.determineCapabilities()},b.determineCapabilities=function(){var a=createjs.PreloadJS.BrowserDetect;null!=a&&(createjs.PreloadJS.TAG_LOAD_OGGS=a.isFirefox||a.isOpera)},a.isBinary=function(a){switch(a){case createjs.PreloadJS.IMAGE:case createjs.PreloadJS.SOUND:return!0;default:return!1}},b.installPlugin=function(a){if(null!=a&&null!=a.getPreloadHandlers){if(a=a.getPreloadHandlers(),null!=a.types)for(var b=0,c=a.types.length;c>b;b++)this.typeHandlers[a.types[b]]=a.callback;if(null!=a.extensions)for(b=0,c=a.extensions.length;c>b;b++)this.extensionHandlers[a.extensions[b]]=a.callback}},b.setMaxConnections=function(a){this._maxConnections=a,this._paused||this._loadNext()},b.loadFile=function(a,b){null==a?this._sendError({text:"File is null."}):(this._addItem(a),b!==!1&&this.setPaused(!1))},b.loadManifest=function(a,b){var c;if(a instanceof Array){if(0==a.length)return void this._sendError({text:"Manifest is empty."});c=a}else{if(null==a)return void this._sendError({text:"Manifest is null."});c=[a]}for(var d=0,e=c.length;e>d;d++)this._addItem(c[d],!1);b!==!1&&this._loadNext()},b.load=function(){this.setPaused(!1)},b.getResult=function(a){return this._loadedItemsById[a]||this._loadedItemsBySrc[a]},b.setPaused=function(a){(this._paused=a)||this._loadNext()},b.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0},b._addItem=function(a){a=this._createLoadItem(a),null!=a&&(this._loadQueue.push(a),this._numItems++,this._updateProgress(),a.getItem().type==createjs.PreloadJS.JAVASCRIPT&&(this._scriptOrder.push(a.getItem()),this._loadedScripts.push(null)))},b._loadNext=function(){if(!this._paused)for(this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded&&(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load.apply(this.next));this._loadQueue.length&&this._currentLoads.length<this._maxConnections;)this._loadItem(this._loadQueue.shift())},b._loadItem=function(a){a.onProgress=createjs.PreloadJS.proxy(this._handleProgress,this),a.onComplete=createjs.PreloadJS.proxy(this._handleFileComplete,this),a.onError=createjs.PreloadJS.proxy(this._handleFileError,this),this._currentLoads.push(a),a.load()},b._handleFileError=function(a){var a=a.target,b=this._createResultData(a.getItem());this._numItemsLoaded++,this._updateProgress(),this._sendError(b),this.stopOnError||(this._removeLoadItem(a),this._loadNext())},b._createResultData=function(a){var b={id:a.id,result:null,data:a.data,type:a.type,src:a.src};return this._loadedItemsById[a.id]=b,this._loadedItemsBySrc[a.src]=b},b._handleFileComplete=function(a){var a=a.target,b=a.getItem(),c=this._createResultData(b);switch(this._removeLoadItem(a),c.result=a instanceof createjs.XHRLoader?this._createResult(b,a.getResult()):b.tag,b.type){case createjs.PreloadJS.IMAGE:if(a instanceof createjs.XHRLoader){var d=this;return void(c.result.onload=function(){d._handleFileTagComplete(b,c)})}break;case createjs.PreloadJS.JAVASCRIPT:if(this.maintainScriptOrder)return this._loadedScripts[this._scriptOrder.indexOf(b)]=b,void this._checkScriptLoadOrder(a)}this._handleFileTagComplete(b,c)},b._checkScriptLoadOrder=function(){for(var a=this._loadedScripts.length,b=0;a>b;b++){var c=this._loadedScripts[b];if(null===c)break;if(c!==!0){var d=this.getResult(c.src),c=this.getResult(c.id);c.result=d.result,this._handleFileTagComplete(d,c),this._loadedScripts[b]=!0,b--,a--}}},b._handleFileTagComplete=function(a,b){this._numItemsLoaded++,a.completeHandler&&a.completeHandler(b),this._updateProgress(),this._sendFileComplete(b),this._loadNext()},b._removeLoadItem=function(a){for(var b=this._currentLoads.length,c=0;b>c;c++)if(this._currentLoads[c]==a){this._currentLoads.splice(c,1);break}},b._createResult=function(a,b){var c,d=null;switch(a.type){case createjs.PreloadJS.IMAGE:d=this._createImage();break;case createjs.PreloadJS.SOUND:d=a.tag||this._createAudio();break;case createjs.PreloadJS.CSS:d=this._createLink();break;case createjs.PreloadJS.JAVASCRIPT:d=this._createScript();break;case createjs.PreloadJS.SVG:var d=this._createSVG(),e=this._createXML(b,"image/svg+xml");d.appendChild(e);break;case createjs.PreloadJS.XML:c=this._createXML(b,"text/xml");break;case createjs.PreloadJS.JSON:case createjs.PreloadJS.TEXT:c=b}return d?(a.type==createjs.PreloadJS.CSS?d.href=a.src:a.type!=createjs.PreloadJS.SVG&&(d.src=a.src),d):c},b._createXML=function(a,b){var c;return window.DOMParser?(c=new DOMParser,c=c.parseFromString(a,b)):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(a)),c},b._handleProgress=function(a){var a=a.target,b=this._createResultData(a.getItem());b.progress=a.progress,this._sendFileProgress(b),this._updateProgress()},b._updateProgress=function(){var a=this._numItemsLoaded/this._numItems,b=this._numItems-this._numItemsLoaded;if(b>0){for(var c=0,d=0,e=this._currentLoads.length;e>d;d++)c+=this._currentLoads[d].progress;a+=c/b*(b/this._numItems)}this._sendProgress({loaded:a,total:1})},b._createLoadItem=function(a){var b={};switch(typeof a){case"string":b.src=a;break;case"object":a instanceof HTMLAudioElement?(b.tag=a,b.src=b.tag.src,b.type=createjs.PreloadJS.SOUND):b=a}if(b.ext=this._getNameAfter(b.src,"."),b.type||(b.type=this.getType(b.ext)),(null==b.id||""==b.id)&&(b.id=b.src),a=this.typeHandlers[b.type]||this.extensionHandlers[b.ext]){if(a=a(b.src,b.type,b.id,b.data),a===!1)return null;a!==!0&&(null!=a.src&&(b.src=a.src),null!=a.id&&(b.id=a.id),null!=a.tag&&a.tag.load instanceof Function&&(b.tag=a.tag)),b.ext=this._getNameAfter(b.src,".")}switch(a=this.useXHR,b.type){case createjs.PreloadJS.JSON:case createjs.PreloadJS.XML:case createjs.PreloadJS.TEXT:a=!0;break;case createjs.PreloadJS.SOUND:"ogg"==b.ext&&createjs.PreloadJS.TAG_LOAD_OGGS&&(a=!1)}return 1!=this.useXHR||b.type!=createjs.PreloadJS.IMAGE&&b.type!=createjs.PreloadJS.SVG?a?new createjs.XHRLoader(b):b.tag?new createjs.TagLoader(b):this._createTagItem(b):(b=this._createTagItem(b),b.useXHR=!0,b)},b._createTagItem=function(a){var b,c="src",d=!1;switch(a.type){case createjs.PreloadJS.IMAGE:b=this._createImage();break;case createjs.PreloadJS.SOUND:b=this._createAudio();break;case createjs.PreloadJS.CSS:c="href",d=!0,b=this._createLink();break;case createjs.PreloadJS.JAVASCRIPT:d=!0,b=this._createScript();break;case createjs.PreloadJS.SVG:c="data",b=this._createSVG()}return a.tag=b,new createjs.TagLoader(a,c,d)},b.getType=function(a){switch(a){case"jpeg":case"jpg":case"gif":case"png":return createjs.PreloadJS.IMAGE;case"ogg":case"mp3":case"wav":return createjs.PreloadJS.SOUND;case"json":return createjs.PreloadJS.JSON;case"xml":return createjs.PreloadJS.XML;case"css":return createjs.PreloadJS.CSS;case"js":return createjs.PreloadJS.JAVASCRIPT;case"svg":return createjs.PreloadJS.SVG;default:return createjs.PreloadJS.TEXT}},b._getNameAfter=function(a,b){var c=a.lastIndexOf(b),c=a.substr(c+1),d=c.lastIndexOf(/[\b|\?|\#|\s]/);return-1==d?c:c.substr(0,d)},b._createImage=function(){return document.createElement("img")},b._createSVG=function(){var a=document.createElement("object");return a.type="image/svg+xml",a},b._createAudio=function(){var a=document.createElement("audio");return a.autoplay=!1,a.type="audio/ogg",a},b._createScript=function(){var a=document.createElement("script");return a.type="text/javascript",a},b._createLink=function(){var a=document.createElement("link");return a.type="text/css",a.rel="stylesheet",a},b.toString=function(){return"[PreloadJS]"},a.proxy=function(a,b){return function(c){return a.apply(b,arguments)}},createjs.PreloadJS=a;var c=function(){};c.init=function(){var a=navigator.userAgent;c.isFirefox=a.indexOf("Firefox")>-1,c.isOpera=null!=window.opera,c.isIOS=a.indexOf("iPod")>-1||a.indexOf("iPhone")>-1||a.indexOf("iPad")>-1},c.init(),createjs.PreloadJS.BrowserDetect=c}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c){this.init(a,b,c)},b=a.prototype=new createjs.AbstractLoader;b._srcAttr=null,b._loadTimeOutTimeout=null,b.tagCompleteProxy=null,b.init=function(a,b,c){this._item=a,this._srcAttr=b||"src",this.useXHR=1==c,this.isAudio=a.tag instanceof HTMLAudioElement,this.tagCompleteProxy=createjs.PreloadJS.proxy(this._handleTagLoad,this)},b.cancel=function(){this.canceled=!0,this._clean();var a=this.getItem();null!=a&&(a.src=null)},b.load=function(){this.useXHR?this.loadXHR():this.loadTag()},b.loadXHR=function(){var a=this.getItem(),a=new createjs.XHRLoader(a);a.onProgress=createjs.PreloadJS.proxy(this._handleProgress,this),a.onFileLoad=createjs.PreloadJS.proxy(this._handleXHRComplete,this),a.onComplete=createjs.PreloadJS.proxy(this._handleXHRComplete,this),a.onError=createjs.PreloadJS.proxy(this._handleLoadError,this),a.load()},b._handleXHRComplete=function(a){if(!this._isCanceled()){this._clean(),a.target.onFileLoad=null,a.target.onComplete=null;var b=a.target.getItem();a.target.getResult(),b.type==createjs.PreloadJS.IMAGE?(b.tag.onload=createjs.PreloadJS.proxy(this._sendComplete,this),b.tag.src=b.src):(b.tag[this._srcAttr]=b.src,this._sendComplete())}},b._handleLoadError=function(a){a.error&&101==a.error.code?this.loadTag():(this._clean(),this._sendError(a))},b.loadTag=function(){var a=this.getItem(),b=a.tag;clearTimeout(this._loadTimeOutTimeout),this._loadTimeOutTimeout=setTimeout(createjs.PreloadJS.proxy(this._handleLoadTimeOut,this),createjs.PreloadJS.TIMEOUT_TIME),this.isAudio&&(b.src=null,b.preload="auto",b.setAttribute("data-temp","true")),b.onerror=createjs.PreloadJS.proxy(this._handleLoadError,this),b.onprogress=createjs.PreloadJS.proxy(this._handleProgress,this),this.isAudio?(b.onstalled=createjs.PreloadJS.proxy(this._handleStalled,this),b.addEventListener("canplaythrough",this.tagCompleteProxy,!1)):b.onload=createjs.PreloadJS.proxy(this._handleTagLoad,this),b[this._srcAttr]=a.src,a.type==createjs.PreloadJS.SVG&&document.getElementsByTagName("body")[0].appendChild(b),a=a.type==createjs.PreloadJS.SOUND&&"ogg"==a.ext&&createjs.PreloadJS.BrowserDetect.isFirefox,null!=b.load&&!a&&b.load()},b._handleLoadTimeOut=function(){this._clean(),this._sendError()},b._handleStalled=function(){},b._handleLoadError=function(){this._clean(),this._sendError()},b._handleTagLoad=function(){if(!this._isCanceled()){var a=this.getItem().tag;clearTimeout(this._loadTimeOutTimeout),this.loaded||this.isAudio&&4!==a.readyState||(this.getItem().type==createjs.PreloadJS.SVG&&document.getElementsByTagName("body")[0].removeChild(a),this.loaded=!0,this._clean(),this._sendComplete())}},b._clean=function(){clearTimeout(this._loadTimeOutTimeout);var a=this.getItem().tag;a.onload=null,a.removeEventListener&&a.removeEventListener("canplaythrough",this.tagCompleteProxy,!1),a.onstalled=null,a.onprogress=null,a.onerror=null},b._handleProgress=function(a){if(clearTimeout(this._loadTimeOutTimeout),this.isAudio){if(a=this.getItem(),null==a.buffered)return;a={loaded:a.buffered.length>0?a.buffered.end(0):0,total:a.duration}}this._sendProgress(a)},b.toString=function(){return"[PreloadJS TagLoader]"},createjs.TagLoader=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.init(a)},b=a.prototype=new createjs.AbstractLoader;b._wasLoaded=!1,b._request=null,b._loadTimeOutTimeout=null,b._xhrLevel=null,b.init=function(a){this._item=a,this._createXHR(a)},b.getResult=function(){try{return this._request.responseText}catch(a){}return this._request.response},b.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},b.load=function(){if(null==this._request)this.handleError();else{1==this._xhrLevel&&(this._loadTimeOutTimeout=setTimeout(createjs.PreloadJS.proxy(this.handleTimeout,this),createjs.PreloadJS.TIMEOUT_TIME)),
this._request.onloadstart=createjs.PreloadJS.proxy(this.handleLoadStart,this),this._request.onprogress=createjs.PreloadJS.proxy(this.handleProgress,this),this._request.onabort=createjs.PreloadJS.proxy(this.handleAbort,this),this._request.onerror=createjs.PreloadJS.proxy(this.handleError,this),this._request.ontimeout=createjs.PreloadJS.proxy(this.handleTimeout,this),this._request.onload=createjs.PreloadJS.proxy(this.handleLoad,this),this._request.onreadystatechange=createjs.PreloadJS.proxy(this.handleReadyStateChange,this);try{this._request.send()}catch(a){this._sendError({source:a})}}},b.handleProgress=function(a){a.loaded>0&&0==a.total||this._sendProgress({loaded:a.loaded,total:a.total})},b.handleLoadStart=function(){clearTimeout(this._loadTimeOutTimeout),this._sendLoadStart()},b.handleAbort=function(){this._clean(),this._sendError()},b.handleError=function(){this._clean(),this._sendError()},b.handleReadyStateChange=function(){4==this._request.readyState&&this.handleLoad()},b._checkError=function(){switch(parseInt(this._request.status)){case 404:case 0:return!1}return this._hasResponse()||this._hasTextResponse()||this._hasXMLResponse()},b._hasResponse=function(){return null!=this._request.response},b._hasTextResponse=function(){try{return null!=this._request.responseText}catch(a){return!1}},b._hasXMLResponse=function(){try{return null!=this._request.responseXML}catch(a){return!1}},b.handleLoad=function(){this.loaded||(this.loaded=!0,this._checkError()?(this._clean(),this._sendComplete()):this.handleError())},b.handleTimeout=function(){this._clean(),this._sendError()},b._createXHR=function(a){if(this._xhrLevel=1,window.ArrayBuffer&&(this._xhrLevel=2),window.XMLHttpRequest)this._request=new XMLHttpRequest;else try{this._request=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){return null}return a.type==createjs.PreloadJS.TEXT&&this._request.overrideMimeType&&this._request.overrideMimeType("text/plain; charset=x-user-defined"),this._request.open("GET",a.src,!0),createjs.PreloadJS.isBinary(a.type)&&(this._request.responseType="arraybuffer"),!0},b._clean=function(){clearTimeout(this._loadTimeOutTimeout);var a=this._request;a.onloadstart=null,a.onprogress=null,a.onabort=null,a.onerror=null,a.onload=null,a.ontimeout=null,a.onloadend=null,a.onreadystatechange=null,clearInterval(this._checkLoadInterval)},b.toString=function(){return"[PreloadJS XHRLoader]"},createjs.XHRLoader=a}(),this.createjs=this.createjs||{},function(){var a=function(){throw"UID cannot be instantiated"};a._nextID=0,a.get=function(){return a._nextID++},createjs.UID=a}(),this.createjs=this.createjs||{},function(){var a=function(){throw"Ticker cannot be instantiated."};a.useRAF=null,a._listeners=null,a._pauseable=null,a._paused=!1,a._inited=!1,a._startTime=0,a._pausedTime=0,a._ticks=0,a._pausedTicks=0,a._interval=50,a._lastTime=0,a._times=null,a._tickTimes=null,a._rafActive=!1,a._timeoutID=null,a.addListener=function(b,c){null!=b&&(a._inited||a.init(),a.removeListener(b),a._pauseable[a._listeners.length]=null==c?!0:c,a._listeners.push(b))},a.init=function(){a._inited=!0,a._times=[],a._tickTimes=[],a._pauseable=[],a._listeners=[],a._times.push(a._lastTime=a._startTime=a._getTime()),a.setInterval(a._interval)},a.removeListener=function(b){var c=a._listeners;c&&(b=c.indexOf(b),-1!=b&&(c.splice(b,1),a._pauseable.splice(b,1)))},a.removeAllListeners=function(){a._listeners=[],a._pauseable=[]},a.setInterval=function(b){a._interval=b,a._inited&&a._setupTick()},a.getInterval=function(){return a._interval},a.setFPS=function(b){a.setInterval(1e3/b)},a.getFPS=function(){return 1e3/a._interval},a.getMeasuredFPS=function(b){return a._times.length<2?-1:(null==b&&(b=0|a.getFPS()),b=Math.min(a._times.length-1,b),1e3/((a._times[0]-a._times[b])/b))},a.setPaused=function(b){a._paused=b},a.getPaused=function(){return a._paused},a.getTime=function(b){return a._getTime()-a._startTime-(b?a._pausedTime:0)},a.getTicks=function(b){return a._ticks-(b?a._pausedTicks:0)},a._handleAF=function(){a._rafActive=!1,a._setupTick(),a._getTime()-a._lastTime>=.97*(a._interval-1)&&a._tick()},a._handleTimeout=function(){a.timeoutID=null,a._setupTick(),a._tick()},a._setupTick=function(){if(!a._rafActive&&null==a.timeoutID){if(a.useRAF){var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(b)return b(a._handleAF),void(a._rafActive=!0)}a.timeoutID=setTimeout(a._handleTimeout,a._interval)}},a._tick=function(){var b=a._getTime();a._ticks++;var c=b-a._lastTime,d=a._paused;d&&(a._pausedTicks++,a._pausedTime+=c),a._lastTime=b;for(var e=a._pauseable,f=a._listeners.slice(),g=f?f.length:0,h=0;g>h;h++){var i=f[h];null==i||d&&e[h]||(i.tick?i.tick(c,d):i instanceof Function&&i(c,d))}for(a._tickTimes.unshift(a._getTime()-b);a._tickTimes.length>100;)a._tickTimes.pop();for(a._times.unshift(b);a._times.length>100;)a._times.pop()};var b=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);a._getTime=function(){return b&&b.call(performance)||(new Date).getTime()},createjs.Ticker=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c,d,e,f,g,h,i){this.initialize(a,b,c,d,e,f,g,h,i)},b=a.prototype;b.stageX=0,b.stageY=0,b.rawX=0,b.rawY=0,b.type=null,b.nativeEvent=null,b.onMouseMove=null,b.onMouseUp=null,b.target=null,b.pointerID=0,b.primary=!1,b.initialize=function(a,b,c,d,e,f,g,h,i){this.type=a,this.stageX=b,this.stageY=c,this.target=d,this.nativeEvent=e,this.pointerID=f,this.primary=g,this.rawX=null==h?b:h,this.rawY=null==i?c:i},b.clone=function(){return new a(this.type,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},b.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c,d,e,f){this.initialize(a,b,c,d,e,f)},b=a.prototype;a.identity=null,a.DEG_TO_RAD=Math.PI/180,b.a=1,b.b=0,b.c=0,b.d=1,b.tx=0,b.ty=0,b.alpha=1,b.shadow=null,b.compositeOperation=null,b.initialize=function(a,b,c,d,e,f){return null!=a&&(this.a=a),this.b=b||0,this.c=c||0,null!=d&&(this.d=d),this.tx=e||0,this.ty=f||0,this},b.prepend=function(a,b,c,d,e,f){var g=this.tx;if(1!=a||0!=b||0!=c||1!=d){var h=this.a,i=this.c;this.a=h*a+this.b*c,this.b=h*b+this.b*d,this.c=i*a+this.d*c,this.d=i*b+this.d*d}return this.tx=g*a+this.ty*c+e,this.ty=g*b+this.ty*d+f,this},b.append=function(a,b,c,d,e,f){var g=this.a,h=this.b,i=this.c,j=this.d;return this.a=a*g+b*i,this.b=a*h+b*j,this.c=c*g+d*i,this.d=c*h+d*j,this.tx=e*g+f*i+this.tx,this.ty=e*h+f*j+this.ty,this},b.prependMatrix=function(a){return this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty),this.prependProperties(a.alpha,a.shadow,a.compositeOperation),this},b.appendMatrix=function(a){return this.append(a.a,a.b,a.c,a.d,a.tx,a.ty),this.appendProperties(a.alpha,a.shadow,a.compositeOperation),this},b.prependTransform=function(b,c,d,e,f,g,h,i,j){if(f%360)var k=f*a.DEG_TO_RAD,f=Math.cos(k),k=Math.sin(k);else f=1,k=0;return(i||j)&&(this.tx-=i,this.ty-=j),g||h?(g*=a.DEG_TO_RAD,h*=a.DEG_TO_RAD,this.prepend(f*d,k*d,-k*e,f*e,0,0),this.prepend(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),b,c)):this.prepend(f*d,k*d,-k*e,f*e,b,c),this},b.appendTransform=function(b,c,d,e,f,g,h,i,j){if(f%360)var k=f*a.DEG_TO_RAD,f=Math.cos(k),k=Math.sin(k);else f=1,k=0;return g||h?(g*=a.DEG_TO_RAD,h*=a.DEG_TO_RAD,this.append(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),b,c),this.append(f*d,k*d,-k*e,f*e,0,0)):this.append(f*d,k*d,-k*e,f*e,b,c),(i||j)&&(this.tx-=i*this.a+j*this.c,this.ty-=i*this.b+j*this.d),this},b.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.a,d=this.c,e=this.tx;return this.a=c*b-this.b*a,this.b=c*a+this.b*b,this.c=d*b-this.d*a,this.d=d*a+this.d*b,this.tx=e*b-this.ty*a,this.ty=e*a+this.ty*b,this},b.skew=function(b,c){return b*=a.DEG_TO_RAD,c*=a.DEG_TO_RAD,this.append(Math.cos(c),Math.sin(c),-Math.sin(b),Math.cos(b),0,0),this},b.scale=function(a,b){return this.a*=a,this.d*=b,this.tx*=a,this.ty*=b,this},b.translate=function(a,b){return this.tx+=a,this.ty+=b,this},b.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},b.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},b.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d},b.decompose=function(b){null==b&&(b={}),b.x=this.tx,b.y=this.ty,b.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),b.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var c=Math.atan2(-this.c,this.d),d=Math.atan2(this.b,this.a);return c==d?(b.rotation=d/a.DEG_TO_RAD,this.a<0&&this.d>=0&&(b.rotation+=b.rotation<=0?180:-180),b.skewX=b.skewY=0):(b.skewX=c/a.DEG_TO_RAD,b.skewY=d/a.DEG_TO_RAD),b},b.reinitialize=function(a,b,c,d,e,f,g,h,i){return this.initialize(a,b,c,d,e,f),this.alpha=g||1,this.shadow=h,this.compositeOperation=i,this},b.appendProperties=function(a,b,c){return this.alpha*=a,this.shadow=b||this.shadow,this.compositeOperation=c||this.compositeOperation,this},b.prependProperties=function(a,b,c){return this.alpha*=a,this.shadow=this.shadow||b,this.compositeOperation=this.compositeOperation||c,this},b.clone=function(){var b=new a(this.a,this.b,this.c,this.d,this.tx,this.ty);return b.shadow=this.shadow,b.alpha=this.alpha,b.compositeOperation=this.compositeOperation,b},b.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},a.identity=new a(1,0,0,1,0,0),createjs.Matrix2D=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b){this.initialize(a,b)},b=a.prototype;b.x=0,b.y=0,b.initialize=function(a,b){this.x=null==a?0:a,this.y=null==b?0:b},b.clone=function(){return new a(this.x,this.y)},b.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c,d){this.initialize(a,b,c,d)},b=a.prototype;b.x=0,b.y=0,b.width=0,b.height=0,b.initialize=function(a,b,c,d){this.x=null==a?0:a,this.y=null==b?0:b,this.width=null==c?0:c,this.height=null==d?0:d},b.clone=function(){return new a(this.x,this.y,this.width,this.height)},b.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c,d){this.initialize(a,b,c,d)},b=a.prototype;a.identity=null,b.color=null,b.offsetX=0,b.offsetY=0,b.blur=0,b.initialize=function(a,b,c,d){this.color=a,this.offsetX=b,this.offsetY=c,this.blur=d},b.toString=function(){return"[Shadow]"},b.clone=function(){return new a(this.color,this.offsetX,this.offsetY,this.blur)},a.identity=new a("transparent",0,0,0),createjs.Shadow=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype;b.complete=!0,b.onComplete=null,b._animations=null,b._frames=null,b._images=null,b._data=null,b._loadCount=0,b._frameHeight=0,b._frameWidth=0,b._numFrames=0,b._regX=0,b._regY=0,b.initialize=function(a){var b,c,d;if(null!=a){if(a.images&&(c=a.images.length)>0)for(d=this._images=[],b=0;c>b;b++){var e=a.images[b];if("string"==typeof e){var f=e,e=new Image;e.src=f}d.push(e),e.getContext||e.complete||(this._loadCount++,this.complete=!1,function(a){e.onload=function(){a._handleImageLoad()}}(this))}if(null!=a.frames)if(a.frames instanceof Array)for(this._frames=[],d=a.frames,b=0,c=d.length;c>b;b++)f=d[b],this._frames.push({image:this._images[f[4]?f[4]:0],rect:new createjs.Rectangle(f[0],f[1],f[2],f[3]),regX:f[5]||0,regY:f[6]||0});else c=a.frames,this._frameWidth=c.width,this._frameHeight=c.height,this._regX=c.regX||0,this._regY=c.regY||0,this._numFrames=c.count,0==this._loadCount&&this._calculateFrames();if(null!=(c=a.animations)){this._animations=[],this._data={};for(var g in c){if(a={name:g},f=c[g],isNaN(f))if(f instanceof Array)for(a.frequency=f[3],a.next=f[2],d=a.frames=[],b=f[0];b<=f[1];b++)d.push(b);else a.frequency=f.frequency,a.next=f.next,b=f.frames,d=a.frames=isNaN(b)?b.slice(0):[b];else d=a.frames=[f];a.next=d.length<2||0==a.next?null:null==a.next||1==a.next?g:a.next,a.frequency||(a.frequency=1),this._animations.push(g),this._data[g]=a}}}},b.getNumFrames=function(a){return null==a?this._frames?this._frames.length:this._numFrames:(a=this._data[a],null==a?0:a.frames.length)},b.getAnimations=function(){return this._animations.slice(0)},b.getAnimation=function(a){return this._data[a]},b.getFrame=function(a){return this.complete&&this._frames&&(frame=this._frames[a])?frame:null},b.toString=function(){return"[SpriteSheet]"},b.clone=function(){var b=new a;return b.complete=this.complete,b._animations=this._animations,b._frames=this._frames,b._images=this._images,b._data=this._data,b._frameHeight=this._frameHeight,b._frameWidth=this._frameWidth,b._numFrames=this._numFrames,b._loadCount=this._loadCount,b},b._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.onComplete&&this.onComplete())},b._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];for(var a=0,b=this._frameWidth,c=this._frameHeight,d=0,e=this._images;d<e.length;d++){for(var f=e[d],g=(f.width+1)/b|0,h=(f.height+1)/c|0,h=this._numFrames>0?Math.min(this._numFrames-a,g*h):g*h,i=0;h>i;i++)this._frames.push({image:f,rect:new createjs.Rectangle(i%g*b,(i/g|0)*c,b,c),regX:this._regX,regY:this._regY});a+=h}this._numFrames=a}},createjs.SpriteSheet=a}(),this.createjs=this.createjs||{},function(){function a(a,b,c){this.f=a,this.params=b,this.path=null==c?!0:c}a.prototype.exec=function(a){this.f.apply(a,this.params)};var b=function(){this.initialize()},c=b.prototype;b.getRGB=function(a,b,c,d){return null!=a&&null==c&&(d=b,c=255&a,b=a>>8&255,a=a>>16&255),null==d?"rgb("+a+","+b+","+c+")":"rgba("+a+","+b+","+c+","+d+")"},b.getHSL=function(a,b,c,d){return null==d?"hsl("+a%360+","+b+"%,"+c+"%)":"hsla("+a%360+","+b+"%,"+c+"%,"+d+")"},b.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},b.STROKE_CAPS_MAP=["butt","round","square"],b.STROKE_JOINTS_MAP=["miter","round","bevel"],b._ctx=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),b.beginCmd=new a(b._ctx.beginPath,[],!1),b.fillCmd=new a(b._ctx.fill,[],!1),b.strokeCmd=new a(b._ctx.stroke,[],!1),c._strokeInstructions=null,c._strokeStyleInstructions=null,c._fillInstructions=null,c._instructions=null,c._oldInstructions=null,c._activeInstructions=null,c._active=!1,c._dirty=!1,c.initialize=function(){this.clear(),this._ctx=b._ctx},c.draw=function(a){this._dirty&&this._updateInstructions();for(var b=this._instructions,c=0,d=b.length;d>c;c++)b[c].exec(a)},c.drawAsPath=function(a){this._dirty&&this._updateInstructions();for(var b,c=this._instructions,d=0,e=c.length;e>d;d++)((b=c[d]).path||0==d)&&b.exec(a)},c.moveTo=function(b,c){return this._activeInstructions.push(new a(this._ctx.moveTo,[b,c])),this},c.lineTo=function(b,c){return this._dirty=this._active=!0,this._activeInstructions.push(new a(this._ctx.lineTo,[b,c])),this},c.arcTo=function(b,c,d,e,f){return this._dirty=this._active=!0,this._activeInstructions.push(new a(this._ctx.arcTo,[b,c,d,e,f])),this},c.arc=function(b,c,d,e,f,g){return this._dirty=this._active=!0,null==g&&(g=!1),this._activeInstructions.push(new a(this._ctx.arc,[b,c,d,e,f,g])),this},c.quadraticCurveTo=function(b,c,d,e){return this._dirty=this._active=!0,this._activeInstructions.push(new a(this._ctx.quadraticCurveTo,[b,c,d,e])),this},c.bezierCurveTo=function(b,c,d,e,f,g){return this._dirty=this._active=!0,this._activeInstructions.push(new a(this._ctx.bezierCurveTo,[b,c,d,e,f,g])),this},c.rect=function(b,c,d,e){return this._dirty=this._active=!0,this._activeInstructions.push(new a(this._ctx.rect,[b,c,d,e])),this},c.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new a(this._ctx.closePath,[]))),this},c.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null,this._active=this._dirty=!1,this},c.beginFill=function(b){return this._active&&this._newPath(),this._fillInstructions=b?[new a(this._setProp,["fillStyle",b],!1)]:null,this},c.beginLinearGradientFill=function(b,c,d,e,f,g){for(this._active&&this._newPath(),d=this._ctx.createLinearGradient(d,e,f,g),e=0,f=b.length;f>e;e++)d.addColorStop(c[e],b[e]);return this._fillInstructions=[new a(this._setProp,["fillStyle",d],!1)],this},c.beginRadialGradientFill=function(b,c,d,e,f,g,h,i){for(this._active&&this._newPath(),d=this._ctx.createRadialGradient(d,e,f,g,h,i),e=0,f=b.length;f>e;e++)d.addColorStop(c[e],b[e]);return this._fillInstructions=[new a(this._setProp,["fillStyle",d],!1)],this},c.beginBitmapFill=function(b,c){this._active&&this._newPath();var d=this._ctx.createPattern(b,c||"");return this._fillInstructions=[new a(this._setProp,["fillStyle",d],!1)],this},c.endFill=function(){return this.beginFill()},c.setStrokeStyle=function(c,d,e,f){return this._active&&this._newPath(),this._strokeStyleInstructions=[new a(this._setProp,["lineWidth",null==c?"1":c],!1),new a(this._setProp,["lineCap",null==d?"butt":isNaN(d)?d:b.STROKE_CAPS_MAP[d]],!1),new a(this._setProp,["lineJoin",null==e?"miter":isNaN(e)?e:b.STROKE_JOINTS_MAP[e]],!1),new a(this._setProp,["miterLimit",null==f?"10":f],!1)],this},c.beginStroke=function(b){return this._active&&this._newPath(),this._strokeInstructions=b?[new a(this._setProp,["strokeStyle",b],!1)]:null,this},c.beginLinearGradientStroke=function(b,c,d,e,f,g){for(this._active&&this._newPath(),d=this._ctx.createLinearGradient(d,e,f,g),e=0,f=b.length;f>e;e++)d.addColorStop(c[e],b[e]);return this._strokeInstructions=[new a(this._setProp,["strokeStyle",d],!1)],this},c.beginRadialGradientStroke=function(b,c,d,e,f,g,h,i){for(this._active&&this._newPath(),d=this._ctx.createRadialGradient(d,e,f,g,h,i),e=0,f=b.length;f>e;e++)d.addColorStop(c[e],b[e]);return this._strokeInstructions=[new a(this._setProp,["strokeStyle",d],!1)],this},c.beginBitmapStroke=function(b,c){this._active&&this._newPath();var d=this._ctx.createPattern(b,c||"");return this._strokeInstructions=[new a(this._setProp,["strokeStyle",d],!1)],this},c.endStroke=function(){return this.beginStroke(),this},c.curveTo=c.quadraticCurveTo,c.drawRect=c.rect,c.drawRoundRect=function(a,b,c,d,e){return this.drawRoundRectComplex(a,b,c,d,e,e,e,e),this},c.drawRoundRectComplex=function(b,c,d,e,f,g,h,i){var j=(e>d?d:e)/2,k=0,l=0,m=0,n=0;0>f&&(f*=k=-1),f>j&&(f=j),0>g&&(g*=l=-1),g>j&&(g=j),0>h&&(h*=m=-1),h>j&&(h=j),0>i&&(i*=n=-1),i>j&&(i=j),this._dirty=this._active=!0;var j=this._ctx.arcTo,o=this._ctx.lineTo;return this._activeInstructions.push(new a(this._ctx.moveTo,[b+d-g,c]),new a(j,[b+d+g*l,c-g*l,b+d,c+g,g]),new a(o,[b+d,c+e-h]),new a(j,[b+d+h*m,c+e+h*m,b+d-h,c+e,h]),new a(o,[b+i,c+e]),new a(j,[b-i*n,c+e+i*n,b,c+e-i,i]),new a(o,[b,c+f]),new a(j,[b-f*k,c-f*k,b+f,c,f]),new a(this._ctx.closePath)),this},c.drawCircle=function(a,b,c){return this.arc(a,b,c,0,2*Math.PI),this},c.drawEllipse=function(b,c,d,e){this._dirty=this._active=!0;var f=d/2*.5522848,g=e/2*.5522848,h=b+d,i=c+e,d=b+d/2,e=c+e/2;return this._activeInstructions.push(new a(this._ctx.moveTo,[b,e]),new a(this._ctx.bezierCurveTo,[b,e-g,d-f,c,d,c]),new a(this._ctx.bezierCurveTo,[d+f,c,h,e-g,h,e]),new a(this._ctx.bezierCurveTo,[h,e+g,d+f,i,d,i]),new a(this._ctx.bezierCurveTo,[d-f,i,b,e+g,b,e])),this},c.drawPolyStar=function(b,c,d,e,f,g){this._dirty=this._active=!0,null==f&&(f=0),f=1-f,null==g?g=0:g/=180/Math.PI;var h=Math.PI/e;this._activeInstructions.push(new a(this._ctx.moveTo,[b+Math.cos(g)*d,c+Math.sin(g)*d]));for(var i=0;e>i;i++)g+=h,1!=f&&this._activeInstructions.push(new a(this._ctx.lineTo,[b+Math.cos(g)*d*f,c+Math.sin(g)*d*f])),g+=h,this._activeInstructions.push(new a(this._ctx.lineTo,[b+Math.cos(g)*d,c+Math.sin(g)*d]));return this},c.decodePath=function(a){for(var c=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo],d=[2,2,4,6],e=0,f=a.length,g=[],h=0,i=0,j=b.BASE_64;f>e;){var k=a.charAt(e),l=j[k],m=l>>3,n=c[m];if(!n||3&l)throw"bad path data (@"+e+"): "+k;for(k=d[m],m||(h=i=0),g.length=0,e++,l=(l>>2&1)+2,m=0;k>m;m++){var o=j[a.charAt(e)],p=o>>5?-1:1,o=(31&o)<<6|j[a.charAt(e+1)];3==l&&(o=o<<6|j[a.charAt(e+2)]),o=p*o/10,m%2?h=o+=h:i=o+=i,g[m]=o,e+=l}n.apply(this,g)}return this},c.clone=function(){var a=new b;return a._instructions=this._instructions.slice(),a._activeInstructions=this._activeInstructions.slice(),a._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(a._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(a._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(a._strokeStyleInstructions=this._strokeStyleInstructions.slice()),a._active=this._active,a._dirty=this._dirty,a.drawAsPath=this.drawAsPath,a},c.toString=function(){return"[Graphics]"},c.mt=c.moveTo,c.lt=c.lineTo,c.at=c.arcTo,c.bt=c.bezierCurveTo,c.qt=c.quadraticCurveTo,c.a=c.arc,c.r=c.rect,c.cp=c.closePath,c.c=c.clear,c.f=c.beginFill,c.lf=c.beginLinearGradientFill,c.rf=c.beginRadialGradientFill,c.bf=c.beginBitmapFill,c.ef=c.endFill,c.ss=c.setStrokeStyle,c.s=c.beginStroke,c.ls=c.beginLinearGradientStroke,c.rs=c.beginRadialGradientStroke,c.bs=c.beginBitmapStroke,c.es=c.endStroke,c.dr=c.drawRect,c.rr=c.drawRoundRect,c.rc=c.drawRoundRectComplex,c.dc=c.drawCircle,c.de=c.drawEllipse,c.dp=c.drawPolyStar,c.p=c.decodePath,c._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(b.beginCmd),this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions),this._strokeInstructions&&(this._instructions.push.apply(this._instructions,this._strokeInstructions),this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions)),this._instructions.push.apply(this._instructions,this._activeInstructions),this._fillInstructions&&this._instructions.push(b.fillCmd),this._strokeInstructions&&this._instructions.push(b.strokeCmd)},c._getEllipseArc=function(b,c,d,e){var f=d/2*.5522848,g=e/2*.5522848,h=b+d,i=c+e,d=b+d/2,e=c+e/2;return this._activeInstructions.push(new a(this._ctx.moveTo,[b,e]),new a(this._ctx.bezierCurveTo,[b,e-g,d-f,c,d,c]),new a(this._ctx.bezierCurveTo,[d+f,c,h,e-g,h,e]),new a(this._ctx.bezierCurveTo,[h,e+g,d+f,i,d,i]),new a(this._ctx.bezierCurveTo,[d-f,i,b,e+g,b,e])),this},c._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},c._setProp=function(a,b){this[a]=b},createjs.Graphics=b}(),this.createjs=this.createjs||{},function(){var a=function(){this.initialize()},b=a.prototype;a.suppressCrossDomainErrors=!1,a._hitTestCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),a._hitTestCanvas.width=a._hitTestCanvas.height=1,a._hitTestContext=a._hitTestCanvas.getContext("2d"),a._nextCacheID=1,b.alpha=1,b.cacheCanvas=null,b.id=-1,b.mouseEnabled=!0,b.name=null,b.parent=null,b.regX=0,b.regY=0,b.rotation=0,b.scaleX=1,b.scaleY=1,b.skewX=0,b.skewY=0,b.shadow=null,b.visible=!0,b.x=0,b.y=0,b.compositeOperation=null,b.snapToPixel=!1,b.onPress=null,b.onClick=null,b.onDoubleClick=null,b.onMouseOver=null,b.onMouseOut=null,b.onTick=null,b.filters=null,b.cacheID=0,b.mask=null,b.hitArea=null,b._cacheOffsetX=0,b._cacheOffsetY=0,b._cacheScale=1,b._cacheDataURLID=0,b._cacheDataURL=null,b._matrix=null,b.initialize=function(){this.id=createjs.UID.get(),this._matrix=new createjs.Matrix2D},b.isVisible=function(){return this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY},b.draw=function(a,b){var c=this.cacheCanvas;if(b||!c)return!1;var d=this._cacheScale;return a.drawImage(c,this._cacheOffsetX,this._cacheOffsetY,c.width/d,c.height/d),!0},b.updateContext=function(a){var b,c=this.mask;c&&c.graphics&&(b=c.getMatrix(c._matrix),a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty),c.graphics.drawAsPath(a),a.clip(),b.invert(),a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty)),b=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY),createjs.Stage._snapToPixelEnabled&&this.snapToPixel?a.transform(b.a,b.b,b.c,b.d,b.tx+.5|0,b.ty+.5|0):a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty),a.globalAlpha*=this.alpha,this.compositeOperation&&(a.globalCompositeOperation=this.compositeOperation),this.shadow&&this._applyShadow(a,this.shadow)},b.cache=function(a,b,c,d,e){e=e||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this.cacheCanvas.width=Math.ceil(c*e),this.cacheCanvas.height=Math.ceil(d*e),this._cacheOffsetX=a,this._cacheOffsetY=b,this._cacheScale=e||1,this.updateCache()},b.updateCache=function(b){var c=this.cacheCanvas,d=this._cacheOffsetX,e=this._cacheOffsetY,f=this._cacheScale;if(!c)throw"cache() must be called before updateCache()";var g=c.getContext("2d");g.save(),b||g.clearRect(0,0,c.width,c.height),g.globalCompositeOperation=b,g.setTransform(f,0,0,f,-d,-e),this.draw(g,!0),this._applyFilters(),g.restore(),this.cacheID=a._nextCacheID++},b.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},b.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},b.getStage=function(){for(var a=this;a.parent;)a=a.parent;return a instanceof createjs.Stage?a:null},b.localToGlobal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);return null==c?null:(c.append(1,0,0,1,a,b),new createjs.Point(c.tx,c.ty))},b.globalToLocal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);return null==c?null:(c.invert(),c.append(1,0,0,1,a,b),new createjs.Point(c.tx,c.ty))},b.localToLocal=function(a,b,c){return a=this.localToGlobal(a,b),c.globalToLocal(a.x,a.y)},b.setTransform=function(a,b,c,d,e,f,g,h,i){return this.x=a||0,this.y=b||0,this.scaleX=null==c?1:c,this.scaleY=null==d?1:d,this.rotation=e||0,this.skewX=f||0,this.skewY=g||0,this.regX=h||0,this.regY=i||0,this},b.getMatrix=function(a){return(a?a.identity():new createjs.Matrix2D).appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY).appendProperties(this.alpha,this.shadow,this.compositeOperation)},b.getConcatenatedMatrix=function(a){a?a.identity():a=new createjs.Matrix2D;for(var b=this;null!=b;)a.prependTransform(b.x,b.y,b.scaleX,b.scaleY,b.rotation,b.skewX,b.skewY,b.regX,b.regY).prependProperties(b.alpha,b.shadow,b.compositeOperation),b=b.parent;return a},b.hitTest=function(b,c){var d=a._hitTestContext,e=a._hitTestCanvas;return d.setTransform(1,0,0,1,-b,-c),this.draw(d),d=this._testHit(d),e.width=0,e.width=1,d},b.clone=function(){var b=new a;return this.cloneProps(b),b},b.toString=function(){return"[DisplayObject (name="+this.name+")]"},b.cloneProps=function(a){a.alpha=this.alpha,a.name=this.name,a.regX=this.regX,a.regY=this.regY,a.rotation=this.rotation,a.scaleX=this.scaleX,a.scaleY=this.scaleY,a.shadow=this.shadow,a.skewX=this.skewX,a.skewY=this.skewY,a.visible=this.visible,a.x=this.x,a.y=this.y,a.mouseEnabled=this.mouseEnabled,a.compositeOperation=this.compositeOperation,this.cacheCanvas&&(a.cacheCanvas=this.cacheCanvas.cloneNode(!0),a.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0))},b._applyShadow=function(a,b){b=b||Shadow.identity,a.shadowColor=b.color,a.shadowOffsetX=b.offsetX,a.shadowOffsetY=b.offsetY,a.shadowBlur=b.blur},b._tick=function(a){this.onTick&&(a?this.onTick.apply(this,a):this.onTick())},b._testHit=function(b){try{var c=b.getImageData(0,0,1,1).data[3]>1}catch(d){if(!a.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return c},b._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var a=this.filters.length,b=this.cacheCanvas.getContext("2d"),c=this.cacheCanvas.width,d=this.cacheCanvas.height,e=0;a>e;e++)this.filters[e].applyFilter(b,0,0,c,d)},createjs.DisplayObject=a}(),this.createjs=this.createjs||{},function(){var a=function(){this.initialize()},b=a.prototype=new createjs.DisplayObject;b.children=null,b.DisplayObject_initialize=b.initialize,b.initialize=function(){this.DisplayObject_initialize(),this.children=[]},b.isVisible=function(){return this.visible&&this.alpha>0&&this.children.length&&0!=this.scaleX&&0!=this.scaleY},b.DisplayObject_draw=b.draw,b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;for(var c=this.children.slice(0),d=0,e=c.length;e>d;d++){var f=c[d];f.isVisible()&&(a.save(),f.updateContext(a),f.draw(a),a.restore())}return!0},b.addChild=function(a){if(null==a)return a;var b=arguments.length;if(b>1){for(var c=0;b>c;c++)this.addChild(arguments[c]);return arguments[b-1]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.push(a),a},b.addChildAt=function(a,b){var c=arguments.length,d=arguments[c-1];if(0>d||d>this.children.length)return arguments[c-2];if(c>2){for(var e=0;c-1>e;e++)this.addChildAt(arguments[e],d+e);return arguments[c-2]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),a},b.removeChild=function(a){var b=arguments.length;if(b>1){for(var c=!0,d=0;b>d;d++)c=c&&this.removeChild(arguments[d]);return c}return this.removeChildAt(this.children.indexOf(a))},b.removeChildAt=function(a){var b=arguments.length;if(b>1){for(var c=[],d=0;b>d;d++)c[d]=arguments[d];c.sort(function(a,b){return b-a});for(var e=!0,d=0;b>d;d++)e=e&&this.removeChildAt(c[d]);return e}return 0>a||a>this.children.length-1?!1:((b=this.children[a])&&(b.parent=null),this.children.splice(a,1),!0)},b.removeAllChildren=function(){for(var a=this.children;a.length;)a.pop().parent=null},b.getChildAt=function(a){return this.children[a]},b.sortChildren=function(a){this.children.sort(a)},b.getChildIndex=function(a){return this.children.indexOf(a)},b.getNumChildren=function(){return this.children.length},b.swapChildrenAt=function(a,b){var c=this.children,d=c[a],e=c[b];d&&e&&(c[a]=e,c[b]=d)},b.swapChildren=function(a,b){for(var c,d,e=this.children,f=0,g=e.length;g>f&&(e[f]==a&&(c=f),e[f]==b&&(d=f),null==c||null==d);f++);f!=g&&(e[c]=b,e[d]=a)},b.setChildIndex=function(a,b){var c=this.children,d=c.length;if(!(a.parent!=this||0>b||b>=d)){for(var e=0;d>e&&c[e]!=a;e++);e==d||e==b||(c.splice(e,1),e>b&&b--,c.splice(b,0,a))}},b.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1},b.hitTest=function(a,b){return null!=this.getObjectUnderPoint(a,b)},b.getObjectsUnderPoint=function(a,b){var c=[],d=this.localToGlobal(a,b);return this._getObjectsUnderPoint(d.x,d.y,c),c},b.getObjectUnderPoint=function(a,b){var c=this.localToGlobal(a,b);return this._getObjectsUnderPoint(c.x,c.y)},b.clone=function(b){var c=new a;if(this.cloneProps(c),b)for(var d=c.children=[],e=0,f=this.children.length;f>e;e++){var g=this.children[e].clone(b);g.parent=c,d.push(g)}return c},b.toString=function(){return"[Container (name="+this.name+")]"},b.DisplayObject__tick=b._tick,b._tick=function(a){for(var b=this.children.length-1;b>=0;b--){var c=this.children[b];c._tick&&c._tick(a)}this.DisplayObject__tick(a)},b._getObjectsUnderPoint=function(b,c,d,e){var f=createjs.DisplayObject._hitTestContext,g=createjs.DisplayObject._hitTestCanvas,h=this._matrix,i=1&e&&(this.onPress||this.onClick||this.onDoubleClick)||2&e&&(this.onMouseOver||this.onMouseOut);
if(this.cacheCanvas&&i&&(this.getConcatenatedMatrix(h),f.setTransform(h.a,h.b,h.c,h.d,h.tx-b,h.ty-c),f.globalAlpha=h.alpha,this.draw(f),this._testHit(f)))return g.width=0,g.width=1,this;for(var j=this.children.length-1;j>=0;j--){var k=this.children[j];if(k.isVisible()&&k.mouseEnabled)if(k instanceof a){if(i){if(k=k._getObjectsUnderPoint(b,c))return this}else if(k=k._getObjectsUnderPoint(b,c,d,e),!d&&k)return k}else if(!e||i||1&e&&(k.onPress||k.onClick||k.onDoubleClick)||2&e&&(k.onMouseOver||k.onMouseOut)){var l=k.hitArea;if(k.getConcatenatedMatrix(h),l&&(h.appendTransform(l.x+k.regX,l.y+k.regY,l.scaleX,l.scaleY,l.rotation,l.skewX,l.skewY,l.regX,l.regY),h.alpha*=l.alpha/k.alpha),f.globalAlpha=h.alpha,f.setTransform(h.a,h.b,h.c,h.d,h.tx-b,h.ty-c),(l||k).draw(f),this._testHit(f)){if(g.width=0,g.width=1,i)return this;if(!d)return k;d.push(k)}}}return null},createjs.Container=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype=new createjs.Container;a._snapToPixelEnabled=!1,b.autoClear=!0,b.canvas=null,b.mouseX=0,b.mouseY=0,b.onMouseMove=null,b.onMouseUp=null,b.onMouseDown=null,b.snapToPixelEnabled=!1,b.mouseInBounds=!1,b.tickOnUpdate=!0,b.mouseMoveOutside=!1,b._pointerData=null,b._pointerCount=0,b._primaryPointerID=null,b._mouseOverIntervalID=null,b.Container_initialize=b.initialize,b.initialize=function(a){this.Container_initialize(),this.canvas=a instanceof HTMLCanvasElement?a:document.getElementById(a),this._pointerData={},this._enableMouseEvents(!0)},b.update=function(){if(this.canvas){this.autoClear&&this.clear(),a._snapToPixelEnabled=this.snapToPixelEnabled,this.tickOnUpdate&&this._tick(arguments.length?arguments:null);var b=this.canvas.getContext("2d");b.save(),this.updateContext(b),this.draw(b,!1),b.restore()}},b.tick=b.update,b.clear=function(){if(this.canvas){var a=this.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.canvas.width,this.canvas.height)}},b.toDataURL=function(a,b){b||(b="image/png");var c,d=this.canvas.getContext("2d"),e=this.canvas.width,f=this.canvas.height;if(a){c=d.getImageData(0,0,e,f);var g=d.globalCompositeOperation;d.globalCompositeOperation="destination-over",d.fillStyle=a,d.fillRect(0,0,e,f)}var h=this.canvas.toDataURL(b);return a&&(d.clearRect(0,0,e,f),d.putImageData(c,0,0),d.globalCompositeOperation=g),h},b.enableMouseOver=function(a){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null),null==a)a=20;else if(0>=a)return;var b=this;this._mouseOverIntervalID=setInterval(function(){b._testMouseOver()},1e3/Math.min(50,a))},b.clone=function(){var b=new a(null);return this.cloneProps(b),b},b.toString=function(){return"[Stage (name="+this.name+")]"},b._enableMouseEvents=function(){var a=this,b=window.addEventListener?window:document;b.addEventListener("mouseup",function(b){a._handleMouseUp(b)},!1),b.addEventListener("mousemove",function(b){a._handleMouseMove(b)},!1),b.addEventListener("dblclick",function(b){a._handleDoubleClick(b)},!1),this.canvas&&this.canvas.addEventListener("mousedown",function(b){a._handleMouseDown(b)},!1)},b._getPointerData=function(a){var b=this._pointerData[a];return b||(b=this._pointerData[a]={x:0,y:0},null!=this._primaryPointerID)||(this._primaryPointerID=a),b},b._handleMouseMove=function(a){a||(a=window.event),this._handlePointerMove(-1,a,a.pageX,a.pageY)},b._handlePointerMove=function(a,b,c,d){if(this.canvas){var e=this._getPointerData(a),f=e.inBounds;this._updatePointerPosition(a,c,d),(f||e.inBounds||this.mouseMoveOutside)&&(a=new createjs.MouseEvent("onMouseMove",e.x,e.y,this,b,a,a==this._primaryPointerID,e.rawX,e.rawY),this.onMouseMove&&this.onMouseMove(a),e.event&&e.event.onMouseMove&&(a=a.clone(),a.target=e.event.target,e.event.onMouseMove(a)))}},b._updatePointerPosition=function(a,b,c){var d=this._getElementRect(this.canvas);b-=d.left,c-=d.top;var e=this.canvas.width,f=this.canvas.height;b/=(d.right-d.left)/e,c/=(d.bottom-d.top)/f,d=this._getPointerData(a),(d.inBounds=b>=0&&c>=0&&e-1>=b&&f-1>=c)?(d.x=b,d.y=c):this.mouseMoveOutside&&(d.x=0>b?0:b>e-1?e-1:b,d.y=0>c?0:c>f-1?f-1:c),d.rawX=b,d.rawY=c,a==this._primaryPointerID&&(this.mouseX=d.x,this.mouseY=d.y,this.mouseInBounds=d.inBounds)},b._getElementRect=function(a){var b=a.getBoundingClientRect(),c=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),d=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),e=window.getComputedStyle?getComputedStyle(a):a.currentStyle,a=parseInt(e.paddingLeft)+parseInt(e.borderLeftWidth),f=parseInt(e.paddingTop)+parseInt(e.borderTopWidth),g=parseInt(e.paddingRight)+parseInt(e.borderRightWidth),e=parseInt(e.paddingBottom)+parseInt(e.borderBottomWidth);return{left:b.left+c+a,right:b.right+c-g,top:b.top+d+f,bottom:b.bottom+d-e}},b._handleMouseUp=function(a){this._handlePointerUp(-1,a,!1)},b._handlePointerUp=function(a,b,c){var d=this._getPointerData(a),e=new createjs.MouseEvent("onMouseUp",d.x,d.y,this,b,a,a==this._primaryPointerID,d.rawX,d.rawY);this.onMouseUp&&this.onMouseUp(e),d.event&&d.event.onMouseUp&&(e=e.clone(),e.target=d.event.target,d.event.onMouseUp(e)),d.target&&d.target.onClick&&this._getObjectsUnderPoint(d.x,d.y,null,!0,this._mouseOverIntervalID?3:1)==d.target&&d.target.onClick(new createjs.MouseEvent("onClick",d.x,d.y,d.target,b,a,a==this._primaryPointerID,d.rawX,d.rawY)),c?(a==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[a]):d.event=d.target=null},b._handleMouseDown=function(a){this._handlePointerDown(-1,a,!1)},b._handlePointerDown=function(a,b,c,d){var e=this._getPointerData(a);null!=d&&this._updatePointerPosition(a,c,d),this.onMouseDown&&this.onMouseDown(new createjs.MouseEvent("onMouseDown",e.x,e.y,this,b,a,a==this._primaryPointerID,e.rawX,e.rawY)),(c=this._getObjectsUnderPoint(e.x,e.y,null,this._mouseOverIntervalID?3:1))&&(c.onPress&&(a=new createjs.MouseEvent("onPress",e.x,e.y,c,b,a,a==this._primaryPointerID,e.rawX,e.rawY),c.onPress(a),a.onMouseMove||a.onMouseUp)&&(e.event=a),e.target=c)},b._testMouseOver=function(){if(-1==this._primaryPointerID&&(this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var a=null;this.mouseInBounds&&(a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY),this._mouseOverTarget!=a&&(this._mouseOverTarget&&this._mouseOverTarget.onMouseOut&&this._mouseOverTarget.onMouseOut(new createjs.MouseEvent("onMouseOut",this.mouseX,this.mouseY,this._mouseOverTarget)),a&&a.onMouseOver&&a.onMouseOver(new createjs.MouseEvent("onMouseOver",this.mouseX,this.mouseY,a)),this._mouseOverTarget=a)}},b._handleDoubleClick=function(a){this.onDoubleClick&&this.onDoubleClick(new createjs.MouseEvent("onDoubleClick",this.mouseX,this.mouseY,this,a,-1,!0));var b=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);b&&b.onDoubleClick&&b.onDoubleClick(new createjs.MouseEvent("onDoubleClick",this.mouseX,this.mouseY,b,a,-1,!0))},createjs.Stage=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype=new createjs.DisplayObject;b.image=null,b.snapToPixel=!0,b.sourceRect=null,b.DisplayObject_initialize=b.initialize,b.initialize=function(a){this.DisplayObject_initialize(),"string"==typeof a?(this.image=new Image,this.image.src=a):this.image=a},b.isVisible=function(){return this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2)},b.DisplayObject_draw=b.draw,b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;var c=this.sourceRect;return c?a.drawImage(this.image,c.x,c.y,c.width,c.height,0,0,c.width,c.height):a.drawImage(this.image,0,0),!0},b.clone=function(){var b=new a(this.image);return this.cloneProps(b),b},b.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype=new createjs.DisplayObject;b.onAnimationEnd=null,b.currentFrame=-1,b.currentAnimation=null,b.paused=!0,b.spriteSheet=null,b.snapToPixel=!0,b.offset=0,b.currentAnimationFrame=0,b._advanceCount=0,b._animation=null,b.DisplayObject_initialize=b.initialize,b.initialize=function(a){this.DisplayObject_initialize(),this.spriteSheet=a},b.isVisible=function(){return this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&this.spriteSheet.complete&&this.currentFrame>=0},b.DisplayObject_draw=b.draw,b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this._normalizeFrame();var c=this.spriteSheet.getFrame(this.currentFrame);if(null!=c){var d=c.rect;return a.drawImage(c.image,d.x,d.y,d.width,d.height,-c.regX,-c.regY,d.width,d.height),!0}},b.play=function(){this.paused=!1},b.stop=function(){this.paused=!0},b.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},b.gotoAndStop=function(a){this.paused=!0,this._goto(a)},b.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++,this._normalizeFrame()},b.clone=function(){var b=new a(this.spriteSheet);return this.cloneProps(b),b},b.toString=function(){return"[BitmapAnimation (name="+this.name+")]"},b.DisplayObject__tick=b._tick,b._tick=function(a){var b=this._animation?this._animation.frequency:1;!this.paused&&(++this._advanceCount+this.offset)%b==0&&this.advance(),this.DisplayObject__tick(a)},b._normalizeFrame=function(){var a=this._animation;a?this.currentAnimationFrame>=a.frames.length?(a.next?this._goto(a.next):(this.paused=!0,this.currentAnimationFrame=a.frames.length-1,this.currentFrame=a.frames[this.currentAnimationFrame]),this.onAnimationEnd&&this.onAnimationEnd(this,a.name)):this.currentFrame=a.frames[this.currentAnimationFrame]:this.currentFrame>=this.spriteSheet.getNumFrames()&&(this.currentFrame=0,this.onAnimationEnd)&&this.onAnimationEnd(this,null)},b.DisplayObject_cloneProps=b.cloneProps,b.cloneProps=function(a){this.DisplayObject_cloneProps(a),a.onAnimationEnd=this.onAnimationEnd,a.currentFrame=this.currentFrame,a.currentAnimation=this.currentAnimation,a.paused=this.paused,a.offset=this.offset,a._animation=this._animation,a.currentAnimationFrame=this.currentAnimationFrame},b._goto=function(a){if(isNaN(a)){var b=this.spriteSheet.getAnimation(a);b&&(this.currentAnimationFrame=0,this._animation=b,this.currentAnimation=a,this._normalizeFrame())}else this.currentAnimation=this._animation=null,this.currentFrame=a},createjs.BitmapAnimation=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype=new createjs.DisplayObject;b.graphics=null,b.DisplayObject_initialize=b.initialize,b.initialize=function(a){this.DisplayObject_initialize(),this.graphics=a?a:new createjs.Graphics},b.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&this.graphics)},b.DisplayObject_draw=b.draw,b.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(this.graphics.draw(a),!0)},b.clone=function(b){return b=new a(b&&this.graphics?this.graphics.clone():this.graphics),this.cloneProps(b),b},b.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c){this.initialize(a,b,c)},b=a.prototype=new createjs.DisplayObject;a._workingContext=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),b.text="",b.font=null,b.color="#000",b.textAlign="left",b.textBaseline="top",b.maxWidth=null,b.outline=!1,b.lineHeight=0,b.lineWidth=null,b.DisplayObject_initialize=b.initialize,b.initialize=function(a,b,c){this.DisplayObject_initialize(),this.text=a,this.font=b,this.color=c?c:"#000"},b.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&null!=this.text&&""!==this.text)},b.DisplayObject_draw=b.draw,b.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(this.outline?a.strokeStyle=this.color:a.fillStyle=this.color,a.font=this.font,a.textAlign=this.textAlign||"start",a.textBaseline=this.textBaseline||"alphabetic",this._drawText(a),!0)},b.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width},b.getMeasuredLineHeight=function(){return 1.2*this._getWorkingContext().measureText("M").width},b.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())},b.clone=function(){var b=new a(this.text,this.font,this.color);return this.cloneProps(b),b},b.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},b.DisplayObject_cloneProps=b.cloneProps,b.cloneProps=function(a){this.DisplayObject_cloneProps(a),a.textAlign=this.textAlign,a.textBaseline=this.textBaseline,a.maxWidth=this.maxWidth,a.outline=this.outline,a.lineHeight=this.lineHeight,a.lineWidth=this.lineWidth},b._getWorkingContext=function(){var b=a._workingContext;return b.font=this.font,b.textAlign=this.textAlign||"start",b.textBaseline=this.textBaseline||"alphabetic",b},b._drawText=function(a){var b=!!a;b||(a=this._getWorkingContext());for(var c=String(this.text).split(/(?:\r\n|\r|\n)/),d=this.lineHeight||this.getMeasuredLineHeight(),e=0,f=0,g=c.length;g>f;f++){var h=a.measureText(c[f]).width;if(null==this.lineWidth||h<this.lineWidth)b&&this._drawTextLine(a,c[f],e*d);else{for(var h=c[f].split(/(\s)/),i=h[0],j=1,k=h.length;k>j;j+=2)a.measureText(i+h[j]+h[j+1]).width>this.lineWidth?(b&&this._drawTextLine(a,i,e*d),e++,i=h[j+1]):i+=h[j]+h[j+1];b&&this._drawTextLine(a,i,e*d)}e++}return e},b._drawTextLine=function(a,b,c){this.outline?a.strokeText(b,0,c,this.maxWidth||65535):a.fillText(b,0,c,this.maxWidth||65535)},createjs.Text=a}(),this.createjs=this.createjs||{},function(){var a=function(){throw"SpriteSheetUtils cannot be instantiated"};a._workingCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),a._workingContext=a._workingCanvas.getContext("2d"),a.addFlippedFrames=function(b,c,d,e){if(c||d||e){var f=0;c&&a._flip(b,++f,!0,!1),d&&a._flip(b,++f,!1,!0),e&&a._flip(b,++f,!0,!0)}},a.extractFrame=function(b,c){isNaN(c)&&(c=b.getAnimation(c).frames[0]);var d=b.getFrame(c);if(!d)return null;var e=d.rect,f=a._workingCanvas;return f.width=e.width,f.height=e.height,a._workingContext.drawImage(d.image,e.x,e.y,e.width,e.height,0,0,e.width,e.height),d=new Image,d.src=f.toDataURL("image/png"),d},a.mergeAlpha=function(a,b,c){c||(c=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),c.width=Math.max(b.width,a.width),c.height=Math.max(b.height,a.height);var d=c.getContext("2d");return d.save(),d.drawImage(a,0,0),d.globalCompositeOperation="destination-in",d.drawImage(b,0,0),d.restore(),c},a._flip=function(b,c,d,e){for(var f=b._images,g=a._workingCanvas,h=a._workingContext,i=f.length/c,j=0;i>j;j++){var k=f[j];k.__tmp=j,g.width=0,g.width=k.width,g.height=k.height,h.setTransform(d?-1:1,0,0,e?-1:1,d?k.width:0,e?k.height:0),h.drawImage(k,0,0);var l=new Image;l.src=g.toDataURL("image/png"),l.width=k.width,l.height=k.height,f.push(l)}for(h=b._frames,g=h.length/c,j=0;g>j;j++){var k=h[j],m=k.rect.clone(),l=f[k.image.__tmp+i*c],n={image:l,rect:m,regX:k.regX,regY:k.regY};d&&(m.x=l.width-m.x-m.width,n.regX=m.width-k.regX),e&&(m.y=l.height-m.y-m.height,n.regY=m.height-k.regY),h.push(n)}for(d="_"+(d?"h":"")+(e?"v":""),e=b._animations,b=b._data,f=e.length/c,j=0;f>j;j++){for(h=e[j],k=b[h],i={name:h+d,frequency:k.frequency,next:k.next,frames:[]},k.next&&(i.next+=d),h=k.frames,k=0,l=h.length;l>k;k++)i.frames.push(h[k]+g*c);b[i.name]=i,e.push(i.name)}},createjs.SpriteSheetUtils=a}(),this.createjs=this.createjs||{},function(){var a=function(){this.initialize()},b=a.prototype;a.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",a.ERR_RUNNING="a build is already running",b.maxWidth=2048,b.maxHeight=2048,b.spriteSheet=null,b.scale=1,b.padding=1,b._frames=null,b._animations=null,b._data=null,b._nextFrameIndex=0,b._index=0,b._callback=null,b._timeSlice=null,b._timerID=null,b._scale=1,b.initialize=function(){this._frames=[],this._animations={}},b.addFrame=function(b,c,d,e,f,g){if(this._data)throw a.ERR_RUNNING;return c=c||b.bounds||b.nominalBounds,!c&&b.getBounds&&(c=b.getBounds()),c?(d=d||1,this._frames.push({source:b,sourceRect:c,scale:d,funct:e,params:f,scope:g,index:this._frames.length,height:c.height*d})-1):null},b.addAnimation=function(b,c,d,e){if(this._data)throw a.ERR_RUNNING;this._animations[b]={frames:c,next:d,frequency:e}},b.addMovieClip=function(b,c,d){if(this._data)throw a.ERR_RUNNING;var e=b.frameBounds,f=c||b.bounds||b.nominalBounds;if(!f&&b.getBounds&&(f=b.getBounds()),!f&&!e)return null;for(var c=b.timeline.duration,g=0;c>g;g++)this.addFrame(b,e&&e[g]?e[g]:f,d,function(a){var b=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(a),this.actionsEnabled=b},[g],b);var h,g=b.timeline._labels,b=[];for(h in g)b.push({index:g[h],label:h});if(b.length)for(b.sort(function(a,b){return a.index-b.index}),g=0,h=b.length;h>g;g++){for(var d=b[g].label,e=g==h-1?c:b[g+1].index,f=[],i=b[g].index;e>i;i++)f.push(i);this.addAnimation(d,f,!0)}},b.build=function(){if(this._data)throw a.ERR_RUNNING;for(this._callback=null,this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},b.buildAsync=function(b,c){if(this._data)throw a.ERR_RUNNING;this._callback=b,this._startBuild(),this._timeSlice=50*Math.max(.01,Math.min(.99,c||.3));var d=this;this._timerID=setTimeout(function(){d._run()},50-this._timeSlice)},b.stopAsync=function(){clearTimeout(this._timerID),this._data=null},b.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},b.toString=function(){return"[SpriteSheetBuilder]"},b._startBuild=function(){var b=this.padding||0;this.spriteSheet=null,this._index=0,this._scale=this.scale;var c=[];this._data={images:[],frames:c,animations:this._animations};var d=this._frames.slice();if(d.sort(function(a,b){return a.height<=b.height?-1:1}),d[d.length-1].height+2*b>this.maxHeight)throw a.ERR_DIMENSIONS;for(var e=0,f=0,g=0;d.length;){var h=this._fillRow(d,e,g,c,b);if(h.w>f&&(f=h.w),e+=h.h,!h.h||!d.length){var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.width=this._getSize(f,this.maxWidth),i.height=this._getSize(e,this.maxHeight),this._data.images[g]=i,h.h||(f=e=0,g++)}}},b._getSize=function(a,b){for(var c=4;Math.pow(2,++c)<a;);return Math.min(b,Math.pow(2,c))},b._fillRow=function(b,c,d,e,f){var g=this.maxWidth,h=this.maxHeight-c,i=f;c+=f;for(var j=0,k=b.length-1;k>=0;k--){var l=b[k],m=this._scale*l.scale,n=l.sourceRect,o=l.source,p=Math.floor(m*n.x-f),q=Math.floor(m*n.y-f),r=Math.ceil(m*n.height+2*f),n=Math.ceil(m*n.width+2*f);if(n>g)throw a.ERR_DIMENSIONS;r>h||i+n>g||(l.img=d,l.rect=new createjs.Rectangle(i,c,n,r),j=j||r,b.splice(k,1),e[l.index]=[i,c,n,r,d,Math.round(-p+m*o.regX-f),Math.round(-q+m*o.regY-f)],i+=n)}return{w:i,h:j}},b._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this._callback&&this._callback(this)},b._run=function(){for(var a=(new Date).getTime()+this._timeSlice,b=!1;a>(new Date).getTime();)if(!this._drawNext()){b=!0;break}if(b)this._endBuild();else{var c=this;this._timerID=setTimeout(function(){c._run()},50-this._timeSlice)}},b._drawNext=function(){var a=this._frames[this._index],b=a.scale*this._scale,c=a.rect,d=a.sourceRect,e=this._data.images[a.img].getContext("2d");return a.funct&&a.funct.apply(a.scope,a.params),e.save(),e.beginPath(),e.rect(c.x,c.y,c.width,c.height),e.clip(),e.translate(Math.ceil(c.x-d.x*b),Math.ceil(c.y-d.y*b)),e.scale(b,b),a.source.draw(e),e.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype=new createjs.DisplayObject;b.htmlElement=null,b._style=null,b.DisplayObject_initialize=b.initialize,b.initialize=function(a){"string"==typeof a&&(a=document.getElementById(a)),this.DisplayObject_initialize(),this.mouseEnabled=!1,(this.htmlElement=a)&&(this._style=a.style,this._style.position="absolute",this._style.transformOrigin=this._style.WebkitTransformOrigin=this._style.msTransformOrigin=this._style.MozTransformOrigin=this._style.OTransformOrigin="0% 0%")},b.isVisible=function(){return null!=this.htmlElement},b.draw=function(){if(null!=this.htmlElement){var a=this.getConcatenatedMatrix(this._matrix),b=this.htmlElement;return b.style.opacity=""+a.alpha,b.style.visibility=this.visible?"visible":"hidden",b.style.transform=b.style.WebkitTransform=b.style.OTransform=b.style.msTransform=["matrix("+a.a,a.b,a.c,a.d,a.tx+.5|0,(a.ty+.5|0)+")"].join(","),b.style.MozTransform=["matrix("+a.a,a.b,a.c,a.d,(a.tx+.5|0)+"px",(a.ty+.5|0)+"px)"].join(","),!0}},b.cache=function(){},b.uncache=function(){},b.updateCache=function(){},b.hitTest=function(){},b.localToGlobal=function(){},b.globalToLocal=function(){},b.localToLocal=function(){},b.clone=function(){var b=new a;return this.cloneProps(b),b},b.toString=function(){return"[DOMElement (name="+this.name+")]"},b._tick=function(a){null!=this.htmlElement&&(this.htmlElement.style.visibility="hidden",this.onTick)&&this.onTick(a)},createjs.DOMElement=a}(),this.createjs=this.createjs||{},function(){var a=function(){this.initialize()},b=a.prototype;b.initialize=function(){},b.getBounds=function(){return new createjs.Rectangle(0,0,0,0)},b.applyFilter=function(){},b.toString=function(){return"[Filter]"},b.clone=function(){return new a},createjs.Filter=a}(),this.createjs=this.createjs||{},function(){var a=function(){throw"Touch cannot be instantiated"};a.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled},a.enable=function(b,c,d){return b&&b.canvas&&a.isSupported()?(b.__touch={pointers:{},multitouch:!c,preventDefault:!d,count:0},"ontouchstart"in window?a._IOS_enable(b):window.navigator.msPointerEnabled&&a._IE_enable(b),!0):!1},a.disable=function(b){b&&("ontouchstart"in window?a._IOS_disable(b):window.navigator.msPointerEnabled&&a._IE_disable(b))},a._IOS_enable=function(b){var c=b.canvas,d=b.__touch.f=function(c){a._IOS_handleEvent(b,c)};c.addEventListener("touchstart",d,!1),c.addEventListener("touchmove",d,!1),c.addEventListener("touchend",d,!1),c.addEventListener("touchcancel",d,!1)},a._IOS_disable=function(a){var b=a.canvas;b&&(a=a.__touch.f,b.removeEventListener("touchstart",a,!1),b.removeEventListener("touchmove",a,!1),b.removeEventListener("touchend",a,!1),b.removeEventListener("touchcancel",a,!1))},a._IOS_handleEvent=function(a,b){if(a){a.__touch.preventDefault&&b.preventDefault&&b.preventDefault();for(var c=b.changedTouches,d=b.type,e=0,f=c.length;f>e;e++){var g=c[e],h=g.identifier;g.target==a.canvas&&("touchstart"==d?this._handleStart(a,h,b,g.pageX,g.pageY):"touchmove"==d?this._handleMove(a,h,b,g.pageX,g.pageY):("touchend"==d||"touchcancel"==d)&&this._handleEnd(a,h,b))}}},a._IE_enable=function(b){var c=b.canvas,d=b.__touch.f=function(c){a._IE_handleEvent(b,c)};c.addEventListener("MSPointerDown",d,!1),window.addEventListener("MSPointerMove",d,!1),window.addEventListener("MSPointerUp",d,!1),window.addEventListener("MSPointerCancel",d,!1),b.__touch.preventDefault&&(c.style.msTouchAction="none"),b.__touch.activeIDs={}},a._IE_disable=function(a){var b=a.__touch.f;window.removeEventListener("MSPointerMove",b,!1),window.removeEventListener("MSPointerUp",b,!1),window.removeEventListener("MSPointerCancel",b,!1),a.canvas&&a.canvas.removeEventListener("MSPointerDown",b,!1)},a._IE_handleEvent=function(a,b){if(a){a.__touch.preventDefault&&b.preventDefault&&b.preventDefault();var c=b.type,d=b.pointerId,e=a.__touch.activeIDs;"MSPointerDown"==c?b.srcElement==a.canvas&&(e[d]=!0,this._handleStart(a,d,b,b.pageX,b.pageY)):e[d]&&("MSPointerMove"==c?this._handleMove(a,d,b,b.pageX,b.pageY):("MSPointerUp"==c||"MSPointerCancel"==c)&&(delete e[d],this._handleEnd(a,d,b)))}},a._handleStart=function(a,b,c,d,e){var f=a.__touch;if(f.multitouch||!f.count){var g=f.pointers;g[b]||(g[b]=!0,f.count++,a._handlePointerDown(b,c,d,e))}},a._handleMove=function(a,b,c,d,e){a.__touch.pointers[b]&&a._handlePointerMove(b,c,d,e)},a._handleEnd=function(a,b,c){var d=a.__touch,e=d.pointers;e[b]&&(d.count--,a._handlePointerUp(b,c,!0),delete e[b])},createjs.Touch=a}(),function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if("object"==typeof a){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;a.length>b;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;a.length>b;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if("object"===c)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:this.EventEmitter=a}.call(this),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):a.eventie=f}(this),function(a,b){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("wolfy87-eventemitter"),require("eventie")):a.imagesLoaded=b(a,a.EventEmitter,a.eventie)}(window,function(a,b,c){function d(a,b){for(var c in b)a[c]=b[c];return a}function e(a){return"[object Array]"===m.call(a)}function f(a){var b=[];if(e(a))b=a;else if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++)b.push(a[c]);else b.push(a);return b}function g(a,b,c){if(!(this instanceof g))return new g(a,b);"string"==typeof a&&(a=document.querySelectorAll(a)),this.elements=f(a),this.options=d({},this.options),"function"==typeof b?c=b:d(this.options,b),c&&this.on("always",c),this.getImages(),j&&(this.jqDeferred=new j.Deferred);var e=this;setTimeout(function(){e.check()})}function h(a){this.img=a}function i(a){this.src=a,n[a]=this}var j=a.jQuery,k=a.console,l=void 0!==k,m=Object.prototype.toString;g.prototype=new b,g.prototype.options={},g.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;b>a;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);var d=c.nodeType;if(d&&(1===d||9===d||11===d))for(var e=c.querySelectorAll("img"),f=0,g=e.length;g>f;f++){var h=e[f];this.addImage(h)}}},g.prototype.addImage=function(a){var b=new h(a);this.images.push(b)},g.prototype.check=function(){function a(a,e){return b.options.debug&&l&&k.log("confirm",a,e),b.progress(a),c++,c===d&&b.complete(),!0}var b=this,c=0,d=this.images.length;if(this.hasAnyBroken=!1,!d)return void this.complete();for(var e=0;d>e;e++){var f=this.images[e];f.on("confirm",a),f.check()}},g.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a),b.jqDeferred&&b.jqDeferred.notify&&b.jqDeferred.notify(b,a)})},g.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){if(b.emit(a,b),b.emit("always",b),b.jqDeferred){var c=b.hasAnyBroken?"reject":"resolve";b.jqDeferred[c](b)}})},j&&(j.fn.imagesLoaded=function(a,b){var c=new g(this,a,b);return c.jqDeferred.promise(j(this))}),h.prototype=new b,h.prototype.check=function(){var a=n[this.img.src]||new i(this.img.src);if(a.isConfirmed)return void this.confirm(a.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var b=this;a.on("confirm",function(a,c){return b.confirm(a.isLoaded,c),!0}),a.check()},h.prototype.confirm=function(a,b){this.isLoaded=a,this.emit("confirm",this,b)};var n={};return i.prototype=new b,i.prototype.check=function(){if(!this.isChecked){var a=new Image;c.bind(a,"load",this),c.bind(a,"error",this),a.src=this.src,this.isChecked=!0}},i.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},i.prototype.onload=function(a){this.confirm(!0,"onload"),this.unbindProxyEvents(a)},i.prototype.onerror=function(a){this.confirm(!1,"onerror"),this.unbindProxyEvents(a)},i.prototype.confirm=function(a,b){this.isConfirmed=!0,this.isLoaded=a,this.emit("confirm",this,b)},i.prototype.unbindProxyEvents=function(a){c.unbind(a.target,"load",this),c.unbind(a.target,"error",this)},g}),function(a,b){"object"==typeof exports&&exports?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.Mustache={})}(this,function(a){function b(a){return"function"==typeof a}function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d(a,b){return o.call(a,b)}function e(a){return!d(p,a)}function f(a){return String(a).replace(/[&<>"'\/]/g,function(a){return q[a]})}function g(b,d){function f(){if(w&&!x)for(;q.length;)delete p[q.pop()];else q=[];w=!1,x=!1}function g(a){if("string"==typeof a&&(a=a.split(s,2)),!n(a)||2!==a.length)throw new Error("Invalid tags: "+a);k=new RegExp(c(a[0])+"\\s*"),l=new RegExp("\\s*"+c(a[1])),m=new RegExp("\\s*"+c("}"+a[1]))}if(!b)return[];var k,l,m,o=[],p=[],q=[],w=!1,x=!1;g(d||a.tags);for(var y,z,A,B,C,D,E=new j(b);!E.eos();){if(y=E.pos,A=E.scanUntil(k))for(var F=0,G=A.length;G>F;++F)B=A.charAt(F),
e(B)?q.push(p.length):x=!0,p.push(["text",B,y,y+1]),y+=1,"\n"===B&&f();if(!E.scan(k))break;if(w=!0,z=E.scan(v)||"name",E.scan(r),"="===z?(A=E.scanUntil(t),E.scan(t),E.scanUntil(l)):"{"===z?(A=E.scanUntil(m),E.scan(u),E.scanUntil(l),z="&"):A=E.scanUntil(l),!E.scan(l))throw new Error("Unclosed tag at "+E.pos);if(C=[z,A,y,E.pos],p.push(C),"#"===z||"^"===z)o.push(C);else if("/"===z){if(D=o.pop(),!D)throw new Error('Unopened section "'+A+'" at '+y);if(D[1]!==A)throw new Error('Unclosed section "'+D[1]+'" at '+y)}else"name"===z||"{"===z||"&"===z?x=!0:"="===z&&g(A)}if(D=o.pop())throw new Error('Unclosed section "'+D[1]+'" at '+E.pos);return i(h(p))}function h(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function i(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function j(a){this.string=a,this.tail=a,this.pos=0}function k(a,b){this.view=null==a?{}:a,this.cache={".":this.view},this.parent=b}function l(){this.cache={}}var m=Object.prototype.toString,n=Array.isArray||function(a){return"[object Array]"===m.call(a)},o=RegExp.prototype.test,p=/\S/,q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},r=/\s*/,s=/\s+/,t=/\s*=/,u=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/;j.prototype.eos=function(){return""===this.tail},j.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},j.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},k.prototype.push=function(a){return new k(a,this)},k.prototype.lookup=function(a){var c,d=this.cache;if(a in d)c=d[a];else{for(var e,f,g=this;g;){if(a.indexOf(".")>0)for(c=g.view,e=a.split("."),f=0;null!=c&&f<e.length;)c=c[e[f++]];else c=g.view[a];if(null!=c)break;g=g.parent}d[a]=c}return b(c)&&(c=c.call(this.view)),c},l.prototype.clearCache=function(){this.cache={}},l.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=g(a,b)),d},l.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof k?b:new k(b);return this.renderTokens(d,e,c,a)},l.prototype.renderTokens=function(c,d,e,f){function g(a){return k.render(a,d,e)}for(var h,i,j="",k=this,l=0,m=c.length;m>l;++l)switch(h=c[l],h[0]){case"#":if(i=d.lookup(h[1]),!i)continue;if(n(i))for(var o=0,p=i.length;p>o;++o)j+=this.renderTokens(h[4],d.push(i[o]),e,f);else if("object"==typeof i||"string"==typeof i)j+=this.renderTokens(h[4],d.push(i),e,f);else if(b(i)){if("string"!=typeof f)throw new Error("Cannot use higher-order sections without the original template");i=i.call(d.view,f.slice(h[3],h[5]),g),null!=i&&(j+=i)}else j+=this.renderTokens(h[4],d,e,f);break;case"^":i=d.lookup(h[1]),(!i||n(i)&&0===i.length)&&(j+=this.renderTokens(h[4],d,e,f));break;case">":if(!e)continue;i=b(e)?e(h[1]):e[h[1]],null!=i&&(j+=this.renderTokens(this.parse(i),d,e,i));break;case"&":i=d.lookup(h[1]),null!=i&&(j+=i);break;case"name":i=d.lookup(h[1]),null!=i&&(j+=a.escape(i));break;case"text":j+=h[1]}return j},a.name="mustache.js",a.version="0.8.1",a.tags=["{{","}}"];var w=new l;a.clearCache=function(){return w.clearCache()},a.parse=function(a,b){return w.parse(a,b)},a.render=function(a,b,c){return w.render(a,b,c)},a.to_html=function(c,d,e,f){var g=a.render(c,d,e);return b(f)?void f(g):g},a.escape=f,a.Scanner=j,a.Context=k,a.Writer=l}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.isLoading=!1};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",f.resetText||d.data("resetText",d[e]()),d[e](f[b]||this.options[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},b.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});return this.$element.trigger(j),j.isDefaultPrevented()?void 0:(this.sliding=!0,f&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),f&&this.cycle(),this)};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("collapse in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);!e&&f.toggle&&"show"==c&&(c=!c),e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";function b(b){a(d).remove(),a(e).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown",h),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=" li:not(.divider):visible a",i=f.find("[role=menu]"+h+", [role=listbox]"+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu], [role=listbox]",f.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());c.is("a")&&b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this,d=this.tip();this.setContent(),this.options.animation&&d.addClass("fade");var e="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,g=f.test(e);g&&(e=e.replace(f,"")||"top"),d.detach().css({top:0,left:0,display:"block"}).addClass(e),this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);var h=this.getPosition(),i=d[0].offsetWidth,j=d[0].offsetHeight;if(g){var k=this.$element.parent(),l=e,m=document.documentElement.scrollTop||document.body.scrollTop,n="body"==this.options.container?window.innerWidth:k.outerWidth(),o="body"==this.options.container?window.innerHeight:k.outerHeight(),p="body"==this.options.container?0:k.offset().left;e="bottom"==e&&h.top+h.height+j-m>o?"top":"top"==e&&h.top-m-j<0?"bottom":"right"==e&&h.right+i>n?"left":"left"==e&&h.left-i<p?"right":e,d.removeClass(l).addClass(e)}var q=this.getCalculatedOffset(e,h,i,j);this.applyPlacement(q,e),this.hoverState=null;var r=function(){c.$element.trigger("shown.bs."+c.type)};a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,r).emulateTransitionEnd(150):r()}},b.prototype.applyPlacement=function(b,c){var d,e=this.tip(),f=e[0].offsetWidth,g=e[0].offsetHeight,h=parseInt(e.css("margin-top"),10),i=parseInt(e.css("margin-left"),10);isNaN(h)&&(h=0),isNaN(i)&&(i=0),b.top=b.top+h,b.left=b.left+i,a.offset.setOffset(e[0],a.extend({using:function(a){e.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),e.addClass("in");var j=e[0].offsetWidth,k=e[0].offsetHeight;if("top"==c&&k!=g&&(d=!0,b.top=b.top+g-k),/bottom|top/.test(c)){var l=0;b.left<0&&(l=-2*b.left,b.left=0,e.offset(b),j=e[0].offsetWidth,k=e[0].offsetHeight),this.replaceArrow(l-f+j,j,"left")}else this.replaceArrow(k-g,k,"top");d&&e.offset(b)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");var a=this.$window.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-a},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"top"==this.affixed&&(e.top+=d),"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),
"bottom"==i&&this.$element.offset({top:c-h-this.$element.height()}))}}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery),function(){function a(b){var c=a.modules[b];if(!c)throw new Error('failed to require "'+b+'"');return"exports"in c||"function"!=typeof c.definition||(c.client=c.component=!0,c.definition.call(this,c.exports={},c),delete c.definition),c.exports}a.modules={},a.register=function(b,c){a.modules[b]={definition:c}},a.define=function(b,c){a.modules[b]={exports:c}},a.register("dropzone",function(b,c){c.exports=a("dropzone/lib/dropzone.js")}),a.register("dropzone/lib/dropzone.js",function(a,b){(function(){var a,c,d,e,f,g,h,i,j=[].slice,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=function(){},c=function(){function a(){}return a.prototype.addEventListener=a.prototype.on,a.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},this._callbacks[a]||(this._callbacks[a]=[]),this._callbacks[a].push(b),this},a.prototype.emit=function(){var a,b,c,d,e,f;if(d=arguments[0],a=2<=arguments.length?j.call(arguments,1):[],this._callbacks=this._callbacks||{},c=this._callbacks[d])for(e=0,f=c.length;f>e;e++)b=c[e],b.apply(this,a);return this},a.prototype.removeListener=a.prototype.off,a.prototype.removeAllListeners=a.prototype.off,a.prototype.removeEventListener=a.prototype.off,a.prototype.off=function(a,b){var c,d,e,f,g;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(d=this._callbacks[a],!d)return this;if(1===arguments.length)return delete this._callbacks[a],this;for(e=f=0,g=d.length;g>f;e=++f)if(c=d[e],c===b){d.splice(e,1);break}return this},a}(),a=function(a){function b(a,c){var e,f,g;if(this.element=a,this.version=b.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(b.instances.push(this),this.element.dropzone=this,e=null!=(g=b.optionsForElement(this.element))?g:{},this.options=d({},this.defaultOptions,e,null!=c?c:{}),this.options.forceFallback||!b.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(f=this.getExistingFallback())&&f.parentNode&&f.parentNode.removeChild(f),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=b.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=b.getElements(this.options.clickable,"clickable")),this.init()}var d,e;return l(b,a),b.prototype.Emitter=c,b.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],b.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(a,b){return b()},init:function(){return h},forceFallback:!1,fallback:function(){var a,c,d,e,f,g;for(this.element.className=""+this.element.className+" dz-browser-not-supported",g=this.element.getElementsByTagName("div"),e=0,f=g.length;f>e;e++)a=g[e],/(^| )dz-message($| )/.test(a.className)&&(c=a,a.className="dz-message");return c||(c=b.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(c)),d=c.getElementsByTagName("span")[0],d&&(d.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(a){var b,c,d;return b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height},c=a.width/a.height,b.optWidth=this.options.thumbnailWidth,b.optHeight=this.options.thumbnailHeight,null==b.optWidth&&null==b.optHeight?(b.optWidth=b.srcWidth,b.optHeight=b.srcHeight):null==b.optWidth?b.optWidth=c*b.optHeight:null==b.optHeight&&(b.optHeight=1/c*b.optWidth),d=b.optWidth/b.optHeight,a.height<b.optHeight||a.width<b.optWidth?(b.trgHeight=b.srcHeight,b.trgWidth=b.srcWidth):c>d?(b.srcHeight=a.height,b.srcWidth=b.srcHeight*d):(b.srcWidth=a.width,b.srcHeight=b.srcWidth/d),b.srcX=(a.width-b.srcWidth)/2,b.srcY=(a.height-b.srcHeight)/2,b},drop:function(a){return this.element.classList.remove("dz-drag-hover")},dragstart:h,dragend:function(a){return this.element.classList.remove("dz-drag-hover")},dragenter:function(a){return this.element.classList.add("dz-drag-hover")},dragover:function(a){return this.element.classList.add("dz-drag-hover")},dragleave:function(a){return this.element.classList.remove("dz-drag-hover")},paste:h,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(a.previewElement=b.createElement(this.options.previewTemplate.trim()),a.previewTemplate=a.previewElement,this.previewsContainer.appendChild(a.previewElement),l=a.previewElement.querySelectorAll("[data-dz-name]"),f=0,i=l.length;i>f;f++)c=l[f],c.textContent=a.name;for(m=a.previewElement.querySelectorAll("[data-dz-size]"),g=0,j=m.length;j>g;g++)c=m[g],c.innerHTML=this.filesize(a.size);for(this.options.addRemoveLinks&&(a._removeLink=b.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),a.previewElement.appendChild(a._removeLink)),d=function(c){return function(d){return d.preventDefault(),d.stopPropagation(),a.status===b.UPLOADING?b.confirm(c.options.dictCancelUploadConfirmation,function(){return c.removeFile(a)}):c.options.dictRemoveFileConfirmation?b.confirm(c.options.dictRemoveFileConfirmation,function(){return c.removeFile(a)}):c.removeFile(a)}}(this),n=a.previewElement.querySelectorAll("[data-dz-remove]"),o=[],h=0,k=n.length;k>h;h++)e=n[h],o.push(e.addEventListener("click",d));return o}},removedfile:function(a){var b;return a.previewElement&&null!=(b=a.previewElement)&&b.parentNode.removeChild(a.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(a,b){var c,d,e,f,g;if(a.previewElement){for(a.previewElement.classList.remove("dz-file-preview"),a.previewElement.classList.add("dz-image-preview"),f=a.previewElement.querySelectorAll("[data-dz-thumbnail]"),g=[],d=0,e=f.length;e>d;d++)c=f[d],c.alt=a.name,g.push(c.src=b);return g}},error:function(a,b){var c,d,e,f,g;if(a.previewElement){for(a.previewElement.classList.add("dz-error"),"String"!=typeof b&&b.error&&(b=b.error),f=a.previewElement.querySelectorAll("[data-dz-errormessage]"),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.textContent=b);return g}},errormultiple:h,processing:function(a){return a.previewElement&&(a.previewElement.classList.add("dz-processing"),a._removeLink)?a._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:h,uploadprogress:function(a,b,c){var d,e,f,g,h;if(a.previewElement){for(g=a.previewElement.querySelectorAll("[data-dz-uploadprogress]"),h=[],e=0,f=g.length;f>e;e++)d=g[e],"PROGRESS"===d.nodeName?h.push(d.value=b):h.push(d.style.width=""+b+"%");return h}},totaluploadprogress:h,sending:h,sendingmultiple:h,success:function(a){return a.previewElement?a.previewElement.classList.add("dz-success"):void 0},successmultiple:h,canceled:function(a){return this.emit("error",a,"Upload canceled.")},canceledmultiple:h,complete:function(a){return a._removeLink?a._removeLink.textContent=this.options.dictRemoveFile:void 0},completemultiple:h,maxfilesexceeded:h,maxfilesreached:h,queuecomplete:h,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>â</span></div>\n  <div class="dz-error-mark"><span>â</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},d=function(){var a,b,c,d,e,f,g;for(d=arguments[0],c=2<=arguments.length?j.call(arguments,1):[],f=0,g=c.length;g>f;f++){b=c[f];for(a in b)e=b[a],d[a]=e}return d},b.prototype.getAcceptedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted&&e.push(a);return e},b.prototype.getRejectedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted||e.push(a);return e},b.prototype.getFilesWithStatus=function(a){var b,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.status===a&&f.push(b);return f},b.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(b.QUEUED)},b.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(b.UPLOADING)},b.prototype.getActiveFiles=function(){var a,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)a=e[c],(a.status===b.UPLOADING||a.status===b.QUEUED)&&f.push(a);return f},b.prototype.init=function(){var a,c,d,e,f,g,h;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(b.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(d=function(a){return function(){return a.hiddenFileInput&&document.body.removeChild(a.hiddenFileInput),a.hiddenFileInput=document.createElement("input"),a.hiddenFileInput.setAttribute("type","file"),(null==a.options.maxFiles||a.options.maxFiles>1)&&a.hiddenFileInput.setAttribute("multiple","multiple"),a.hiddenFileInput.className="dz-hidden-input",null!=a.options.acceptedFiles&&a.hiddenFileInput.setAttribute("accept",a.options.acceptedFiles),null!=a.options.capture&&a.hiddenFileInput.setAttribute("capture",a.options.capture),a.hiddenFileInput.style.visibility="hidden",a.hiddenFileInput.style.position="absolute",a.hiddenFileInput.style.top="0",a.hiddenFileInput.style.left="0",a.hiddenFileInput.style.height="0",a.hiddenFileInput.style.width="0",document.body.appendChild(a.hiddenFileInput),a.hiddenFileInput.addEventListener("change",function(){var b,c,e,f;if(c=a.hiddenFileInput.files,c.length)for(e=0,f=c.length;f>e;e++)b=c[e],a.addFile(b);return d()})}}(this))(),this.URL=null!=(g=window.URL)?g:window.webkitURL,h=this.events,e=0,f=h.length;f>e;e++)a=h[e],this.on(a,this.options[a]);return this.on("uploadprogress",function(a){return function(){return a.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(a){return function(){return a.updateTotalUploadProgress()}}(this)),this.on("canceled",function(a){return function(b){return a.emit("complete",b)}}(this)),this.on("complete",function(a){return function(b){return 0===a.getUploadingFiles().length&&0===a.getQueuedFiles().length?setTimeout(function(){return a.emit("queuecomplete")},0):void 0}}(this)),c=function(a){return a.stopPropagation(),a.preventDefault?a.preventDefault():a.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(a){return function(b){return a.emit("dragstart",b)}}(this),dragenter:function(a){return function(b){return c(b),a.emit("dragenter",b)}}(this),dragover:function(a){return function(b){var d;try{d=b.dataTransfer.effectAllowed}catch(e){}return b.dataTransfer.dropEffect="move"===d||"linkMove"===d?"move":"copy",c(b),a.emit("dragover",b)}}(this),dragleave:function(a){return function(b){return a.emit("dragleave",b)}}(this),drop:function(a){return function(b){return c(b),a.drop(b)}}(this),dragend:function(a){return function(b){return a.emit("dragend",b)}}(this)}}],this.clickableElements.forEach(function(a){return function(c){return a.listeners.push({element:c,events:{click:function(d){return c!==a.element||d.target===a.element||b.elementInside(d.target,a.element.querySelector(".dz-message"))?a.hiddenFileInput.click():void 0}}})}}(this)),this.enable(),this.options.init.call(this)},b.prototype.destroy=function(){var a;return this.disable(),this.removeAllFiles(!0),(null!=(a=this.hiddenFileInput)?a.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,b.instances.splice(b.instances.indexOf(this),1)},b.prototype.updateTotalUploadProgress=function(){var a,b,c,d,e,f,g,h;if(d=0,c=0,a=this.getActiveFiles(),a.length){for(h=this.getActiveFiles(),f=0,g=h.length;g>f;f++)b=h[f],d+=b.upload.bytesSent,c+=b.upload.total;e=100*d/c}else e=100;return this.emit("totaluploadprogress",e,c,d)},b.prototype._getParamName=function(a){return"function"==typeof this.options.paramName?this.options.paramName(a):""+this.options.paramName+(this.options.uploadMultiple?"["+a+"]":"")},b.prototype.getFallbackForm=function(){var a,c,d,e;return(a=this.getExistingFallback())?a:(d='<div class="dz-fallback">',this.options.dictFallbackText&&(d+="<p>"+this.options.dictFallbackText+"</p>"),d+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',c=b.createElement(d),"FORM"!==this.element.tagName?(e=b.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),e.appendChild(c)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=e?e:c)},b.prototype.getExistingFallback=function(){var a,b,c,d,e,f;for(b=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],/(^| )fallback($| )/.test(b.className))return b},f=["div","form"],d=0,e=f.length;e>d;d++)if(c=f[d],a=b(this.element.getElementsByTagName(c)))return a},b.prototype.setupEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.addEventListener(b,c,!1));return e}());return g},b.prototype.removeEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.removeEventListener(b,c,!1));return e}());return g},b.prototype.disable=function(){var a,b,c,d,e;for(this.clickableElements.forEach(function(a){return a.classList.remove("dz-clickable")}),this.removeEventListeners(),d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.cancelUpload(a));return e},b.prototype.enable=function(){return this.clickableElements.forEach(function(a){return a.classList.add("dz-clickable")}),this.setupEventListeners()},b.prototype.filesize=function(a){var b;return a>=109951162777.6?(a/=109951162777.6,b="TiB"):a>=107374182.4?(a/=107374182.4,b="GiB"):a>=104857.6?(a/=104857.6,b="MiB"):a>=102.4?(a/=102.4,b="KiB"):(a=10*a,b="b"),"<strong>"+Math.round(a)/10+"</strong> "+b},b.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},b.prototype.drop=function(a){var b,c;a.dataTransfer&&(this.emit("drop",a),b=a.dataTransfer.files,b.length&&(c=a.dataTransfer.items,c&&c.length&&null!=c[0].webkitGetAsEntry?this._addFilesFromItems(c):this.handleFiles(b)))},b.prototype.paste=function(a){var b,c;if(null!=(null!=a&&null!=(c=a.clipboardData)?c.items:void 0))return this.emit("paste",a),b=a.clipboardData.items,b.length?this._addFilesFromItems(b):void 0},b.prototype.handleFiles=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.addFile(b));return e},b.prototype._addFilesFromItems=function(a){var b,c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],null!=c.webkitGetAsEntry&&(b=c.webkitGetAsEntry())?b.isFile?f.push(this.addFile(c.getAsFile())):b.isDirectory?f.push(this._addFilesFromDirectory(b,b.name)):f.push(void 0):null!=c.getAsFile&&(null==c.kind||"file"===c.kind)?f.push(this.addFile(c.getAsFile())):f.push(void 0);return f},b.prototype._addFilesFromDirectory=function(a,b){var c,d;return c=a.createReader(),d=function(a){return function(c){var d,e,f;for(e=0,f=c.length;f>e;e++)d=c[e],d.isFile?d.file(function(c){return a.options.ignoreHiddenFiles&&"."===c.name.substring(0,1)?void 0:(c.fullPath=""+b+"/"+c.name,a.addFile(c))}):d.isDirectory&&a._addFilesFromDirectory(d,""+b+"/"+d.name)}}(this),c.readEntries(d,function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(a):void 0})},b.prototype.accept=function(a,c){return a.size>1024*this.options.maxFilesize*1024?c(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(a.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):b.isValidFile(a,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(c(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",a)):this.options.accept.call(this,a,c):c(this.options.dictInvalidFileType)},b.prototype.addFile=function(a){return a.upload={progress:0,total:a.size,bytesSent:0},this.files.push(a),a.status=b.ADDED,this.emit("addedfile",a),this._enqueueThumbnail(a),this.accept(a,function(b){return function(c){return c?(a.accepted=!1,b._errorProcessing([a],c)):(a.accepted=!0,b.options.autoQueue&&b.enqueueFile(a)),b._updateMaxFilesReachedClass()}}(this))},b.prototype.enqueueFiles=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)b=a[c],this.enqueueFile(b);return null},b.prototype.enqueueFile=function(a){if(a.status!==b.ADDED||a.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return a.status=b.QUEUED,this.options.autoProcessQueue?setTimeout(function(a){return function(){return a.processQueue()}}(this),0):void 0},b.prototype._thumbnailQueue=[],b.prototype._processingThumbnail=!1,b.prototype._enqueueThumbnail=function(a){return this.options.createImageThumbnails&&a.type.match(/image.*/)&&a.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(a),setTimeout(function(a){return function(){return a._processThumbnailQueue()}}(this),0)):void 0},b.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(a){return function(){return a._processingThumbnail=!1,a._processThumbnailQueue()}}(this)))},b.prototype.removeFile=function(a){return a.status===b.UPLOADING&&this.cancelUpload(a),this.files=i(this.files,a),this.emit("removedfile",a),0===this.files.length?this.emit("reset"):void 0},b.prototype.removeAllFiles=function(a){var c,d,e,f;for(null==a&&(a=!1),f=this.files.slice(),d=0,e=f.length;e>d;d++)c=f[d],(c.status!==b.UPLOADING||a)&&this.removeFile(c);return null},b.prototype.createThumbnail=function(a,b){var c;return c=new FileReader,c.onload=function(d){return function(){var e;return"image/svg+xml"===a.type?(d.emit("thumbnail",a,c.result),void(null!=b&&b())):(e=document.createElement("img"),e.onload=function(){var c,f,h,i,j,k,l,m;return a.width=e.width,a.height=e.height,h=d.options.resize.call(d,a),null==h.trgWidth&&(h.trgWidth=h.optWidth),null==h.trgHeight&&(h.trgHeight=h.optHeight),c=document.createElement("canvas"),f=c.getContext("2d"),c.width=h.trgWidth,c.height=h.trgHeight,g(f,e,null!=(j=h.srcX)?j:0,null!=(k=h.srcY)?k:0,h.srcWidth,h.srcHeight,null!=(l=h.trgX)?l:0,null!=(m=h.trgY)?m:0,h.trgWidth,h.trgHeight),i=c.toDataURL("image/png"),d.emit("thumbnail",a,i),null!=b?b():void 0},e.src=c.result)}}(this),c.readAsDataURL(a)},b.prototype.processQueue=function(){var a,b,c,d;if(b=this.options.parallelUploads,c=this.getUploadingFiles().length,a=c,!(c>=b)&&(d=this.getQueuedFiles(),d.length>0)){if(this.options.uploadMultiple)return this.processFiles(d.slice(0,b-c));for(;b>a;){if(!d.length)return;this.processFile(d.shift()),a++}}},b.prototype.processFile=function(a){return this.processFiles([a])},b.prototype.processFiles=function(a){var c,d,e;for(d=0,e=a.length;e>d;d++)c=a[d],c.processing=!0,c.status=b.UPLOADING,this.emit("processing",c);return this.options.uploadMultiple&&this.emit("processingmultiple",a),this.uploadFiles(a)},b.prototype._getFilesWithXhr=function(a){var b,c;return c=function(){var c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.xhr===a&&f.push(b);return f}.call(this)},b.prototype.cancelUpload=function(a){var c,d,e,f,g,h,i;if(a.status===b.UPLOADING){for(d=this._getFilesWithXhr(a.xhr),e=0,g=d.length;g>e;e++)c=d[e],c.status=b.CANCELED;for(a.xhr.abort(),f=0,h=d.length;h>f;f++)c=d[f],this.emit("canceled",c);this.options.uploadMultiple&&this.emit("canceledmultiple",d)}else((i=a.status)===b.ADDED||i===b.QUEUED)&&(a.status=b.CANCELED,this.emit("canceled",a),this.options.uploadMultiple&&this.emit("canceledmultiple",[a]));return this.options.autoProcessQueue?this.processQueue():void 0},e=function(){var a,b;return b=arguments[0],a=2<=arguments.length?j.call(arguments,1):[],"function"==typeof b?b.apply(this,a):b},b.prototype.uploadFile=function(a){return this.uploadFiles([a])},b.prototype.uploadFiles=function(a){var c,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;for(w=new XMLHttpRequest,x=0,B=a.length;B>x;x++)c=a[x],c.xhr=w;p=e(this.options.method,a),u=e(this.options.url,a),w.open(p,u,!0),w.withCredentials=!!this.options.withCredentials,s=null,g=function(b){return function(){var d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(b._errorProcessing(a,s||b.options.dictResponseError.replace("{{statusCode}}",w.status),w));return f}}(this),t=function(b){return function(d){var e,f,g,h,i,j,k,l,m;if(null!=d)for(f=100*d.loaded/d.total,g=0,j=a.length;j>g;g++)c=a[g],c.upload={progress:f,total:d.total,bytesSent:d.loaded};else{for(e=!0,f=100,h=0,k=a.length;k>h;h++)c=a[h],(100!==c.upload.progress||c.upload.bytesSent!==c.upload.total)&&(e=!1),c.upload.progress=f,c.upload.bytesSent=c.upload.total;if(e)return}for(m=[],i=0,l=a.length;l>i;i++)c=a[i],m.push(b.emit("uploadprogress",c,f,c.upload.bytesSent));return m}}(this),w.onload=function(c){return function(d){var e;if(a[0].status!==b.CANCELED&&4===w.readyState){if(s=w.responseText,w.getResponseHeader("content-type")&&~w.getResponseHeader("content-type").indexOf("application/json"))try{s=JSON.parse(s)}catch(f){d=f,s="Invalid JSON response from server."}return t(),200<=(e=w.status)&&300>e?c._finished(a,s,d):g()}}}(this),w.onerror=function(c){return function(){return a[0].status!==b.CANCELED?g():void 0}}(this),r=null!=(G=w.upload)?G:w,r.onprogress=t,j={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&d(j,this.options.headers);for(h in j)i=j[h],w.setRequestHeader(h,i);if(f=new FormData,this.options.params){H=this.options.params;for(o in H)v=H[o],f.append(o,v)}for(y=0,C=a.length;C>y;y++)c=a[y],this.emit("sending",c,w,f);if(this.options.uploadMultiple&&this.emit("sendingmultiple",a,w,f),"FORM"===this.element.tagName)for(I=this.element.querySelectorAll("input, textarea, select, button"),z=0,D=I.length;D>z;z++)if(l=I[z],m=l.getAttribute("name"),n=l.getAttribute("type"),"SELECT"===l.tagName&&l.hasAttribute("multiple"))for(J=l.options,A=0,E=J.length;E>A;A++)q=J[A],q.selected&&f.append(m,q.value);else(!n||"checkbox"!==(K=n.toLowerCase())&&"radio"!==K||l.checked)&&f.append(m,l.value);for(k=F=0,L=a.length-1;L>=0?L>=F:F>=L;k=L>=0?++F:--F)f.append(this._getParamName(k),a[k],a[k].name);return w.send(f)},b.prototype._finished=function(a,c,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=b.SUCCESS,this.emit("success",e,c,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("successmultiple",a,c,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},b.prototype._errorProcessing=function(a,c,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=b.ERROR,this.emit("error",e,c,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("errormultiple",a,c,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},b}(c),a.version="3.12.0",a.options={},a.optionsForElement=function(b){return b.getAttribute("id")?a.options[d(b.getAttribute("id"))]:void 0},a.instances=[],a.forElement=function(a){if("string"==typeof a&&(a=document.querySelector(a)),null==(null!=a?a.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return a.dropzone},a.autoDiscover=!0,a.discover=function(){var b,c,d,e,f,g;for(document.querySelectorAll?d=document.querySelectorAll(".dropzone"):(d=[],b=function(a){var b,c,e,f;for(f=[],c=0,e=a.length;e>c;c++)b=a[c],/(^| )dropzone($| )/.test(b.className)?f.push(d.push(b)):f.push(void 0);return f},b(document.getElementsByTagName("div")),b(document.getElementsByTagName("form"))),g=[],e=0,f=d.length;f>e;e++)c=d[e],a.optionsForElement(c)!==!1?g.push(new a(c)):g.push(void 0);return g},a.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],a.isBrowserSupported=function(){var b,c,d,e,f;if(b=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(f=a.blacklistedBrowsers,d=0,e=f.length;e>d;d++)c=f[d],c.test(navigator.userAgent)&&(b=!1);else b=!1;else b=!1;return b},i=function(a,b){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],c!==b&&f.push(c);return f},d=function(a){return a.replace(/[\-_](\w)/g,function(a){return a.charAt(1).toUpperCase()})},a.createElement=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.childNodes[0]},a.elementInside=function(a,b){if(a===b)return!0;for(;a=a.parentNode;)if(a===b)return!0;return!1},a.getElement=function(a,b){var c;if("string"==typeof a?c=document.querySelector(a):null!=a.nodeType&&(c=a),null==c)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");return c},a.getElements=function(a,b){var c,d,e,f,g,h,i,j;if(a instanceof Array){e=[];try{for(f=0,h=a.length;h>f;f++)d=a[f],e.push(this.getElement(d,b))}catch(k){c=k,e=null}}else if("string"==typeof a)for(e=[],j=document.querySelectorAll(a),g=0,i=j.length;i>g;g++)d=j[g],e.push(d);else null!=a.nodeType&&(e=[a]);if(null==e||!e.length)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return e},a.confirm=function(a,b,c){return window.confirm(a)?b():null!=c?c():void 0},a.isValidFile=function(a,b){var c,d,e,f,g;if(!b)return!0;for(b=b.split(","),d=a.type,c=d.replace(/\/.*$/,""),f=0,g=b.length;g>f;f++)if(e=b[f],e=e.trim(),"."===e.charAt(0)){if(-1!==a.name.toLowerCase().indexOf(e.toLowerCase(),a.name.length-e.length))return!0}else if(/\/\*$/.test(e)){if(c===e.replace(/\/.*$/,""))return!0}else if(d===e)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(b){return this.each(function(){return new a(this,b)})}),"undefined"!=typeof b&&null!==b?b.exports=a:window.Dropzone=a,a.ADDED="added",a.QUEUED="queued",a.ACCEPTED=a.QUEUED,a.UPLOADING="uploading",a.PROCESSING=a.UPLOADING,a.CANCELED="canceled",a.ERROR="error",a.SUCCESS="success",f=function(a){var b,c,d,e,f,g,h,i,j,k;for(h=a.naturalWidth,g=a.naturalHeight,c=document.createElement("canvas"),c.width=1,c.height=g,d=c.getContext("2d"),d.drawImage(a,0,0),e=d.getImageData(0,0,1,g).data,k=0,f=g,i=g;i>k;)b=e[4*(i-1)+3],0===b?f=i:k=i,i=f+k>>1;return j=i/g,0===j?1:j},g=function(a,b,c,d,e,g,h,i,j,k){var l;return l=f(b),a.drawImage(b,c,d,e,g,h,i,j,k/l)},e=function(a,b){var c,d,e,f,g,h,i,j,k;if(e=!1,k=!0,d=a.document,j=d.documentElement,c=d.addEventListener?"addEventListener":"attachEvent",i=d.addEventListener?"removeEventListener":"detachEvent",h=d.addEventListener?"":"on",f=function(c){return"readystatechange"!==c.type||"complete"===d.readyState?(("load"===c.type?a:d)[i](h+c.type,f,!1),!e&&(e=!0)?b.call(a,c.type||c):void 0):void 0},g=function(){var a;try{j.doScroll("left")}catch(b){return a=b,void setTimeout(g,50)}return f("poll")},"complete"!==d.readyState){if(d.createEventObject&&j.doScroll){try{k=!a.frameElement}catch(l){}k&&g()}return d[c](h+"DOMContentLoaded",f,!1),d[c](h+"readystatechange",f,!1),a[c](h+"load",f,!1)}},a._autoDiscoverFunction=function(){return a.autoDiscover?a.discover():void 0},e(window,a._autoDiscoverFunction)}).call(this)}),"object"==typeof exports?module.exports=a("dropzone"):"function"==typeof define&&define.amd?define([],function(){return a("dropzone")}):this.Dropzone=a("dropzone")}(),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.yes=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d,e,f,g,h,i=function(a,b){
function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j={}.hasOwnProperty;g=a("./shapes/bitsMap"),f=a("./transit"),e=a("./swirl"),h=a("./h"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.skipProps={childOptions:1},b.prototype.defaults={count:5,degree:360,opacity:1,randomAngle:0,randomRadius:0,x:100,y:100,shiftX:0,shiftY:0,easing:"Linear.None",radius:{25:75},radiusX:void 0,radiusY:void 0,angle:0,size:null,sizeGap:0,duration:600,delay:0,onStart:null,onComplete:null,onCompleteChain:null,onUpdate:null,isResetAngles:!1},b.prototype.childDefaults={radius:{7:0},radiusX:void 0,radiusY:void 0,angle:0,opacity:1,onStart:null,onComplete:null,onUpdate:null,points:3,duration:500,delay:0,repeat:0,yoyo:!1,easing:"Linear.None",type:"circle",fill:"deeppink",fillOpacity:1,isSwirl:!1,swirlSize:10,swirlFrequency:3,stroke:"transparent",strokeWidth:0,strokeOpacity:1,strokeDasharray:"",strokeDashoffset:"",strokeLinecap:null},b.prototype.optionsIntersection={radius:1,radiusX:1,radiusY:1,angle:1,opacity:1,onStart:1,onComplete:1,onUpdate:1},b.prototype.run=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(null!=a&&Object.keys(a).length){for((a.count||(null!=(j=a.childOptions)?j.count:void 0))&&this.h.warn("Sorry, count can not be changed on run"),this.extendDefaults(a),f=Object.keys(a.childOptions||{}),null==(b=this.o).childOptions&&(b.childOptions={}),c=d=0,h=f.length;h>d;c=++d)e=f[c],this.o.childOptions[e]=a.childOptions[e];for(g=this.transits.length;g--;)i=this.getOption(g),null==(null!=(k=a.childOptions)?k.angle:void 0)&&null==a.angleShift?i.angle=this.transits[g].o.angle:a.isResetAngles||(i.angle=this.getBitAngle(i.angle,g)),this.transits[g].tuneNewOption(i,!0);this.timeline.recalcDuration()}if(this.props.randomAngle||this.props.randomRadius)for(g=this.transits.length;g--;)l=this.transits[g],this.props.randomAngle&&l.setProp({angleShift:this.generateRandomAngle()}),this.props.randomRadius&&l.setProp({radiusScale:this.generateRandomRadius()});return this.startTween()},b.prototype.createBit=function(){var a,b,c,d,f;for(this.transits=[],f=[],a=b=0,d=this.props.count;d>=0?d>b:b>d;a=d>=0?++b:--b)c=this.getOption(a),c.ctx=this.ctx,c.index=a,c.isDrawLess=c.isRunLess=c.isTweenLess=!0,this.props.randomAngle&&(c.angleShift=this.generateRandomAngle()),this.props.randomRadius&&(c.radiusScale=this.generateRandomRadius()),f.push(this.transits.push(new e(c)));return f},b.prototype.addBitOptions=function(){var a,b,c,d,e,f,g,h,i,j,k;for(g=this.props.count,this.degreeCnt=this.props.degree%360===0?g:g-1||1,j=this.props.degree/this.degreeCnt,h=this.transits,i=[],b=c=0,d=h.length;d>c;b=++c)k=h[b],a=k.props.angleShift||0,f=this.getSidePoint("start",b*j+a),e=this.getSidePoint("end",b*j+a),k.o.x=this.getDeltaFromPoints("x",f,e),k.o.y=this.getDeltaFromPoints("y",f,e),this.props.isResetAngles||(k.o.angle=this.getBitAngle(k.o.angle,b)),i.push(k.extendDefaults());return i},b.prototype.getBitAngle=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;return l=this.props.count,f=this.props.degree%360===0?l:l-1||1,n=this.props.degree/f,c=b*n+90,d=this.transits[b].props.angleShift||0,a="object"!=typeof a?a+c+d:(i=Object.keys(a),m=i[0],h=a[m],e=c+d,k=parseFloat(m)+e,j=parseFloat(h)+e,g={},g[k]=j,g)},b.prototype.getSidePoint=function(a,b){var c,d;return d=this.getSideRadius(a),c=this.h.getRadialPoint({radius:d.radius,radiusX:d.radiusX,radiusY:d.radiusY,angle:b,center:{x:this.props.center,y:this.props.center}})},b.prototype.getSideRadius=function(a){return{radius:this.getRadiusByKey("radius",a),radiusX:this.getRadiusByKey("radiusX",a),radiusY:this.getRadiusByKey("radiusY",a)}},b.prototype.getRadiusByKey=function(a,b){return null!=this.deltas[a]?this.deltas[a][b]:null!=this.props[a]?this.props[a]:void 0},b.prototype.getDeltaFromPoints=function(a,b,c){var d;return d={},b[a]===c[a]?d=b[a]:(d[b[a]]=c[a],d)},b.prototype.draw=function(a){return this.drawEl()},b.prototype.isNeedsTransform=function(){return this.isPropChanged("shiftX")||this.isPropChanged("shiftY")||this.isPropChanged("angle")},b.prototype.fillTransform=function(){return"rotate("+this.props.angle+"deg) translate("+this.props.shiftX+", "+this.props.shiftY+")"},b.prototype.createTween=function(){var a,c;for(b.__super__.createTween.apply(this,arguments),a=this.transits.length,c=[];a--;)c.push(this.timeline.add(this.transits[a].tween));return c},b.prototype.calcSize=function(){var a,b,c,d,e,f,g;for(c=-1,f=this.transits,a=b=0,d=f.length;d>b;a=++b)g=f[a],g.calcSize(),c<g.props.size&&(c=g.props.size);return e=this.calcMaxRadius(),this.props.size=c+2*e,this.props.size+=2*this.props.sizeGap,this.props.center=this.props.size/2,this.addBitOptions()},b.prototype.getOption=function(a){var b,c,d,e;for(e={},c=Object.keys(this.childDefaults),d=c.length;d--;)b=c[d],e[b]=this.getPropByMod({key:b,i:a,from:this.o.childOptions}),this.optionsIntersection[b]?null==e[b]&&(e[b]=this.getPropByMod({key:b,i:a,from:this.childDefaults})):(null==e[b]&&(e[b]=this.getPropByMod({key:b,i:a,from:this.o})),null==e[b]&&(e[b]=this.getPropByMod({key:b,i:a,from:this.childDefaults})));return e},b.prototype.getPropByMod=function(a){var b,c;return b=null!=(c=a.from||this.o.childOptions)?c[a.key]:void 0,this.h.isArray(b)?b[a.i%b.length]:b},b.prototype.generateRandomAngle=function(a){var b,c;return c=parseFloat(this.props.randomAngle),b=c>1?1:0>c?0:void 0,this.h.rand(0,c?360*c:180)},b.prototype.generateRandomRadius=function(a){var b,c,d;return c=parseFloat(this.props.randomRadius),b=c>1?1:0>c?0:void 0,d=c?100*(1-c):50,this.h.rand(d,100)/100},b.prototype.then=function(a){return this.h.error('Burst\'s "then" method is under consideration, you can vote for it in github repo issues'),this},b}(f),b.exports=d},{"./h":6,"./shapes/bitsMap":12,"./swirl":22,"./transit":23}],2:[function(a,b,c){(function(c){var d,e,f,g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};f=a("../h"),d=function(){function a(a){return this.vars(),this.generate}return a.prototype.vars=function(){return this.generate=f.bind(this.generate,this)},a.prototype.generate=function(a,b,d,e){var f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;if(arguments.length<4)return this.error("Bezier function expects 4 arguments");for(w=x=0;4>x;w=++x)if(o=arguments[w],"number"!=typeof o||isNaN(o)||!isFinite(o))return this.error("Bezier function expects 4 arguments");return 0>a||a>1||0>d||d>1?this.error("Bezier x values should be > 0 and < 1"):(j=4,k=.001,m=1e-7,l=10,z=11,y=1/(z-1),t=g.call(c,"Float32Array")>=0,f=function(a,b){return 1-3*b+3*a},h=function(a,b){return 3*b-6*a},i=function(a){return 3*a},q=function(a,b,c){return((f(b,c)*a+h(b,c))*a+i(b))*a},u=function(a,b,c){return 3*f(b,c)*a*a+2*h(b,c)*a+i(b)},B=function(b,c){var e,f;for(w=0;j>w;){if(e=u(c,a,d),0===e)return c;f=q(c,a,d)-b,c-=f/e,++w}return c},r=function(){for(w=0;z>w;)A[w]=q(w*y,a,d),++w},p=function(b,c,e){var f,g,h;for(g=void 0,f=void 0,w=0;f=c+(e-c)/2,g=q(f,a,d)-b,g>0?e=f:c=f,h=Math.abs(g)>m,h&&++w<l;);return f},v=function(b){var c,e,f,g,h,i,j;for(i=0,c=1,j=z-1;c!==j&&A[c]<=b;)i+=y,++c;return--c,e=A[c+1]-A[c],f=(b-A[c])/e,g=i+f*y,h=u(g,a,d),h>=k?B(b,g):0===h?g:p(b,i,i+y)},C=function(){var c;return c=!0,a!==b||d!==e?r():void 0},A=t?new Float32Array(z):new Array(z),n=!1,s=function(c){return n||C(),a===b&&d===e?c:0===c?0:1===c?1:q(v(c),b,e)},D="bezier("+[a,b,d,e]+")",s.toStr=function(){return D},s)},a.prototype.error=function(a){return f.error(a)},a}(),e=new d,b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../h":6}],3:[function(a,b,c){var d,e,f,g,h,i;f=a("./bezier-easing"),e=a("./path-easing"),i=a("./mix"),h=a("../h"),d=function(){function a(){}return a.prototype.bezier=f,a.prototype.PathEasing=e,a.prototype.path=new e("creator").create,a.prototype.inverse=function(a){return 1-a},a.prototype.linear={none:function(a){return a}},a.prototype.ease={"in":f.apply(a,[.42,0,1,1]),out:f.apply(a,[0,0,.58,1]),inout:f.apply(a,[.42,0,.58,1])},a.prototype.quad={"in":function(a){return a*a},out:function(a){return a*(2-a)},inout:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}},a.prototype.cubic={"in":function(a){return a*a*a},out:function(a){return--a*a*a+1},inout:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)}},a.prototype.quart={"in":function(a){return a*a*a*a},out:function(a){return 1- --a*a*a*a},inout:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},a.prototype.quint={"in":function(a){return a*a*a*a*a},out:function(a){return--a*a*a*a*a+1},inout:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},a.prototype.sin={"in":function(a){return 1-Math.cos(a*Math.PI/2)},out:function(a){return Math.sin(a*Math.PI/2)},inout:function(a){return.5*(1-Math.cos(Math.PI*a))}},a.prototype.expo={"in":function(a){return 0===a?0:Math.pow(1024,a-1)},out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},inout:function(a){return 0===a?0:1===a?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},a.prototype.circ={"in":function(a){return 1-Math.sqrt(1-a*a)},out:function(a){return Math.sqrt(1- --a*a)},inout:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},a.prototype.back={"in":function(a){var b;return b=1.70158,a*a*((b+1)*a-b)},out:function(a){var b;return b=1.70158,--a*a*((b+1)*a+b)+1},inout:function(a){var b;return b=2.5949095,(a*=2)<1?.5*a*a*((b+1)*a-b):.5*((a-=2)*a*((b+1)*a+b)+2)}},a.prototype.elastic={"in":function(a){var b,c,d;return d=void 0,c=.4,0===a?0:1===a?1:(b=1,d=c/4,-(b*Math.pow(2,10*(a-=1))*Math.sin(2*(a-d)*Math.PI/c)))},out:function(a){var b,c,d;return d=void 0,c=.4,0===a?0:1===a?1:(b=1,d=c/4,b*Math.pow(2,-10*a)*Math.sin(2*(a-d)*Math.PI/c)+1)},inout:function(a){var b,c,d;return d=void 0,c=.4,0===a?0:1===a?1:(b=1,d=c/4,(a*=2)<1?-.5*b*Math.pow(2,10*(a-=1))*Math.sin(2*(a-d)*Math.PI/c):b*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-d)*Math.PI/c)*.5+1)}},a.prototype.bounce={"in":function(a){return 1-g.bounce.out(1-a)},out:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},inout:function(a){return.5>a?.5*g.bounce["in"](2*a):.5*g.bounce.out(2*a-1)+.5}},a.prototype.parseEasing=function(a){var b,c;return c=typeof a,"string"===c?"m"===a.charAt(0).toLowerCase()?this.path(a):(a=this._splitEasing(a),b=this[a[0]],b?b[a[1]]:(h.error('Easing with name "'+a[0]+'" was not found, fallback to "linear.none" instead'),this.linear.none)):h.isArray(a)?this.bezier.apply(this,a):a},a.prototype._splitEasing=function(a){var b,c,d;return"function"==typeof a?a:"string"==typeof a&&a.length?(d=a.split("."),b=d[0].toLowerCase()||"linear",c=d[1].toLowerCase()||"none",[b,c]):["linear","none"]},a}(),g=new d,g.mix=i(g),b.exports=g},{"../h":6,"./bezier-easing":2,"./mix":4,"./path-easing":5}],4:[function(a,b,c){var d,e,f,g,h,i,j=[].slice;e=null,h=function(a){return"number"==typeof a.value?a.value:e.parseEasing(a.value)},i=function(a,b){var c;return a.value=h(a),b.value=h(b),c=0,a.to<b.to&&(c=-1),a.to>b.to&&(c=1),c},f=function(a,b){var c,d,e,f,g;for(d=0,c=e=0,f=a.length;f>e&&(g=a[c],d=c,!(g.to>b));c=++e);return d},g=function(){var a;return a=1<=arguments.length?j.call(arguments,0):[],a.length>1?a=a.sort(i):a[0].value=h(a[0]),function(b){var c,d;return c=f(a,b),-1!==c?(d=a[c].value,c===a.length-1&&b>a[c].to?1:"function"==typeof d?d(b):d):void 0}},d=function(a){return e=a,g},b.exports=d},{}],5:[function(a,b,c){var d,e;e=a("../h"),d=function(){function a(a,b){if(this.o=null!=b?b:{},"creator"!==a){if(this.path=e.parsePath(a),null==this.path)return e.error("Error while parsing the path");this._vars(),this.path.setAttribute("d",this._normalizePath(this.path.getAttribute("d"))),this.pathLength=this.path.getTotalLength(),this.sample=e.bind(this.sample,this),this._hardSample=e.bind(this._hardSample,this),this._preSample()}}return a.prototype._vars=function(){return this._precompute=e.clamp(this.o.precompute||1450,100,1e4),this._step=1/this._precompute,this._rect=this.o.rect||100,this._approximateMax=this.o.approximateMax||5,this._eps=this.o.eps||.001,this._boundsPrevProgress=-1},a.prototype._preSample=function(){var a,b,c,d,e,f,g;for(this._samples=[],g=[],a=b=0,f=this._precompute;f>=0?f>=b:b>=f;a=f>=0?++b:--b)e=a*this._step,c=this.pathLength*e,d=this.path.getPointAtLength(c),g.push(this._samples[a]={point:d,length:c,progress:e});return g},a.prototype._findBounds=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;if(b===this._boundsPrevProgress)return this._prevBounds;for(null==this._boundsStartIndex&&(this._boundsStartIndex=0),h=a.length,this._boundsPrevProgress>b?(i=0,d="reverse"):(i=h,d="forward"),"forward"===d?(n=a[0],e=a[a.length-1]):(n=a[a.length-1],e=a[0]),f=g=l=this._boundsStartIndex,m=i;m>=l?m>g:g>m;f=m>=l?++g:--g){if(o=a[f],k=o.point.x/this._rect,j=b,"reverse"===d&&(c=k,k=j,j=c),!(j>k)){e=o;break}n=o,this._boundsStartIndex=f}return this._boundsPrevProgress=b,this._prevBounds={start:n,end:e}},a.prototype.sample=function(a){var b,c;return a=e.clamp(a,0,1),b=this._findBounds(this._samples,a),c=this._checkIfBoundsCloseEnough(a,b),null!=c?c:this._findApproximate(a,b.start,b.end)},a.prototype._checkIfBoundsCloseEnough=function(a,b){var c,d;return c=void 0,d=this._checkIfPointCloseEnough(a,b.start.point),null!=d?d:this._checkIfPointCloseEnough(a,b.end.point)},a.prototype._checkIfPointCloseEnough=function(a,b){return e.closeEnough(a,b.x/this._rect,this._eps)?this._resolveY(b):void 0},a.prototype._approximate=function(a,b,c){var d,e;return d=b.point.x-a.point.x,e=(c-a.point.x/this._rect)/(d/this._rect),a.length+e*(b.length-a.length)},a.prototype._findApproximate=function(a,b,c,d){var f,g,h,i,j;return null==d&&(d=this._approximateMax),f=this._approximate(b,c,a),i=this.path.getPointAtLength(f),j=i.x/this._rect,e.closeEnough(a,j,this._eps)?this._resolveY(i):--d<1?this._resolveY(i):(h={point:i,length:f},g=j>a?[a,b,h,d]:[a,h,c,d],this._findApproximate.apply(this,g))},a.prototype._resolveY=function(a){return 1-a.y/this._rect},a.prototype._normalizePath=function(a){var b,c,d,e,f,g;return g=/[M|L|H|V|C|S|Q|T|A]/gim,e=a.split(g),e.shift(),b=a.match(g),f=0,e[f]=this._normalizeSegment(e[f]),c=e.length-1,e[c]=this._normalizeSegment(e[c],this._rect||100),d=this._joinNormalizedPath(b,e)},a.prototype._joinNormalizedPath=function(a,b){var c,d,e,f,g,h;for(g="",d=e=0,f=a.length;f>e;d=++e)c=a[d],h=0===d?"":" ",g+=""+h+c+b[d].trim();return g},a.prototype._normalizeSegment=function(a,b){var c,d,e,f,g,h,i,j,k,l;if(null==b&&(b=0),a=a.trim(),g=/(-|\+)?((\d+(\.(\d|\e(-|\+)?)+)?)|(\.?(\d|\e|(\-|\+))+))/gim,h=this._getSegmentPairs(a.match(g)),e=h[h.length-1],l=e[0],i=Number(l),i!==b)for(a="",e[0]=b,c=d=0,f=h.length;f>d;c=++d)j=h[c],k=0===c?"":" ",a+=""+k+j[0]+","+j[1];return a},a.prototype._getSegmentPairs=function(a){var b,c,d,f,g,h;for(a.length%2!==0&&e.error("Failed to parse the path - segment pairs are not even.",a),f=[],b=c=0,d=a.length;d>c;b=c+=2)h=a[b],g=[a[b],a[b+1]],f.push(g);return f},a.prototype.create=function(b,c){var d;return d=new a(b,c),d.sample.path=d.path,d.sample},a}(),b.exports=d},{"../h":6}],6:[function(a,b,c){var d,e;d=function(){function a(){this.vars()}return a.prototype.NS="http://www.w3.org/2000/svg",a.prototype.logBadgeCss="background:#3A0839;color:#FF512F;border-radius:5px; padding: 1px 5px 2px; border: 1px solid #FF512F;",a.prototype.shortColors={transparent:"rgba(0,0,0,0)",none:"rgba(0,0,0,0)",aqua:"rgb(0,255,255)",black:"rgb(0,0,0)",blue:"rgb(0,0,255)",fuchsia:"rgb(255,0,255)",gray:"rgb(128,128,128)",green:"rgb(0,128,0)",lime:"rgb(0,255,0)",maroon:"rgb(128,0,0)",navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",purple:"rgb(128,0,128)",red:"rgb(255,0,0)",silver:"rgb(192,192,192)",teal:"rgb(0,128,128)",white:"rgb(255,255,255)",yellow:"rgb(255,255,0)",orange:"rgb(255,128,0)"},a.prototype.chainOptionMap={duration:1,delay:1,repeat:1,easing:1,yoyo:1,onStart:1,onComplete:1,onCompleteChain:1,onUpdate:1,points:1},a.prototype.callbacksMap={onStart:1,onComplete:1,onCompleteChain:1,onUpdate:1},a.prototype.tweenOptionMap={duration:1,delay:1,repeat:1,easing:1,yoyo:1},a.prototype.posPropsMap={x:1,y:1,shiftX:1,shiftY:1,burstX:1,burstY:1,burstShiftX:1,burstShiftY:1},a.prototype.strokeDashPropsMap={strokeDasharray:1,strokeDashoffset:1},a.prototype.RAD_TO_DEG=180/Math.PI,a.prototype.vars=function(){var a;return this.prefix=this.getPrefix(),this.getRemBase(),this.isFF="moz"===this.prefix.lowercase,this.isIE="ms"===this.prefix.lowercase,a=navigator.userAgent,this.isOldOpera=a.match(/presto/gim),this.isSafari=a.indexOf("Safari")>-1,this.isChrome=a.indexOf("Chrome")>-1,this.isOpera=a.toLowerCase().indexOf("op")>-1,this.isChrome&&this.isSafari&&(this.isSafari=!1),a.match(/PhantomJS/gim)&&(this.isSafari=!1),this.isChrome&&this.isOpera&&(this.isChrome=!1),this.is3d=this.checkIf3d(),this.uniqIDs=-1,this.div=document.createElement("div"),document.body.appendChild(this.div)},a.prototype.cloneObj=function(a,b){var c,d,e,f;for(e=Object.keys(a),f={},c=e.length;c--;)d=e[c],null!=b?b[d]||(f[d]=a[d]):f[d]=a[d];return f},a.prototype.extend=function(a,b){var c,d;for(c in b)d=b[c],null==a[c]&&(a[c]=b[c]);return a},a.prototype.getRemBase=function(){var a,b;return a=document.querySelector("html"),b=getComputedStyle(a),this.remBase=parseFloat(b.fontSize)},a.prototype.clamp=function(a,b,c){return b>a?b:a>c?c:a},a.prototype.setPrefixedStyle=function(a,b,c,d){return b.match(/transform/gim)?(a.style[""+b]=c,a.style[""+this.prefix.css+b]=c):a.style[b]=c},a.prototype.style=function(a,b,c){var d,e,f,g;if("object"==typeof b){for(e=Object.keys(b),f=e.length,g=[];f--;)d=e[f],c=b[d],g.push(this.setPrefixedStyle(a,d,c));return g}return this.setPrefixedStyle(a,b,c)},a.prototype.prepareForLog=function(a){return a=Array.prototype.slice.apply(a),a.unshift("::"),a.unshift(this.logBadgeCss),a.unshift("%cmoÂ·js%c"),a},a.prototype.log=function(){return mojs.isDebug!==!1?console.log.apply(console,this.prepareForLog(arguments)):void 0},a.prototype.warn=function(){return mojs.isDebug!==!1?console.warn.apply(console,this.prepareForLog(arguments)):void 0},a.prototype.error=function(){return mojs.isDebug!==!1?console.error.apply(console,this.prepareForLog(arguments)):void 0},a.prototype.parseUnit=function(a){var b,c,d,e,f,g;return"number"==typeof a?f={unit:"px",isStrict:!1,value:a,string:a+"px"}:"string"==typeof a?(e=/px|%|rem|em|ex|cm|ch|mm|in|pt|pc|vh|vw|vmin/gim,g=null!=(d=a.match(e))?d[0]:void 0,c=!0,g||(g="px",c=!1),b=parseFloat(a),f={unit:g,isStrict:c,value:b,string:""+b+g}):a},a.prototype.bind=function(a,b){var c,d;return d=function(){var d,e;return d=Array.prototype.slice.call(arguments),e=c.concat(d),a.apply(b,e)},c=Array.prototype.slice.call(arguments,2),d},a.prototype.getRadialPoint=function(a){var b,c,d,e;return null==a&&(a={}),null!=a.radius&&null!=a.angle&&null!=a.center?(c=(a.angle-90)*(Math.PI/180),d=null!=a.radiusX?a.radiusX:a.radius,e=null!=a.radiusY?a.radiusY:a.radius,b={x:a.center.x+Math.cos(c)*d,y:a.center.y+Math.sin(c)*e}):void 0},a.prototype.getPrefix=function(){var a,b,c,d;return c=window.getComputedStyle(document.documentElement,""),d=Array.prototype.slice.call(c).join("").match(/-(moz|webkit|ms)-/),b=(d||""===c.OLink&&["","o"])[1],a="WebKit|Moz|MS|O".match(new RegExp("("+b+")","i"))[1],{dom:a,lowercase:b,css:"-"+b+"-",js:b[0].toUpperCase()+b.substr(1)}},a.prototype.strToArr=function(a){var b;return b=[],"number"!=typeof a||isNaN(a)?(a.trim().split(/\s+/gim).forEach(function(a){return function(c){return b.push(a.parseUnit(a.parseIfRand(c)))}}(this)),b):(b.push(this.parseUnit(a)),b)},a.prototype.calcArrDelta=function(a,b){var c,d,e,f,g;for(c=[],d=e=0,f=a.length;f>e;d=++e)g=a[d],c[d]=this.parseUnit(""+(b[d].value-a[d].value)+b[d].unit);return c},a.prototype.isArray=function(a){return a instanceof Array},a.prototype.normDashArrays=function(a,b){var c,d,e,f,g,h,i,j,k,l;if(c=a.length,d=b.length,c>d)for(i=c-d,l=b.length,f=g=0,j=i;j>=0?j>g:g>j;f=j>=0?++g:--g)e=f+l,b.push(this.parseUnit("0"+a[e].unit));else if(d>c)for(i=d-c,l=a.length,f=h=0,k=i;k>=0?k>h:h>k;f=k>=0?++h:--h)e=f+l,a.push(this.parseUnit("0"+b[e].unit));return[a,b]},a.prototype.makeColorObj=function(a){var b,c,d,e,f,g,h,i,j,k;return"#"===a[0]&&(j=/^#?([a-f\d]{1,2})([a-f\d]{1,2})([a-f\d]{1,2})$/i.exec(a),d={},j&&(g=2===j[1].length?j[1]:j[1]+j[1],e=2===j[2].length?j[2]:j[2]+j[2],c=2===j[3].length?j[3]:j[3]+j[3],d={r:parseInt(g,16),g:parseInt(e,16),b:parseInt(c,16),a:1})),"#"!==a[0]&&(f="r"===a[0]&&"g"===a[1]&&"b"===a[2],f&&(k=a),f||(k=this.shortColors[a]?this.shortColors[a]:(this.div.style.color=a,this.computedStyle(this.div).color)),h="^rgba?\\((\\d{1,3}),\\s?(\\d{1,3}),",i="\\s?(\\d{1,3}),?\\s?(\\d{1}|0?\\.\\d{1,})?\\)$",j=new RegExp(h+i,"gi").exec(k),d={},b=parseFloat(j[4]||1),j&&(d={r:parseInt(j[1],10),g:parseInt(j[2],10),b:parseInt(j[3],10),a:null==b||isNaN(b)?1:b})),d},a.prototype.computedStyle=function(a){return getComputedStyle(a)},a.prototype.capitalize=function(a){if("string"!=typeof a)throw Error("String expected - nothing to capitalize");return a.charAt(0).toUpperCase()+a.substring(1)},a.prototype.parseRand=function(a){var b,c,d;return c=a.split(/rand\(|\,|\)/),d=this.parseUnit(c[2]),b=this.rand(parseFloat(c[1]),parseFloat(c[2])),d.unit&&c[2].match(d.unit)?b+d.unit:b},a.prototype.parseStagger=function(a,b){var c,d,e,f,g,h;return h=a.split(/stagger\(|\)$/)[1].toLowerCase(),e=h.split(/(rand\(.*?\)|[^\(,\s]+)(?=\s*,|\s*$)/gim),h=e.length>3?(c=this.parseUnit(this.parseIfRand(e[1])),e[3]):(c=this.parseUnit(0),e[1]),h=this.parseIfRand(h),g=this.parseUnit(h),d=b*g.value+c.value,f=c.isStrict?c.unit:g.isStrict?g.unit:"",f?""+d+f:d},a.prototype.parseIfStagger=function(a,b){return"string"==typeof a&&a.match(/stagger/g)?this.parseStagger(a,b):a},a.prototype.parseIfRand=function(a){return"string"==typeof a&&a.match(/rand\(/)?this.parseRand(a):a},a.prototype.parseDelta=function(a,b){var c,d,e,f,g,h,i,j,k,l;if(j=Object.keys(b)[0],d=b[j],c={start:j},isNaN(parseFloat(j))&&!j.match(/rand\(/)){if("strokeLinecap"===a)return this.warn("Sorry, stroke-linecap property is not animatable yet, using the start("+j+") value instead",b),c;l=this.makeColorObj(j),f=this.makeColorObj(d),c={start:l,end:f,type:"color",delta:{r:f.r-l.r,g:f.g-l.g,b:f.b-l.b,a:f.a-l.a}}}else if("strokeDasharray"===a||"strokeDashoffset"===a){for(k=this.strToArr(j),e=this.strToArr(d),this.normDashArrays(k,e),g=h=0,i=k.length;i>h;g=++h)j=k[g],d=e[g],this.mergeUnits(j,d,a);c={start:k,end:e,delta:this.calcArrDelta(k,e),type:"array"}}else this.chainOptionMap[a]||(this.posPropsMap[a]?(d=this.parseUnit(this.parseIfRand(d)),j=this.parseUnit(this.parseIfRand(j)),this.mergeUnits(j,d,a),c={start:j,end:d,delta:d.value-j.value,type:"unit"}):(d=parseFloat(this.parseIfRand(d)),j=parseFloat(this.parseIfRand(j)),c={start:j,end:d,delta:d-j,type:"number"}));return c},a.prototype.mergeUnits=function(a,b,c){return!b.isStrict&&a.isStrict?(b.unit=a.unit,b.string=""+b.value+b.unit):b.isStrict&&!a.isStrict?(a.unit=b.unit,a.string=""+a.value+a.unit):b.isStrict&&a.isStrict&&b.unit!==a.unit?(a.unit=b.unit,a.string=""+a.value+a.unit,this.warn('Two different units were specified on "'+c+'" delta property, mo Â· js will fallback to end "'+b.unit+'" unit ')):void 0},a.prototype.rand=function(a,b){return Math.random()*(b-a)+a},a.prototype.isDOM=function(a){var b;return null==a?!1:(b="number"==typeof a.nodeType&&"string"==typeof a.nodeName,"object"==typeof a&&b)},a.prototype.getChildElements=function(a){var b,c,d;for(b=a.childNodes,c=[],d=b.length;d--;)1===b[d].nodeType&&c.unshift(b[d]);return c},a.prototype.delta=function(a,b){var c,d,e,f,g;return f=typeof a,g=typeof b,c="string"===f||"number"===f&&!isNaN(a),d="string"===g||"number"===g&&!isNaN(b),c&&d?(e={},e[a]=b,e):void this.error("delta method expects Strings or Numbers at input but got - "+a+", "+b)},a.prototype.getUniqID=function(){return++this.uniqIDs},a.prototype.parsePath=function(a){var b;return"string"==typeof a?"m"===a.charAt(0).toLowerCase()?(b=document.createElementNS(this.NS,"path"),b.setAttributeNS(null,"d",a),b):document.querySelector(a):a.style?a:void 0},a.prototype.closeEnough=function(a,b,c){return Math.abs(a-b)<c},a.prototype.checkIf3d=function(){var a,b,c,d;return a=document.createElement("div"),this.style(a,"transform","translateZ(0)"),c=a.style,b=this.prefix.css+"transform",d=null!=c[b]?c[b]:c.transform,""!==d},a}(),e=new d,b.exports=e},{}],7:[function(b,c,d){window.mojs={revision:"0.147.4",isDebug:!0,helpers:b("./h"),Bit:b("./shapes/bit"),bitsMap:b("./shapes/bitsMap"),Circle:b("./shapes/circle"),Cross:b("./shapes/cross"),Line:b("./shapes/line"),Rect:b("./shapes/rect"),Polygon:b("./shapes/polygon"),Equal:b("./shapes/equal"),Zigzag:b("./shapes/zigzag"),Burst:b("./burst"),Transit:b("./transit"),Swirl:b("./swirl"),Stagger:b("./stagger"),Spriter:b("./spriter"),MotionPath:b("./motion-path"),Tween:b("./tween/tween"),Timeline:b("./tween/timeline"),tweener:b("./tween/tweener"),easing:b("./easing/easing")},mojs.h=mojs.helpers,mojs.delta=mojs.h.delta,"function"==typeof a&&a.amd&&a("mojs",[],function(){return mojs}),"object"==typeof c&&"object"==typeof c.exports&&(c.exports=mojs)},{"./burst":1,"./easing/easing":3,"./h":6,"./motion-path":8,"./shapes/bit":11,"./shapes/bitsMap":12,"./shapes/circle":13,"./shapes/cross":14,"./shapes/equal":15,"./shapes/line":16,"./shapes/polygon":17,"./shapes/rect":18,"./shapes/zigzag":19,"./spriter":20,"./stagger":21,"./swirl":22,"./transit":23,"./tween/timeline":24,"./tween/tween":25,"./tween/tweener":26}],8:[function(a,b,c){var d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}};g=a("./h"),h=a("./vendor/resize"),f=a("./tween/tween"),e=a("./tween/timeline"),d=function(){function a(a){this.o=null!=a?a:{},this.calcHeight=i(this.calcHeight,this),this.vars()||this.createTween()}return a.prototype.defaults={path:null,curvature:{x:"75%",y:"50%"},isCompositeLayer:!0,delay:0,duration:1e3,easing:null,repeat:0,yoyo:!1,offsetX:0,offsetY:0,angleOffset:null,pathStart:0,pathEnd:1,motionBlur:0,transformOrigin:null,isAngle:!1,isReverse:!1,isRunLess:!1,isPresetPosition:!0,onStart:null,onComplete:null,onUpdate:null},a.prototype.vars=function(){return this.getScaler=g.bind(this.getScaler,this),this.resize=h,this.props=g.cloneObj(this.defaults),this.extendOptions(this.o),this.isMotionBlurReset=g.isSafari||g.isIE,this.isMotionBlurReset&&(this.props.motionBlur=0),this.history=[g.cloneObj(this.props)],this.postVars()},a.prototype.curveToPath=function(a){var b,c,d,e,f,h,i,j,k,l,m,n,o;return l=document.createElementNS(g.NS,"path"),o=a.start,k={x:o.x+a.shift.x,y:o.x+a.shift.y},c=a.curvature,i=a.shift.x,j=a.shift.y,n=Math.sqrt(i*i+j*j),m=n/100,b=Math.atan(j/i)*(180/Math.PI)+90,a.shift.x<0&&(b+=180),d=g.parseUnit(c.x),d="%"===d.unit?d.value*m:d.value,h=g.getRadialPoint({center:{x:o.x,y:o.y},radius:d,angle:b}),e=g.parseUnit(c.y),e="%"===e.unit?e.value*m:e.value,f=g.getRadialPoint({center:{x:h.x,y:h.y},radius:e,angle:b+90}),l.setAttribute("d","M"+o.x+","+o.y+" Q"+f.x+","+f.y+" "+k.x+","+k.y),l},a.prototype.postVars=function(){return this.props.pathStart=g.clamp(this.props.pathStart,0,1),this.props.pathEnd=g.clamp(this.props.pathEnd,this.props.pathStart,1),this.angle=0,this.speedX=0,this.speedY=0,this.blurX=0,this.blurY=0,this.prevCoords={},this.blurAmount=20,this.props.motionBlur=g.clamp(this.props.motionBlur,0,1),this.onUpdate=this.props.onUpdate,this.o.el?(this.el=this.parseEl(this.props.el),this.props.motionBlur>0&&this.createFilter(),this.path=this.getPath(),this.path.getAttribute("d")?(this.len=this.path.getTotalLength(),this.slicedLen=this.len*(this.props.pathEnd-this.props.pathStart),this.startLen=this.props.pathStart*this.len,this.fill=this.props.fill,null!=this.fill&&(this.container=this.parseEl(this.props.fill.container),this.fillRule=this.props.fill.fillRule||"all",this.getScaler(),null!=this.container)?(this.removeEvent(this.container,"onresize",this.getScaler),this.addEvent(this.container,"onresize",this.getScaler)):void 0):(g.error("Path has no coordinates to work with, aborting"),!0)):(g.error('Missed "el" option. It could be a selector, DOMNode or another module.'),!0)},a.prototype.addEvent=function(a,b,c){return a.addEventListener(b,c,!1)},a.prototype.removeEvent=function(a,b,c){return a.removeEventListener(b,c,!1)},a.prototype.createFilter=function(){var a,b;return a=document.createElement("div"),this.filterID="filter-"+g.getUniqID(),a.innerHTML='<svg id="svg-'+this.filterID+'"\n    style="visibility:hidden; width:0px; height:0px">\n  <filter id="'+this.filterID+'" y="-20" x="-20" width="40" height="40">\n    <feOffset\n      id="blur-offset" in="SourceGraphic"\n      dx="0" dy="0" result="offset2"></feOffset>\n    <feGaussianblur\n      id="blur" in="offset2"\n      stdDeviation="0,0" result="blur2"></feGaussianblur>\n    <feMerge>\n      <feMergeNode in="SourceGraphic"></feMergeNode>\n      <feMergeNode in="blur2"></feMergeNode>\n    </feMerge>\n  </filter>\n</svg>',b=a.querySelector("#svg-"+this.filterID),this.filter=b.querySelector("#blur"),this.filterOffset=b.querySelector("#blur-offset"),document.body.insertBefore(b,document.body.firstChild),this.el.style.filter="url(#"+this.filterID+")",this.el.style[g.prefix.css+"filter"]="url(#"+this.filterID+")"},a.prototype.parseEl=function(a){return"string"==typeof a?document.querySelector(a):a instanceof HTMLElement?a:null!=a.setProp?(this.isModule=!0,a):void 0},a.prototype.getPath=function(){var a;return a=g.parsePath(this.props.path),a?a:this.props.path.x||this.props.path.y?this.curveToPath({start:{x:0,y:0},shift:{x:this.props.path.x||0,y:this.props.path.y||0},curvature:{x:this.props.curvature.x||this.defaults.curvature.x,y:this.props.curvature.y||this.defaults.curvature.y}}):void 0},a.prototype.getScaler=function(){var a,b,c;switch(this.cSize={width:this.container.offsetWidth||0,height:this.container.offsetHeight||0},c=this.path.getPointAtLength(0),a=this.path.getPointAtLength(this.len),b={},this.scaler={},b.width=a.x>=c.x?a.x-c.x:c.x-a.x,b.height=a.y>=c.y?a.y-c.y:c.y-a.y,this.fillRule){case"all":return this.calcWidth(b),this.calcHeight(b);case"width":return this.calcWidth(b),this.scaler.y=this.scaler.x;case"height":return this.calcHeight(b),this.scaler.x=this.scaler.y}},a.prototype.calcWidth=function(a){return this.scaler.x=this.cSize.width/a.width,!isFinite(this.scaler.x)&&(this.scaler.x=1)},a.prototype.calcHeight=function(a){return this.scaler.y=this.cSize.height/a.height,!isFinite(this.scaler.y)&&(this.scaler.y=1)},a.prototype.run=function(a){var b,c,d;if(a){b=this.history[0];for(c in a)d=a[c],g.callbacksMap[c]||g.tweenOptionMap[c]?(g.warn('the property "'+c+'" property can not be overridden on run yet'),delete a[c]):this.history[0][c]=d;this.tuneOptions(a)}return this.startTween()},a.prototype.createTween=function(){return this.tween=new f({duration:this.props.duration,delay:this.props.delay,yoyo:this.props.yoyo,repeat:this.props.repeat,easing:this.props.easing,onStart:function(a){return function(){var b;return null!=(b=a.props.onStart)?b.apply(a):void 0}}(this),onComplete:function(a){return function(){var b;return a.props.motionBlur&&a.setBlur({blur:{x:0,y:0},offset:{x:0,y:0}}),null!=(b=a.props.onComplete)?b.apply(a):void 0}}(this),onUpdate:function(a){return function(b){return a.setProgress(b)}}(this),onFirstUpdateBackward:function(a){return function(){return a.history.length>1&&a.tuneOptions(a.history[0])}}(this)}),this.timeline=new e,this.timeline.add(this.tween),!this.props.isRunLess&&this.startTween(),this.props.isPresetPosition&&this.setProgress(0,!0)},a.prototype.startTween=function(){return setTimeout(function(a){return function(){var b;return null!=(b=a.timeline)?b.start():void 0}}(this),1)},a.prototype.setProgress=function(a,b){var c,d,e,f;return c=this.startLen+(this.props.isReverse?(1-a)*this.slicedLen:a*this.slicedLen),d=this.path.getPointAtLength(c),e=d.x+this.props.offsetX,f=d.y+this.props.offsetY,this._getCurrentAngle(d,c,a),this._setTransformOrigin(a),this._setTransform(e,f,a,b),
this.props.motionBlur&&this.makeMotionBlur(e,f)},a.prototype.setElPosition=function(a,b,c){var d,e,f,h;return f=0!==this.angle?"rotate("+this.angle+"deg)":"",e=this.props.isCompositeLayer&&g.is3d,d=e?"translateZ(0)":"",h="translate("+a+"px,"+b+"px) "+f+" "+d,g.setPrefixedStyle(this.el,"transform",h)},a.prototype.setModulePosition=function(a,b){return this.el.setProp({shiftX:a+"px",shiftY:b+"px",angle:this.angle}),this.el.draw()},a.prototype._getCurrentAngle=function(a,b,c){var d,e,f,h,i;return e="function"==typeof this.props.transformOrigin,this.props.isAngle||null!=this.props.angleOffset||e?(f=this.path.getPointAtLength(b-1),h=a.y-f.y,i=a.x-f.x,d=Math.atan(h/i),!isFinite(d)&&(d=0),this.angle=d*g.RAD_TO_DEG,"function"!=typeof this.props.angleOffset?this.angle+=this.props.angleOffset||0:this.angle=this.props.angleOffset.call(this,this.angle,c)):this.angle=0},a.prototype._setTransform=function(a,b,c,d){var e;return this.scaler&&(a*=this.scaler.x,b*=this.scaler.y),e=null,d||(e="function"==typeof this.onUpdate?this.onUpdate(c,{x:a,y:b,angle:this.angle}):void 0),this.isModule?this.setModulePosition(a,b):"string"!=typeof e?this.setElPosition(a,b,c):g.setPrefixedStyle(this.el,"transform",e)},a.prototype._setTransformOrigin=function(a){var b,c;return this.props.transformOrigin?(b="function"==typeof this.props.transformOrigin,c=b?this.props.transformOrigin(this.angle,a):this.props.transformOrigin,g.setPrefixedStyle(this.el,"transform-origin",c)):void 0},a.prototype.makeMotionBlur=function(a,b){var c,d,e,f,h,i,j;return j=0,h=1,i=1,null==this.prevCoords.x||null==this.prevCoords.y?(this.speedX=0,this.speedY=0):(e=a-this.prevCoords.x,f=b-this.prevCoords.y,e>0&&(h=-1),0>h&&(i=-1),this.speedX=Math.abs(e),this.speedY=Math.abs(f),j=Math.atan(f/e)*(180/Math.PI)+90),c=j-this.angle,d=this.angToCoords(c),this.blurX=g.clamp(this.speedX/16*this.props.motionBlur,0,1),this.blurY=g.clamp(this.speedY/16*this.props.motionBlur,0,1),this.setBlur({blur:{x:3*this.blurX*this.blurAmount*Math.abs(d.x),y:3*this.blurY*this.blurAmount*Math.abs(d.y)},offset:{x:3*h*this.blurX*d.x*this.blurAmount,y:3*i*this.blurY*d.y*this.blurAmount}}),this.prevCoords.x=a,this.prevCoords.y=b},a.prototype.setBlur=function(a){return this.isMotionBlurReset?void 0:(this.filter.setAttribute("stdDeviation",a.blur.x+","+a.blur.y),this.filterOffset.setAttribute("dx",a.offset.x),this.filterOffset.setAttribute("dy",a.offset.y))},a.prototype.extendDefaults=function(a){var b,c,d;c=[];for(b in a)d=a[b],c.push(this[b]=d);return c},a.prototype.extendOptions=function(a){var b,c,d;c=[];for(b in a)d=a[b],c.push(this.props[b]=d);return c},a.prototype.then=function(a){var b,c,d,e,h;e=this.history[this.history.length-1],d={};for(c in e)h=e[c],!g.callbacksMap[c]&&!g.tweenOptionMap[c]||"duration"===c?null==a[c]&&(a[c]=h):null==a[c]&&(a[c]=void 0),g.tweenOptionMap[c]&&(d[c]="duration"!==c?a[c]:null!=a[c]?a[c]:e[c]);return this.history.push(a),b=this,d.onUpdate=function(a){return function(b){return a.setProgress(b)}}(this),d.onStart=function(a){return function(){var b;return null!=(b=a.props.onStart)?b.apply(a):void 0}}(this),d.onComplete=function(a){return function(){var b;return null!=(b=a.props.onComplete)?b.apply(a):void 0}}(this),d.onFirstUpdate=function(){return b.tuneOptions(b.history[this.index])},d.isChained=!a.delay,this.timeline.append(new f(d)),this},a.prototype.tuneOptions=function(a){return this.extendOptions(a),this.postVars()},a.prototype.angToCoords=function(a){var b,c,d;return a%=360,b=(a-90)*Math.PI/180,c=Math.cos(b),d=Math.sin(b),c=0>c?Math.max(c,-.7):Math.min(c,.7),d=0>d?Math.max(d,-.7):Math.min(d,.7),{x:1.428571429*c,y:1.428571429*d}},a}(),b.exports=d},{"./h":6,"./tween/timeline":24,"./tween/tween":25,"./vendor/resize":27}],9:[function(a,b,c){!function(a){var b,c,d;return null==a.performance&&(a.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},null==a.performance.now?(b=(null!=(c=a.performance)&&null!=(d=c.timing)?d.navigationStart:void 0)?performance.timing.navigationStart:Date.now(),a.performance.now=function(){return Date.now()-b}):void 0}(window)},{}],10:[function(a,b,c){!function(){"use strict";var a,b,c,d,e,f,g;for(e=["webkit","moz"],b=0,g=window;b<e.length&&!g.requestAnimationFrame;)f=e[b],g.requestAnimationFrame=g[f+"RequestAnimationFrame"],a=g[f+"CancelAnimationFrame"],g.cancelAnimationFrame=a||g[f+"CancelRequestAnimationFrame"],++b;c=!g.requestAnimationFrame||!g.cancelAnimationFrame,(/iP(ad|hone|od).*OS 6/.test(g.navigator.userAgent)||c)&&(d=0,g.requestAnimationFrame=function(a){var b,c;return c=Date.now(),b=Math.max(d+16,c),setTimeout(function(){a(d=b)},b-c)},g.cancelAnimationFrame=clearTimeout)}()},{}],11:[function(a,b,c){var d,e;e=a("../h"),d=function(){function a(a){this.o=null!=a?a:{},this.init()}return a.prototype.ns="http://www.w3.org/2000/svg",a.prototype.type="line",a.prototype.ratio=1,a.prototype.defaults={radius:50,radiusX:void 0,radiusY:void 0,points:3,x:0,y:0,angle:0,stroke:"hotpink","stroke-width":2,"stroke-opacity":1,fill:"transparent","fill-opacity":1,"stroke-dasharray":"","stroke-dashoffset":"","stroke-linecap":""},a.prototype.init=function(){return this.vars(),this.render(),this},a.prototype.vars=function(){return this.o.ctx&&"svg"===this.o.ctx.tagName?this.ctx=this.o.ctx:this.o.el||e.error("You should pass a real context(ctx) to the bit"),this.state={},this.drawMapLength=this.drawMap.length,this.extendDefaults(),this.calcTransform()},a.prototype.calcTransform=function(){var a;return a="rotate("+this.props.angle+", "+this.props.x+", "+this.props.y+")",this.props.transform=""+a},a.prototype.extendDefaults=function(){var a,b,c,d;null==this.props&&(this.props={}),b=this.defaults,c=[];for(a in b)d=b[a],c.push(this.props[a]=null!=this.o[a]?this.o[a]:d);return c},a.prototype.setAttr=function(a,b){var c,d,e,f,g,h;if("object"==typeof a){for(e=Object.keys(a),f=e.length,c=b||this.el,g=[];f--;)d=e[f],h=a[d],g.push(c.setAttribute(d,h));return g}return this.el.setAttribute(a,b)},a.prototype.setProp=function(a,b){var c,d,e;if("object"==typeof a){d=[];for(c in a)e=a[c],d.push(this.props[c]=e);return d}return this.props[a]=b},a.prototype.render=function(){return this.isRendered=!0,null!=this.o.el?(this.el=this.o.el,this.isForeign=!0):(this.el=document.createElementNS(this.ns,this.type||"line"),!this.o.isDrawLess&&this.draw(),this.ctx.appendChild(this.el))},a.prototype.drawMap=["stroke","stroke-width","stroke-opacity","stroke-dasharray","fill","stroke-dashoffset","stroke-linecap","fill-opacity","transform"],a.prototype.draw=function(){var a,b;for(this.props.length=this.getLength(),a=this.drawMapLength;a--;){switch(b=this.drawMap[a]){case"stroke-dasharray":case"stroke-dashoffset":this.castStrokeDash(b)}this.setAttrsIfChanged(b,this.props[b])}return this.state.radius=this.props.radius},a.prototype.castStrokeDash=function(a){var b,c,d,f,g,h,i;if(e.isArray(this.props[a])){for(i="",h=this.props[a],d=f=0,g=h.length;g>f;d=++f)c=h[d],b="%"===c.unit?this.castPercent(c.value):c.value,i+=b+" ";return this.props[a]="0 "===i?i="":i,this.props[a]=i}return"object"==typeof this.props[a]?(i="%"===this.props[a].unit?this.castPercent(this.props[a].value):this.props[a].value,this.props[a]=0===i?i="":i):void 0},a.prototype.castPercent=function(a){return a*(this.props.length/100)},a.prototype.setAttrsIfChanged=function(a,b){var c,d,e,f;if("object"==typeof a){for(d=Object.keys(a),e=d.length,f=[];e--;)c=d[e],b=a[c],f.push(this.setAttrIfChanged(c,b));return f}return null==b&&(b=this.props[a]),this.setAttrIfChanged(a,b)},a.prototype.setAttrIfChanged=function(a,b){return this.isChanged(a,b)?(this.el.setAttribute(a,b),this.state[a]=b):void 0},a.prototype.isChanged=function(a,b){return null==b&&(b=this.props[a]),this.state[a]!==b},a.prototype.getLength=function(){var a;return null!=(null!=(a=this.el)?a.getTotalLength:void 0)&&this.el.getAttribute("d")?this.el.getTotalLength():2*(null!=this.props.radiusX?this.props.radiusX:this.props.radius)},a}(),b.exports=d},{"../h":6}],12:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m;d=a("./bit"),f=a("./circle"),i=a("./line"),l=a("./zigzag"),k=a("./rect"),j=a("./polygon"),g=a("./cross"),h=a("./equal"),m=a("../h"),e=function(){function a(){}return a.prototype.h=m,a.prototype.map={bit:d,circle:f,line:i,zigzag:l,rect:k,polygon:j,cross:g,equal:h},a.prototype.getBit=function(a){return this.map[a]||this.h.error('no "'+a+'" shape available yet, please choose from this list:',this.map)},a}(),b.exports=new e},{"../h":6,"./bit":11,"./circle":13,"./cross":14,"./equal":15,"./line":16,"./polygon":17,"./rect":18,"./zigzag":19}],13:[function(a,b,c){var d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;d=a("./bit"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.type="ellipse",b.prototype.draw=function(){var a,c;return a=null!=this.props.radiusX?this.props.radiusX:this.props.radius,c=null!=this.props.radiusY?this.props.radiusY:this.props.radius,this.setAttrsIfChanged({rx:a,ry:c,cx:this.props.x,cy:this.props.y}),b.__super__.draw.apply(this,arguments)},b.prototype.getLength=function(){var a,b;return a=null!=this.props.radiusX?this.props.radiusX:this.props.radius,b=null!=this.props.radiusY?this.props.radiusY:this.props.radius,2*Math.PI*Math.sqrt((Math.pow(a,2)+Math.pow(b,2))/2)},b}(d),b.exports=e},{"./bit":11}],14:[function(a,b,c){var d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;d=a("./bit"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.type="path",b.prototype.draw=function(){var a,c,d,e,f,g,h,i,j;return b.__super__.draw.apply(this,arguments),e=null!=this.props.radiusX?this.props.radiusX:this.props.radius,f=null!=this.props.radiusY?this.props.radiusY:this.props.radius,g=this.props.x-e,h=this.props.x+e,c="M"+g+","+this.props.y+" L"+h+","+this.props.y,i=this.props.y-f,j=this.props.y+f,d="M"+this.props.x+","+i+" L"+this.props.x+","+j,a=c+" "+d,this.setAttr({d:a})},b.prototype.getLength=function(){var a,b;return a=null!=this.props.radiusX?this.props.radiusX:this.props.radius,b=null!=this.props.radiusY?this.props.radiusY:this.props.radius,2*(a+b)},b}(d),b.exports=e},{"./bit":11}],15:[function(a,b,c){var d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;d=a("./bit"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.type="path",b.prototype.ratio=1.43,b.prototype.draw=function(){var a,c,d,e,f,g,h,i,j,k,l;if(b.__super__.draw.apply(this,arguments),this.props.points){for(e=null!=this.props.radiusX?this.props.radiusX:this.props.radius,f=null!=this.props.radiusY?this.props.radiusY:this.props.radius,h=this.props.x-e,i=this.props.x+e,a="",l=2*f/(this.props.points-1),k=this.props.y-f,c=d=0,g=this.props.points;g>=0?g>d:d>g;c=g>=0?++d:--d)j=""+(c*l+k),a+="M"+h+", "+j+" L"+i+", "+j+" ";return this.setAttr({d:a})}},b.prototype.getLength=function(){return 2*(null!=this.props.radiusX?this.props.radiusX:this.props.radius)},b}(d),b.exports=e},{"./bit":11}],16:[function(a,b,c){var d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;d=a("./bit"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.draw=function(){var a;return a=null!=this.props.radiusX?this.props.radiusX:this.props.radius,this.setAttrsIfChanged({x1:this.props.x-a,x2:this.props.x+a,y1:this.props.y,y2:this.props.y}),b.__super__.draw.apply(this,arguments)},b}(d),b.exports=e},{"./bit":11}],17:[function(a,b,c){var d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;d=a("./bit"),f=a("../h"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.type="path",b.prototype.draw=function(){return this.drawShape(),b.__super__.draw.apply(this,arguments)},b.prototype.drawShape=function(){var a,b,c,d,e,g,h,i,j,k;for(k=360/this.props.points,this.radialPoints=[],c=d=0,i=this.props.points;i>=0?i>d:d>i;c=i>=0?++d:--d)this.radialPoints.push(f.getRadialPoint({radius:this.props.radius,radiusX:this.props.radiusX,radiusY:this.props.radiusY,angle:c*k,center:{x:this.props.x,y:this.props.y}}));for(b="",j=this.radialPoints,c=e=0,g=j.length;g>e;c=++e)h=j[c],a=0===c?"M":"L",b+=""+a+h.x.toFixed(4)+","+h.y.toFixed(4)+" ";return this.setAttr({d:b+="z"})},b.prototype.getLength=function(){return this.el.getTotalLength()},b}(d),b.exports=e},{"../h":6,"./bit":11}],18:[function(a,b,c){var d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;d=a("./bit"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.type="rect",b.prototype.ratio=1.43,b.prototype.draw=function(){var a,c;return b.__super__.draw.apply(this,arguments),a=null!=this.props.radiusX?this.props.radiusX:this.props.radius,c=null!=this.props.radiusY?this.props.radiusY:this.props.radius,this.setAttrsIfChanged({width:2*a,height:2*c,x:this.props.x-a,y:this.props.y-c})},b.prototype.getLength=function(){var a,b;return a=null!=this.props.radiusX?this.props.radiusX:this.props.radius,b=null!=this.props.radiusY?this.props.radiusY:this.props.radius,2*a+2*b},b}(d),b.exports=e},{"./bit":11}],19:[function(a,b,c){var d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;d=a("./bit"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.type="path",b.prototype.ratio=1.43,b.prototype.draw=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(this.props.points){for(j=null!=this.props.radiusX?this.props.radiusX:this.props.radius,k=null!=this.props.radiusY?this.props.radiusY:this.props.radius,i="",m=2*j/this.props.points,n=2*k/this.props.points,o=this.props["stroke-width"],p=this.props.x-j,q=this.props.y-k,c=h=l=this.props.points;0>=l?0>h:h>0;c=0>=l?++h:--h)d=p+c*m+o,f=q+c*n+o,e=p+(c-1)*m+o,g=q+(c-1)*n+o,a=c===this.props.points?"M":"L",i+=""+a+d+","+f+" l0, -"+n+" l-"+m+", 0";return this.setAttr({d:i}),b.__super__.draw.apply(this,arguments)}},b}(d),b.exports=e},{"./bit":11}],20:[function(a,b,c){var d,e,f,g;g=a("./h"),f=a("./tween/tween"),e=a("./tween/timeline"),d=function(){function a(a){return this.o=null!=a?a:{},null==this.o.el?g.error('No "el" option specified, aborting'):(this._vars(),this._extendDefaults(),this._parseFrames(),this._frames.length<=2&&g.warn("Spriter: only "+this._frames.length+" frames found"),this._frames.length<1&&g.error("Spriter: there is no frames to animate, aborting"),void this._createTween())}return a.prototype._defaults={duration:500,delay:0,easing:"linear.none",repeat:0,yoyo:!1,isRunLess:!1,isShowEnd:!1,onStart:null,onUpdate:null,onComplete:null},a.prototype._vars=function(){return this._props=g.cloneObj(this.o),this.el=this.o.el,this._frames=[]},a.prototype.run=function(a){return this._timeline.start()},a.prototype._extendDefaults=function(){return g.extend(this._props,this._defaults)},a.prototype._parseFrames=function(){var a,b,c,d,e;for(this._frames=Array.prototype.slice.call(this.el.children,0),e=this._frames,b=c=0,d=e.length;d>c;b=++c)a=e[b],a.style.opacity=0;return this._frameStep=1/this._frames.length},a.prototype._createTween=function(){return this._tween=new f({duration:this._props.duration,delay:this._props.delay,yoyo:this._props.yoyo,repeat:this._props.repeat,easing:this._props.easing,onStart:function(a){return function(){var b;return"function"==typeof(b=a._props).onStart?b.onStart():void 0}}(this),onComplete:function(a){return function(){var b;return"function"==typeof(b=a._props).onComplete?b.onComplete():void 0}}(this),onUpdate:function(a){return function(b){return a._setProgress(b)}}(this)}),this._timeline=new e,this._timeline.add(this._tween),!this._props.isRunLess&&this._startTween()},a.prototype._startTween=function(){return setTimeout(function(a){return function(){return a._timeline.start()}}(this),1)},a.prototype._setProgress=function(a){var b,c,d,e,f;return d=Math.floor(a/this._frameStep),this._prevFrame!==this._frames[d]&&(null!=(e=this._prevFrame)&&(e.style.opacity=0),c=1===a&&this._props.isShowEnd?d-1:d,null!=(f=this._frames[c])&&(f.style.opacity=1),this._prevFrame=this._frames[d]),"function"==typeof(b=this._props).onUpdate?b.onUpdate(a):void 0},a}(),b.exports=d},{"./h":6,"./tween/timeline":24,"./tween/tween":25}],21:[function(a,b,c){var d,e,f,g;g=a("./h"),f=a("./tween/timeline"),d=function(){function a(a,b){this.init(a,b)}return a.prototype._getOptionByMod=function(a,b,c){var d,e;return d=c[a],d+""=="[object NodeList]"&&(d=Array.prototype.slice.call(d,0)),d+""=="[object HTMLCollection]"&&(d=Array.prototype.slice.call(d,0)),e=g.isArray(d)?d[b%d.length]:d,g.parseIfStagger(e,b)},a.prototype._getOptionByIndex=function(a,b){var c,d,e;d={};for(c in b)e=b[c],d[c]=this._getOptionByMod(c,a,b);return d},a.prototype._getChildQuantity=function(a,b){var c,d;return"number"==typeof a?a:(d=b[a],g.isArray(d)?d.length:d+""=="[object NodeList]"?d.length:d+""=="[object HTMLCollection]"?(c=Array.prototype.slice.call(d,0),c.length):d instanceof HTMLElement?1:"string"==typeof d?1:void 0)},a.prototype._createTimeline=function(a){return null==a&&(a={}),this.timeline=new f({onStart:a.onStaggerStart,onUpdate:a.onStaggerUpdate,onComplete:a.onStaggerComplete,onReverseComplete:a.onStaggerReverseComplete,delay:a.moduleDelay})},a.prototype.init=function(a,b){var c,d,e,f,g,h;for(c=this._getChildQuantity(a.quantifier||"el",a),this._createTimeline(a),this.childModules=[],d=e=0,h=c;h>=0?h>e:e>h;d=h>=0?++e:--e)g=this._getOptionByIndex(d,a),g.isRunLess=!0,f=new b(g),this.childModules.push(f),this.timeline.add(f);return this},a.prototype.run=function(){return this.timeline.start()},a}(),e=function(){function a(a){var b;return b=a,function(a){return new d(a,b)}}return a}(),b.exports=e},{"./h":6,"./tween/timeline":24}],22:[function(a,b,c){var d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;e=a("./transit"),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.skipPropsDelta={x:1,y:1},b.prototype.vars=function(){return b.__super__.vars.apply(this,arguments),!this.o.isSwirlLess&&this.generateSwirl()},b.prototype.extendDefaults=function(){var a,c,d,e;return b.__super__.extendDefaults.apply(this,arguments),d=this.getPosValue("x"),e=this.getPosValue("y"),a=90+Math.atan(e.delta/d.delta||0)*(180/Math.PI),d.delta<0&&(a+=180),this.positionDelta={radius:Math.sqrt(d.delta*d.delta+e.delta*e.delta),angle:a,x:d,y:e},null==(c=this.o).radiusScale&&(c.radiusScale=1),this.props.angleShift=this.h.parseIfRand(this.o.angleShift||0),this.props.radiusScale=this.h.parseIfRand(this.o.radiusScale)},b.prototype.getPosValue=function(a){var b,c;return b=this.o[a],b&&"object"==typeof b?(c=this.h.parseDelta(a,b),{start:c.start.value,end:c.end.value,delta:c.delta,units:c.end.unit}):(c=parseFloat(b||this.defaults[a]),{start:c,end:c,delta:0,units:"px"})},b.prototype.setProgress=function(a){var c,d,e,f;return c=this.positionDelta.angle,this.o.isSwirl&&(c+=this.getSwirl(a)),d=this.h.getRadialPoint({angle:c,radius:this.positionDelta.radius*a*this.props.radiusScale,center:{x:this.positionDelta.x.start,y:this.positionDelta.y.start}}),e=d.x.toFixed(4),f=d.y.toFixed(4),this.props.x=this.o.ctx?e:e+this.positionDelta.x.units,this.props.y=this.o.ctx?f:f+this.positionDelta.y.units,b.__super__.setProgress.apply(this,arguments)},b.prototype.generateSwirl=function(){var a,b;return this.props.signRand=Math.round(this.h.rand(0,1))?-1:1,null==(a=this.o).swirlSize&&(a.swirlSize=10),null==(b=this.o).swirlFrequency&&(b.swirlFrequency=3),this.props.swirlSize=this.h.parseIfRand(this.o.swirlSize),this.props.swirlFrequency=this.h.parseIfRand(this.o.swirlFrequency)},b.prototype.getSwirl=function(a){return this.props.signRand*this.props.swirlSize*Math.sin(this.props.swirlFrequency*a)},b}(e),b.exports=d},{"./transit":23}],23:[function(a,b,c){var d,e,f,g,h,i=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j={}.hasOwnProperty;h=a("./h"),g=a("./shapes/bitsMap"),f=a("./tween/tween"),d=a("./tween/timeline"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.progress=0,b.prototype.defaults={strokeWidth:2,strokeOpacity:1,strokeDasharray:0,strokeDashoffset:0,stroke:"transparent",fill:"deeppink",fillOpacity:"transparent",strokeLinecap:"",points:3,x:0,y:0,shiftX:0,shiftY:0,opacity:1,radius:{0:50},radiusX:void 0,radiusY:void 0,angle:0,size:null,sizeGap:0,onStart:null,onComplete:null,onUpdate:null,duration:500,delay:0,repeat:0,yoyo:!1,easing:"Linear.None"},b.prototype.vars=function(){var a;return null==this.h&&(this.h=h),null==this.lastSet&&(this.lastSet={}),this.index=this.o.index||0,null==this.runCount&&(this.runCount=0),this.extendDefaults(),a=this.h.cloneObj(this.o),this.h.extend(a,this.defaults),this.history=[a],this.isForeign=!!this.o.ctx,this.isForeignBit=!!this.o.bit,this.timelines=[]},b.prototype.render=function(){return this.isRendered||(this.isForeign||this.isForeignBit?(this.ctx=this.o.ctx,this.createBit(),this.calcSize()):(this.ctx=document.createElementNS(this.ns,"svg"),this.ctx.style.position="absolute",this.ctx.style.width="100%",this.ctx.style.height="100%",this.createBit(),this.calcSize(),this.el=document.createElement("div"),this.el.appendChild(this.ctx),(this.o.parent||document.body).appendChild(this.el)),this.isRendered=!0),this.setElStyles(),this.setProgress(0,!0),this.createTween(),this},b.prototype.setElStyles=function(){var a,b,c;return this.isForeign||(c=this.props.size+"px",a=-this.props.size/2+"px",this.el.style.position="absolute",this.el.style.top=this.props.y,this.el.style.left=this.props.x,this.el.style.width=c,this.el.style.height=c,this.el.style["margin-left"]=a,this.el.style["margin-top"]=a,this.el.style.marginLeft=a,this.el.style.marginTop=a),null!=(b=this.el)&&(b.style.opacity=this.props.opacity),this.o.isShowInit?this.show():this.hide()},b.prototype.show=function(){return this.isShown||null==this.el?void 0:(this.el.style.display="block",this.isShown=!0)},b.prototype.hide=function(){return this.isShown!==!1&&null!=this.el?(this.el.style.display="none",this.isShown=!1):void 0},b.prototype.draw=function(){return this.bit.setProp({x:this.origin.x,y:this.origin.y,stroke:this.props.stroke,"stroke-width":this.props.strokeWidth,"stroke-opacity":this.props.strokeOpacity,"stroke-dasharray":this.props.strokeDasharray,"stroke-dashoffset":this.props.strokeDashoffset,"stroke-linecap":this.props.strokeLinecap,fill:this.props.fill,"fill-opacity":this.props.fillOpacity,radius:this.props.radius,radiusX:this.props.radiusX,radiusY:this.props.radiusY,points:this.props.points,transform:this.calcTransform()}),this.bit.draw(),this.drawEl()},b.prototype.drawEl=function(){return null==this.el?!0:(this.isPropChanged("opacity")&&(this.el.style.opacity=this.props.opacity),!this.isForeign&&(this.isPropChanged("x")&&(this.el.style.left=this.props.x),this.isPropChanged("y")&&(this.el.style.top=this.props.y),this.isNeedsTransform())?this.h.setPrefixedStyle(this.el,"transform",this.fillTransform()):void 0)},b.prototype.fillTransform=function(){return"translate("+this.props.shiftX+", "+this.props.shiftY+")"},b.prototype.isNeedsTransform=function(){var a,b;return a=this.isPropChanged("shiftX"),b=this.isPropChanged("shiftY"),a||b},b.prototype.isPropChanged=function(a){var b;return null==(b=this.lastSet)[a]&&(b[a]={}),this.lastSet[a].value!==this.props[a]?(this.lastSet[a].value=this.props[a],!0):!1},b.prototype.calcTransform=function(){return this.props.transform="rotate("+this.props.angle+","+this.origin.x+","+this.origin.y+")"},b.prototype.calcSize=function(){var a,b,c,d;if(!this.o.size){switch(c=this.calcMaxRadius(),b=this.deltas.strokeWidth,d=null!=b?Math.max(Math.abs(b.start),Math.abs(b.end)):this.props.strokeWidth,this.props.size=2*c+2*d,"function"==typeof(a=this.props.easing).toLowerCase?a.toLowerCase():void 0){case"elastic.out":case"elastic.inout":this.props.size*=1.25;break;case"back.out":case"back.inout":this.props.size*=1.1}return this.props.size*=this.bit.ratio,this.props.size+=2*this.props.sizeGap,this.props.center=this.props.size/2}},b.prototype.calcMaxRadius=function(){var a,b,c;return a=this.getRadiusSize({key:"radius"}),b=this.getRadiusSize({key:"radiusX",fallback:a}),c=this.getRadiusSize({key:"radiusY",fallback:a}),Math.max(b,c)},b.prototype.getRadiusSize=function(a){return null!=this.deltas[a.key]?Math.max(Math.abs(this.deltas[a.key].end),Math.abs(this.deltas[a.key].start)):null!=this.props[a.key]?parseFloat(this.props[a.key]):a.fallback||0},b.prototype.createBit=function(){var a;return a=g.getBit(this.o.type||this.type),this.bit=new a({ctx:this.ctx,el:this.o.bit,isDrawLess:!0}),this.isForeign||this.isForeignBit?this.el=this.bit.el:void 0},b.prototype.setProgress=function(a,b){return b||(this.show(),"function"==typeof this.onUpdate&&this.onUpdate(a)),this.progress=0>a||!a?0:a>1?1:a,this.calcCurrentProps(a),this.calcOrigin(),this.draw(a),this},b.prototype.calcCurrentProps=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;for(i=Object.keys(this.deltas),j=i.length,l=[];j--;)h=i[j],o=this.deltas[h],l.push(this.props[h]=function(){var h,i,j;switch(o.type){case"array":for(m=[],j=o.delta,f=h=0,i=j.length;i>h;f=++h)g=j[f],d=o.start[f].value+g.value*this.progress,m.push({value:d,unit:g.unit});return m;case"number":return o.start+o.delta*a;case"unit":return n=o.end.unit,""+(o.start.value+o.delta*a)+n;case"color":return k=parseInt(o.start.r+o.delta.r*a,10),e=parseInt(o.start.g+o.delta.g*a,10),c=parseInt(o.start.b+o.delta.b*a,10),b=parseInt(o.start.a+o.delta.a*a,10),"rgba("+k+","+e+","+c+","+b+")"}}.call(this));return l},b.prototype.calcOrigin=function(){return this.origin=this.o.ctx?{x:parseFloat(this.props.x),y:parseFloat(this.props.y)}:{x:this.props.center,y:this.props.center}},b.prototype.extendDefaults=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;for(null==this.props&&(this.props={}),d=a||this.defaults,null==a&&(this.deltas={}),h=Object.keys(d),i=h.length;i--;)if(g=h[i],c=d[g],null!=(m=this.skipProps)?!m[g]:!0)if(a?(this.o[g]=c,k=c,delete this.deltas[g]):k=null!=this.o[g]?this.o[g]:c,this.isDelta(k))this.isSkipDelta||this.getDelta(g,k);else if("string"==typeof k&&k.match(/stagger/)&&(k=this.h.parseStagger(k,this.index)),"string"==typeof k&&k.match(/rand/)&&(k=this.h.parseRand(k)),this.props[g]=k,"radius"===g&&(null==this.o.radiusX&&(this.props.radiusX=k),null==this.o.radiusY&&(this.props.radiusY=k)),this.h.posPropsMap[g]&&(this.props[g]=this.h.parseUnit(this.props[g]).string),this.h.strokeDashPropsMap[g]){switch(l=this.props[g],o=[],typeof l){case"number":o.push(this.h.parseUnit(l));break;case"string":for(b=this.props[g].split(" "),e=f=0,j=b.length;j>f;e=++f)n=b[e],o.push(this.h.parseUnit(n))}this.props[g]=o}return this.onUpdate=this.props.onUpdate},b.prototype.isDelta=function(a){var b;return b=null!=a&&"object"==typeof a,b=b&&!a.unit,!(!b||this.h.isArray(a)||h.isDOM(a))},b.prototype.getDelta=function(a,b){var c,d;return"x"!==a&&"y"!==a||this.o.ctx||this.h.warn("Consider to animate shiftX/shiftY properties instead of x/y, as it would be much more performant",b),(null!=(d=this.skipPropsDelta)?d[a]:0)?void 0:(c=this.h.parseDelta(a,b,this.defaults[a]),null!=c.type&&(this.deltas[a]=c),this.props[a]=c.start)},b.prototype.mergeThenOptions=function(a,b){var c,d,e,f,g,h,i,j,k;h={};for(f in a)k=a[f],h[f]=!this.h.tweenOptionMap[f]&&!this.h.callbacksMap[f]||"duration"===f?k:"easing"===f?"":void 0;for(g=Object.keys(b),d=g.length;d--;)f=g[d],c=b[f],e="function"==typeof c,this.h.tweenOptionMap[f]||"object"==typeof c||e?h[f]=null!=c?c:a[f]:(i=a[f],null==i&&(i=this.defaults[f]),"radiusX"!==f&&"radiusY"!==f||null!=i||(i=a.radius),"object"==typeof i&&null!=i&&(j=Object.keys(i),i=i[j[0]]),null!=c&&(h[f]={},h[f][i]=c));return h},b.prototype.then=function(a){var b,c,d,e,g,h;if(null!=a&&Object.keys(a)){for(g=this.mergeThenOptions(this.history[this.history.length-1],a),this.history.push(g),d=Object.keys(this.h.tweenOptionMap),b=d.length,h={};b--;)h[d[b]]=g[d[b]];return c=this,e=c.history.length,function(b){return function(d){return h.onUpdate=function(a){return b.setProgress(a)},h.onStart=function(){var a;return null!=(a=b.props.onStart)?a.apply(b):void 0},h.onComplete=function(){var a;return null!=(a=b.props.onComplete)?a.apply(b):void 0},h.onFirstUpdate=function(){return c.tuneOptions(c.history[this.index])},h.isChained=!a.delay,b.timeline.append(new f(h))}}(this)(e),this}},b.prototype.tuneOptions=function(a){return this.extendDefaults(a),this.calcSize(),this.setElStyles()},b.prototype.createTween=function(){var a;return a=this,this.createTimeline(),this.timeline=new d({onComplete:function(a){return function(){var b;return!a.o.isShowEnd&&a.hide(),null!=(b=a.props.onComplete)?b.apply(a):void 0}}(this)}),this.timeline.add(this.tween),!this.o.isRunLess&&this.startTween()},b.prototype.createTimeline=function(){return this.tween=new f({duration:this.props.duration,delay:this.props.delay,repeat:this.props.repeat,yoyo:this.props.yoyo,easing:this.props.easing,onUpdate:function(a){return function(b){return a.setProgress(b)}}(this),onStart:function(a){return function(){var b;return a.show(),null!=(b=a.props.onStart)?b.apply(a):void 0}}(this),onFirstUpdateBackward:function(a){return function(){return a.history.length>1&&a.tuneOptions(a.history[0])}}(this),onReverseComplete:function(a){return function(){var b;return!a.o.isShowInit&&a.hide(),null!=(b=a.props.onReverseComplete)?b.apply(a):void 0}}(this)})},b.prototype.run=function(a){var b,c,d;if(this.runCount++,a&&Object.keys(a).length){if(this.history.length>1)for(c=Object.keys(a),d=c.length;d--;)b=c[d],(h.callbacksMap[b]||h.tweenOptionMap[b])&&(h.warn('the property "'+b+'" property can not be overridden on run with "then" chain yet'),delete a[b]);this.transformHistory(a),this.tuneNewOption(a),a=this.h.cloneObj(this.o),this.h.extend(a,this.defaults),this.history[0]=a,!this.o.isDrawLess&&this.setProgress(0,!0)}else this.tuneNewOption(this.history[0]);return this.startTween()},b.prototype.transformHistory=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;for(f=Object.keys(a),c=-1,g=f.length,b=this.history.length,i=[];++c<g;)e=f[c],d=0,i.push(function(){var c;for(c=[];++d<b;){if(h=this.history[d][e],"object"==typeof h){l=Object.keys(h),j=h[l[0]],delete this.history[d][e][l[0]],"object"==typeof a[e]?(m=Object.keys(a[e]),k=a[e][m[0]],this.history[d][e][k]=j):this.history[d][e][a[e]]=j;break}c.push(this.history[d][e]=a[e])}return c}.call(this));return i},b.prototype.tuneNewOption=function(a,b){return null!=a&&null!=a.type&&a.type!==(this.o.type||this.type)&&(this.h.warn("Sorry, type can not be changed on run"),delete a.type),null!=a&&Object.keys(a).length?(this.extendDefaults(a),this.resetTimeline(),!b&&this.timeline.recalcDuration(),this.calcSize(),!b&&this.setElStyles()):void 0},b.prototype.startTween=function(){return setTimeout(function(a){return function(){var b;return null!=(b=a.timeline)?b.start():void 0}}(this),1)},b.prototype.resetTimeline=function(){
var a,b,c,d,e,f;for(f={},e=Object.keys(this.h.tweenOptionMap),a=b=0,d=e.length;d>b;a=++b)c=e[a],f[c]=this.props[c];return f.onStart=this.props.onStart,f.onComplete=this.props.onComplete,this.tween.setProp(f)},b.prototype.getBitLength=function(){return this.props.bitLength=this.bit.getLength(),this.props.bitLength},b}(g.map.bit),b.exports=e},{"./h":6,"./shapes/bitsMap":12,"./tween/timeline":24,"./tween/tween":25}],24:[function(a,b,c){var d,e,f,g=[].slice;e=a("../h"),f=a("./tweener"),d=function(){function a(a){this.o=null!=a?a:{},this.vars(),this._extendDefaults()}return a.prototype.state="stop",a.prototype.defaults={repeat:0,delay:0},a.prototype.vars=function(){return this.timelines=[],this.props={time:0,repeatTime:0,shiftedRepeatTime:0},this.loop=e.bind(this.loop,this),this.onUpdate=this.o.onUpdate},a.prototype.add=function(){var a;return a=1<=arguments.length?g.call(arguments,0):[],this.pushTimelineArray(a),this},a.prototype.pushTimelineArray=function(a){var b,c,d,f,g;for(f=[],b=c=0,d=a.length;d>c;b=++c)g=a[b],f.push(e.isArray(g)?this.pushTimelineArray(g):this.pushTimeline(g));return f},a.prototype._extendDefaults=function(){var a,b,c,d;b=this.defaults,c=[];for(a in b)d=b[a],c.push(this.props[a]=null!=this.o[a]?this.o[a]:d);return c},a.prototype.setProp=function(a){var b,c;for(b in a)c=a[b],this.props[b]=c;return this.recalcDuration()},a.prototype.pushTimeline=function(b,c){return b.timeline instanceof a&&(b=b.timeline),null!=c&&b.setProp({shiftTime:c}),this.timelines.push(b),this._recalcTimelineDuration(b)},a.prototype.remove=function(a){var b;return b=this.timelines.indexOf(a),-1!==b?this.timelines.splice(b,1):void 0},a.prototype.append=function(){var a,b,c,d,f;for(d=1<=arguments.length?g.call(arguments,0):[],a=b=0,c=d.length;c>b;a=++b)f=d[a],e.isArray(f)?this._appendTimelineArray(f):this.appendTimeline(f,this.timelines.length);return this},a.prototype._appendTimelineArray=function(a){var b,c,d,e;for(b=a.length,e=this.props.repeatTime-this.props.delay,c=this.timelines.length,d=[];b--;)d.push(this.appendTimeline(a[b],c,e));return d},a.prototype.appendTimeline=function(a,b,c){var d;return d=null!=c?c:this.props.time,d+=a.props.shiftTime||0,a.index=b,this.pushTimeline(a,d)},a.prototype.recalcDuration=function(){var a,b;for(a=this.timelines.length,this.props.time=0,this.props.repeatTime=0,this.props.shiftedRepeatTime=0,b=[];a--;)b.push(this._recalcTimelineDuration(this.timelines[a]));return b},a.prototype._recalcTimelineDuration=function(a){var b;return b=a.props.repeatTime+(a.props.shiftTime||0),this.props.time=Math.max(b,this.props.time),this.props.repeatTime=(this.props.time+this.props.delay)*(this.props.repeat+1),this.props.shiftedRepeatTime=this.props.repeatTime+(this.props.shiftTime||0),this.props.shiftedRepeatTime-=this.props.delay},a.prototype.update=function(a,b){return a>this.props.endTime&&(a=this.props.endTime),a===this.props.endTime&&this.isCompleted?!0:(this._updateTimelines(a,b),this._checkCallbacks(a))},a.prototype._updateTimelines=function(a,b){var c,d,e,f,g;if(f=this.props.startTime-this.props.delay,c=(a-f)%(this.props.delay+this.props.time),g=a===this.props.endTime?this.props.endTime:f+c>=this.props.startTime?a>=this.props.endTime?this.props.endTime:f+c:a>this.props.startTime+this.props.time?this.props.startTime+this.props.time:null,null!=g)for(d=-1,e=this.timelines.length-1;d++<e;)null==b&&(b=a>(this._previousUpdateTime||0)),this.timelines[d].update(g,b);return this._previousUpdateTime=a},a.prototype._checkCallbacks=function(a){var b,c,d;return this.prevTime!==a?((!this.prevTime||this.isCompleted&&!this.isStarted)&&(null!=(b=this.o.onStart)&&b.apply(this),this.isStarted=!0,this.isCompleted=!1),a>=this.props.startTime&&a<this.props.endTime&&"function"==typeof this.onUpdate&&this.onUpdate((a-this.props.startTime)/this.props.repeatTime),this.prevTime>a&&a<=this.props.startTime&&null!=(c=this.o.onReverseComplete)&&c.apply(this),this.prevTime=a,a!==this.props.endTime||this.isCompleted?void 0:("function"==typeof this.onUpdate&&this.onUpdate(1),null!=(d=this.o.onComplete)&&d.apply(this),this.isCompleted=!0,this.isStarted=!1,!0)):void 0},a.prototype.start=function(a){return this.setStartTime(a),!a&&(f.add(this),this.state="play"),this},a.prototype.pause=function(){return this.removeFromTweener(),this.state="pause",this},a.prototype.stop=function(){return this.removeFromTweener(),this.setProgress(0),this.state="stop",this},a.prototype.restart=function(){return this.stop(),this.start()},a.prototype.removeFromTweener=function(){return f.remove(this),this},a.prototype.setStartTime=function(a){return this.getDimentions(a),this.startTimelines(this.props.startTime)},a.prototype.startTimelines=function(a){var b,c;for(b=this.timelines.length,null==a&&(a=this.props.startTime),c=[];b--;)c.push(this.timelines[b].start(a));return c},a.prototype.setProgress=function(a){return null==this.props.startTime&&this.setStartTime(),a=e.clamp(a,0,1),this.update(this.props.startTime+a*this.props.repeatTime)},a.prototype.getDimentions=function(a){return null==a&&(a=performance.now()),this.props.startTime=a+this.props.delay+(this.props.shiftTime||0),this.props.endTime=this.props.startTime+this.props.shiftedRepeatTime,this.props.endTime-=this.props.shiftTime||0},a}(),b.exports=d},{"../h":6,"./tweener":26}],25:[function(a,b,c){var d,e,f,g;f=a("../h"),g=a("./tweener"),e=a("../easing/easing"),d=function(){function a(a){this.o=null!=a?a:{},this.extendDefaults(),this.vars()}return a.prototype.defaults={duration:600,delay:0,repeat:0,yoyo:!1,easing:"Linear.None",onStart:null,onComplete:null,onReverseComplete:null,onFirstUpdate:null,onUpdate:null,onFirstUpdateBackward:null,isChained:!1},a.prototype.vars=function(){return this.h=f,this.progress=0,this.prevTime=0,this.calcDimentions()},a.prototype.calcDimentions=function(){return this.props.time=this.props.duration+this.props.delay,this.props.repeatTime=this.props.time*(this.props.repeat+1)},a.prototype.extendDefaults=function(){var a,b,c;this.props={},b=this.defaults;for(a in b)c=b[a],this.props[a]=null!=this.o[a]?this.o[a]:c;return this.props.easing=e.parseEasing(this.o.easing||this.defaults.easing),this.onUpdate=this.props.onUpdate},a.prototype.start=function(a){return this.isCompleted=!1,this.isStarted=!1,null==a&&(a=performance.now()),this.props.startTime=a+this.props.delay+(this.props.shiftTime||0),this.props.endTime=this.props.startTime+this.props.repeatTime-this.props.delay,this},a.prototype.update=function(a,b){var c,d,e,f,g;return a>=this.props.startTime&&a<this.props.endTime?(this.isOnReverseComplete=!1,this.isCompleted=!1,this.isFirstUpdate||(null!=(c=this.props.onFirstUpdate)&&c.apply(this),this.isFirstUpdate=!0),this.isStarted||(null!=(d=this.props.onStart)&&d.apply(this),this.isStarted=!0),this._updateInActiveArea(a),a<this.prevTime&&!this.isFirstUpdateBackward&&(null!=(e=this.props.onFirstUpdateBackward)&&e.apply(this),this.isFirstUpdateBackward=!0)):(a>=this.props.endTime&&!this.isCompleted&&this._complete(),a>this.props.endTime&&(this.isFirstUpdate=!1),a>this.props.endTime&&(this.isFirstUpdateBackward=!1)),a<this.prevTime&&a<=this.props.startTime&&(this.isFirstUpdateBackward||(null!=(f=this.props.onFirstUpdateBackward)&&f.apply(this),this.isFirstUpdateBackward=!0),b?this._complete():this.isOnReverseComplete||(this.isOnReverseComplete=!0,this.setProgress(0,!this.props.isChained),null!=(g=this.props.onReverseComplete)&&g.apply(this)),this.isFirstUpdate=!1),this.prevTime=a,this.isCompleted},a.prototype._complete=function(){var a;return this.setProgress(1),null!=(a=this.props.onComplete)&&a.apply(this),this.isCompleted=!0,this.isStarted=!1,this.isOnReverseComplete=!1},a.prototype._updateInActiveArea=function(a){var b,c,d,e,f;return f=this.props.startTime-this.props.delay,c=(a-f)%(this.props.delay+this.props.duration),b=Math.floor((a-f)/(this.props.delay+this.props.duration)),f+c>=this.props.startTime?(d=(a-this.props.startTime)%(this.props.delay+this.props.duration),e=d/this.props.duration,this.setProgress(this.props.yoyo?b%2===0?e:1-(1===e?0:e):e)):this.setProgress(this.prevTime<a?1:0)},a.prototype.setProgress=function(a,b){return null==b&&(b=!0),this.progress=a,this.easedProgress=this.props.easing(this.progress),this.props.prevEasedProgress!==this.easedProgress&&b&&"function"==typeof this.onUpdate&&this.onUpdate(this.easedProgress,this.progress),this.props.prevEasedProgress=this.easedProgress},a.prototype.setProp=function(a,b){var c,d;if("object"==typeof a)for(c in a)d=a[c],this.props[c]=d,"easing"===c&&(this.props.easing=e.parseEasing(this.props.easing));else"string"==typeof a&&("easing"===a?this.props.easing=e.parseEasing(b):this.props[a]=b);return this.calcDimentions()},a.prototype.run=function(a){return this.start(a),!a&&g.add(this),this},a.prototype.stop=function(){return this.pause(),this.setProgress(0),this},a.prototype.pause=function(){return this._removeFromTweener(),this},a.prototype._removeFromTweener=function(){return g.remove(this),this},a}(),b.exports=d},{"../easing/easing":3,"../h":6,"./tweener":26}],26:[function(a,b,c){var d,e,f,g;a("../polyfills/raf"),a("../polyfills/performance"),e=a("../h"),f=0,d=function(){function a(){this.vars()}return a.prototype.vars=function(){return this.tweens=[],this.loop=e.bind(this.loop,this)},a.prototype.loop=function(){var a;return this.isRunning?(a=performance.now(),this.update(a),this.tweens.length?(requestAnimationFrame(this.loop),this):this.isRunning=!1):!1},a.prototype.startLoop=function(){return this.isRunning?void 0:(this.isRunning=!0,requestAnimationFrame(this.loop))},a.prototype.stopLoop=function(){return this.isRunning=!1},a.prototype.update=function(a){var b;for(f=this.tweens.length,b=[];f--;)b.push(this.tweens[f].update(a)===!0?this.remove(f):void 0);return b},a.prototype.add=function(a){return this.tweens.push(a),this.startLoop()},a.prototype.removeAll=function(){return this.tweens.length=0},a.prototype.remove=function(a){var b;return b="number"==typeof a?a:this.tweens.indexOf(a),-1!==b?this.tweens.splice(b,1):void 0},a}(),g=new d,b.exports=g},{"../h":6,"../polyfills/performance":9,"../polyfills/raf":10}],27:[function(b,c,d){!function(){var b;return b=function(){function a(a){this.o=null!=a?a:{},window.isAnyResizeEventInited||(this.vars(),this.redefineProto())}return a.prototype.vars=function(){return window.isAnyResizeEventInited=!0,this.allowedProtos=[HTMLDivElement,HTMLFormElement,HTMLLinkElement,HTMLBodyElement,HTMLParagraphElement,HTMLFieldSetElement,HTMLLegendElement,HTMLLabelElement,HTMLButtonElement,HTMLUListElement,HTMLOListElement,HTMLLIElement,HTMLHeadingElement,HTMLQuoteElement,HTMLPreElement,HTMLBRElement,HTMLFontElement,HTMLHRElement,HTMLModElement,HTMLParamElement,HTMLMapElement,HTMLTableElement,HTMLTableCaptionElement,HTMLImageElement,HTMLTableCellElement,HTMLSelectElement,HTMLInputElement,HTMLTextAreaElement,HTMLAnchorElement,HTMLObjectElement,HTMLTableColElement,HTMLTableSectionElement,HTMLTableRowElement],this.timerElements={img:1,textarea:1,input:1,embed:1,object:1,svg:1,canvas:1,tr:1,tbody:1,thead:1,tfoot:1,a:1,select:1,option:1,optgroup:1,dl:1,dt:1,br:1,basefont:1,font:1,col:1,iframe:1}},a.prototype.redefineProto=function(){var a,b,c,d;return b=this,d=function(){var d,e,f,g;for(f=this.allowedProtos,g=[],a=d=0,e=f.length;e>d;a=++d)c=f[a],null!=c.prototype&&g.push(function(a){var c,d;return c=a.prototype.addEventListener||a.prototype.attachEvent,function(c){var d;return d=function(){var a;return(this!==window||this!==document)&&(a="onresize"===arguments[0]&&!this.isAnyResizeEventInited,a&&b.handleResize({args:arguments,that:this})),c.apply(this,arguments)},a.prototype.addEventListener?a.prototype.addEventListener=d:a.prototype.attachEvent?a.prototype.attachEvent=d:void 0}(c),d=a.prototype.removeEventListener||a.prototype.detachEvent,function(b){var c;return c=function(){return this.isAnyResizeEventInited=!1,this.iframe&&this.removeChild(this.iframe),b.apply(this,arguments)},a.prototype.removeEventListener?a.prototype.removeEventListener=c:a.prototype.detachEvent?a.prototype.detachEvent=wrappedListener:void 0}(d)}(c));return g}.call(this)},a.prototype.handleResize=function(a){var b,c,d,e,f,g,h;return c=a.that,this.timerElements[c.tagName.toLowerCase()]?this.initTimer(c):(d=document.createElement("iframe"),c.appendChild(d),d.style.width="100%",d.style.height="100%",d.style.position="absolute",d.style.zIndex=-999,d.style.opacity=0,d.style.top=0,d.style.left=0,b=window.getComputedStyle?getComputedStyle(c):c.currentStyle,f=""===c.style.position,g="static"===b.position&&f,e=""===b.position&&""===c.style.position,(g||e)&&(c.style.position="relative"),null!=(h=d.contentWindow)&&(h.onresize=function(a){return function(b){return a.dispatchEvent(c)}}(this)),c.iframe=d),c.isAnyResizeEventInited=!0},a.prototype.initTimer=function(a){var b,c;return c=0,b=0,this.interval=setInterval(function(d){return function(){var e,f;return f=a.offsetWidth,e=a.offsetHeight,f!==c||e!==b?(d.dispatchEvent(a),c=f,b=e):void 0}}(this),this.o.interval||62.5)},a.prototype.dispatchEvent=function(a){var b;return document.createEvent?(b=document.createEvent("HTMLEvents"),b.initEvent("onresize",!1,!1),a.dispatchEvent(b)):document.createEventObject?(b=document.createEventObject(),a.fireEvent("onresize",b)):!1},a.prototype.destroy=function(){var a,b,c,d,e,f,g;for(clearInterval(this.interval),this.interval=null,window.isAnyResizeEventInited=!1,b=this,f=this.allowedProtos,g=[],a=c=0,d=f.length;d>c;a=++c)e=f[a],null!=e.prototype&&g.push(function(a){var b;return b=a.prototype.addEventListener||a.prototype.attachEvent,a.prototype.addEventListener?a.prototype.addEventListener=Element.prototype.addEventListener:a.prototype.attachEvent&&(a.prototype.attachEvent=Element.prototype.attachEvent),a.prototype.removeEventListener?a.prototype.removeEventListener=Element.prototype.removeEventListener:a.prototype.detachEvent?a.prototype.detachEvent=Element.prototype.detachEvent:void 0}(e));return g},a}(),"function"==typeof a&&a.amd?a("any-resize-event",[],function(){return new b}):"object"==typeof c&&"object"==typeof c.exports?c.exports=new b:("undefined"!=typeof window&&null!==window&&(window.AnyResizeEvent=b),"undefined"!=typeof window&&null!==window?window.anyResizeEvent=new b:void 0)}()},{}]},{},[7])(7)}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),Segment.prototype={draw:function(a,b,c,d){if(this.circular=d&&d.hasOwnProperty("circular")?d.circular:!1,c){var e=d&&d.hasOwnProperty("delay")?1e3*parseFloat(d.delay):0,f=d&&d.hasOwnProperty("easing")?d.easing:null,g=d&&d.hasOwnProperty("callback")?d.callback:null,h=this;if(this.stop(),e)return delete d.delay,this.timer=setTimeout(function(){h.draw(a,b,c,d)},e),this.timer;var i=new Date,j=this.begin,k=this.end,l=this.valueOf(a),m=this.valueOf(b);!function n(){var a=new Date,b=(a-i)/1e3,d=b/parseFloat(c),e=d;return"function"==typeof f&&(e=f(e)),d>1?e=1:h.animationTimer=window.requestAnimationFrame(n),h.begin=j+(l-j)*e,h.end=k+(m-k)*e,h.begin=h.begin<0&&!h.circular?0:h.begin,h.begin=h.begin>h.length&&!h.circular?h.length:h.begin,h.end=h.end<0&&!h.circular?0:h.end,h.end=h.end>h.length&&!h.circular?h.length:h.end,h.end-h.begin<=h.length&&h.end-h.begin>0?h.draw(h.begin,h.end,0,{circular:h.circular}):h.circular&&h.end-h.begin>h.length?h.draw(0,h.length,0,{circular:h.circular}):h.draw(h.begin+(h.end-h.begin),h.end-(h.end-h.begin),0,{circular:h.circular}),d>1&&"function"==typeof g?g.call(h):void 0}()}else this.path.style.strokeDasharray=this.strokeDasharray(a,b)},strokeDasharray:function(a,b){if(this.begin=this.valueOf(a),this.end=this.valueOf(b),this.circular){var c=this.begin>this.end||this.begin<0&&this.begin<-1*this.length?parseInt(this.begin/parseInt(this.length)):parseInt(this.end/parseInt(this.length));0!==c&&(this.begin=this.begin-this.length*c,this.end=this.end-this.length*c)}if(this.end>this.length){var d=this.end-this.length;return[this.length,this.length,d,this.begin-d,this.end-this.begin].join(" ")}if(this.begin<0){var e=this.length+this.begin;return this.end<0?[this.length,this.length+this.begin,this.end-this.begin,e-this.end,this.end-this.begin,this.length].join(" "):[this.length,this.length+this.begin,this.end-this.begin,e-this.end,this.length].join(" ")}return[this.length,this.length+this.begin,this.end-this.begin].join(" ")},valueOf:function(a){var b=parseFloat(a);if(("string"==typeof a||a instanceof String)&&~a.indexOf("%")){var c;~a.indexOf("+")?(c=a.split("+"),b=this.percent(c[0])+parseFloat(c[1])):~a.indexOf("-")?(c=a.split("-"),b=3===c.length?-this.percent(c[1])-parseFloat(c[2]):c[0]?this.percent(c[0])-parseFloat(c[1]):-this.percent(c[1])):b=this.percent(a)}return b},stop:function(){window.cancelAnimationFrame(this.animationTimer),this.animationTimer=null,clearTimeout(this.timer),this.timer=null},percent:function(a){return parseFloat(a)/100*this.length}},function(a){function b(){this._settings=[],this._extensions=[],this.regional=[],this.regional[""]={errorLoadingText:"Error loading"},this.local=this.regional[""],this._uuid=(new Date).getTime(),this._ie=!!window.ActiveXObject}function c(b,c){this._svg=b,this._container=c;for(var d=0;d<a.svg._extensions.length;d++){var e=a.svg._extensions[d];this[e[0]]=new e[1](this)}}function d(){this._path=""}function e(){this._parts=[]}a.extend(b.prototype,{markerClassName:"hasSVG",propertyName:"svgwrapper",svgNS:"http://www.w3.org/2000/svg",xlinkNS:"http://www.w3.org/1999/xlink",_wrapperClass:c,_attrNames:{class_:"class",in_:"in",alignmentBaseline:"alignment-baseline",baselineShift:"baseline-shift",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorRendering:"color-rendering",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",underlinePosition:"underline-position",underlineThickness:"underline-thickness",vertAdvY:"vert-adv-y",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode"},_attachSVG:function(b,c){var d=b.namespaceURI===this.svgNS?b:null,b=d?null:b;if(!a(b||d).hasClass(this.markerClassName)){"string"==typeof c?c={loadURL:c}:"function"==typeof c&&(c={onLoad:c}),a(b||d).addClass(this.markerClassName);try{d||(d=document.createElementNS(this.svgNS,"svg"),d.setAttribute("version","1.1"),b.clientWidth>0&&d.setAttribute("width",b.clientWidth),b.clientHeight>0&&d.setAttribute("height",b.clientHeight),b.appendChild(d)),this._afterLoad(b,d,c||{})}catch(e){a(b).html("<p>SVG is not supported natively on this browser</p>")}}},_afterLoad:function(b,c,d){var d=d||this._settings[b.id];this._settings[b?b.id:""]=null;var e=new this._wrapperClass(c,b);a.data(b||c,a.svg.propertyName,e);try{d.loadURL&&e.load(d.loadURL,d),d.settings&&e.configure(d.settings),d.onLoad&&!d.loadURL&&d.onLoad.apply(b||c,[e])}catch(f){alert(f)}},_getSVG:function(b){return a(b).data(this.propertyName)},_destroySVG:function(b){b=a(b),b.hasClass(this.markerClassName)&&(b.removeClass(this.markerClassName).removeData(this.propertyName),b[0].namespaceURI!==this.svgNS&&b.empty())},addExtension:function(a,b){this._extensions.push([a,b])},isSVGElem:function(b){return 1===b.nodeType&&b.namespaceURI===a.svg.svgNS}}),a.extend(c.prototype,{width:function(){return this._container?this._container.clientWidth:this._svg.width},height:function(){return this._container?this._container.clientHeight:this._svg.height},root:function(){return this._svg},configure:function(b,c,d){if(b.nodeName||(d=c,c=b,b=this._svg),d)for(var e=b.attributes.length-1;e>=0;e--){var f=b.attributes.item(e);"onload"!==f.nodeName&&"version"!==f.nodeName&&"xmlns"!==f.nodeName.substring(0,5)&&b.attributes.removeNamedItem(f.nodeName)}for(var g in c)b.setAttribute(a.svg._attrNames[g]||g,c[g]);return this},getElementById:function(a){return this._svg.ownerDocument.getElementById(a)},change:function(b,c){if(b)for(var d in c)null==c[d]?b.removeAttribute(a.svg._attrNames[d]||d):b.setAttribute(a.svg._attrNames[d]||d,c[d]);return this},_args:function(b,c,d){c.splice(0,0,"parent"),c.splice(c.length,0,"settings");var e={},f=0;null!=b[0]&&b[0].jquery&&(b[0]=b[0][0]),null==b[0]||"object"==typeof b[0]&&b[0].nodeName||(e.parent=null,f=1);for(var g=0;g<b.length;g++)e[c[g+f]]=b[g];return d&&a.each(d,function(a,b){"object"==typeof e[b]&&(e.settings=e[b],e[b]=null)}),e},title:function(a,b,c){var d=this._args(arguments,["text"]),e=this._makeNode(d.parent,"title",d.settings||{});return e.appendChild(this._svg.ownerDocument.createTextNode(d.text)),e},describe:function(a,b,c){var d=this._args(arguments,["text"]),e=this._makeNode(d.parent,"desc",d.settings||{});return e.appendChild(this._svg.ownerDocument.createTextNode(d.text)),e},defs:function(b,c,d){var e=this._args(arguments,["id"],["id"]);return this._makeNode(e.parent,"defs",a.extend(e.id?{id:e.id}:{},e.settings||{}))},symbol:function(b,c,d,e,f,g,h){var i=this._args(arguments,["id","x1","y1","width","height"]);return this._makeNode(i.parent,"symbol",a.extend({id:i.id,viewBox:i.x1+" "+i.y1+" "+i.width+" "+i.height},i.settings||{}))},marker:function(b,c,d,e,f,g,h,i){var j=this._args(arguments,["id","refX","refY","mWidth","mHeight","orient"],["orient"]);return this._makeNode(j.parent,"marker",a.extend({id:j.id,refX:j.refX,refY:j.refY,markerWidth:j.mWidth,markerHeight:j.mHeight,orient:j.orient||"auto"},j.settings||{}))},style:function(b,c,d){var e=this._args(arguments,["styles"]),f=this._makeNode(e.parent,"style",a.extend({type:"text/css"},e.settings||{}));return f.appendChild(this._svg.ownerDocument.createTextNode(e.styles)),f},script:function(b,c,d,e){var f=this._args(arguments,["script","type"],["type"]),g=this._makeNode(f.parent,"script",a.extend({type:f.type||"text/javascript"},f.settings||{}));return g.appendChild(this._svg.ownerDocument.createTextNode(f.script)),a.svg._ie&&a.globalEval(f.script),g},linearGradient:function(b,c,d,e,f,g,h,i){var j=this._args(arguments,["id","stops","x1","y1","x2","y2"],["x1"]),k=a.extend({id:j.id},null!=j.x1?{x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2}:{});return this._gradient(j.parent,"linearGradient",a.extend(k,j.settings||{}),j.stops)},radialGradient:function(b,c,d,e,f,g,h,i,j){var k=this._args(arguments,["id","stops","cx","cy","r","fx","fy"],["cx"]),l=a.extend({id:k.id},null!=k.cx?{cx:k.cx,cy:k.cy,r:k.r,fx:k.fx,fy:k.fy}:{});return this._gradient(k.parent,"radialGradient",a.extend(l,k.settings||{}),k.stops)},_gradient:function(b,c,d,e){for(var f=this._makeNode(b,c,d),g=0;g<e.length;g++){var h=e[g];this._makeNode(f,"stop",a.extend({offset:h[0],stopColor:h[1]},null!=h[2]?{stopOpacity:h[2]}:{}))}return f},pattern:function(b,c,d,e,f,g,h,i,j,k,l){var m=this._args(arguments,["id","x","y","width","height","vx","vy","vwidth","vheight"],["vx"]),n=a.extend({id:m.id,x:m.x,y:m.y,width:m.width,height:m.height},null!=m.vx?{viewBox:m.vx+" "+m.vy+" "+m.vwidth+" "+m.vheight}:{});return this._makeNode(m.parent,"pattern",a.extend(n,m.settings||{}))},clipPath:function(b,c,d,e){var f=this._args(arguments,["id","units"]);return f.units=f.units||"userSpaceOnUse",this._makeNode(f.parent,"clipPath",a.extend({id:f.id,clipPathUnits:f.units},f.settings||{}))},mask:function(b,c,d,e,f,g,h){var i=this._args(arguments,["id","x","y","width","height"]);return this._makeNode(i.parent,"mask",a.extend({id:i.id,x:i.x,y:i.y,width:i.width,height:i.height},i.settings||{}))},createPath:function(){return new d},createText:function(){return new e},svg:function(b,c,d,e,f,g,h,i,j,k){var l=this._args(arguments,["x","y","width","height","vx","vy","vwidth","vheight"],["vx"]),m=a.extend({x:l.x,y:l.y,width:l.width,height:l.height},null!=l.vx?{viewBox:l.vx+" "+l.vy+" "+l.vwidth+" "+l.vheight}:{});return this._makeNode(l.parent,"svg",a.extend(m,l.settings||{}))},group:function(b,c,d){var e=this._args(arguments,["id"],["id"]);return this._makeNode(e.parent,"g",a.extend({id:e.id},e.settings||{}))},use:function(b,c,d,e,f,g,h){var i=this._args(arguments,["x","y","width","height","ref"]);"string"==typeof i.x&&(i.ref=i.x,i.settings=i.y,i.x=i.y=i.width=i.height=null);var j=this._makeNode(i.parent,"use",a.extend({x:i.x,y:i.y,width:i.width,height:i.height},i.settings||{}));return j.setAttributeNS(a.svg.xlinkNS,"href",i.ref),j},link:function(b,c,d){var e=this._args(arguments,["ref"]),f=this._makeNode(e.parent,"a",e.settings);return f.setAttributeNS(a.svg.xlinkNS,"href",e.ref),f},image:function(b,c,d,e,f,g,h){var i=this._args(arguments,["x","y","width","height","ref"]),j=this._makeNode(i.parent,"image",a.extend({x:i.x,y:i.y,width:i.width,height:i.height},i.settings||{}));return j.setAttributeNS(a.svg.xlinkNS,"href",i.ref),j},path:function(b,c,d){var e=this._args(arguments,["path"]);return this._makeNode(e.parent,"path",a.extend({d:e.path.path?e.path.path():e.path},e.settings||{}))},rect:function(b,c,d,e,f,g,h,i){var j=this._args(arguments,["x","y","width","height","rx","ry"],["rx"]);return this._makeNode(j.parent,"rect",a.extend({x:j.x,y:j.y,width:j.width,height:j.height},j.rx?{rx:j.rx,ry:j.ry}:{},j.settings||{}))},circle:function(b,c,d,e,f){var g=this._args(arguments,["cx","cy","r"]);return this._makeNode(g.parent,"circle",a.extend({cx:g.cx,cy:g.cy,r:g.r},g.settings||{}))},ellipse:function(b,c,d,e,f,g){var h=this._args(arguments,["cx","cy","rx","ry"]);return this._makeNode(h.parent,"ellipse",a.extend({cx:h.cx,cy:h.cy,rx:h.rx,ry:h.ry},h.settings||{}))},line:function(b,c,d,e,f,g){var h=this._args(arguments,["x1","y1","x2","y2"]);return this._makeNode(h.parent,"line",a.extend({x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2},h.settings||{}))},polyline:function(a,b,c){var d=this._args(arguments,["points"]);return this._poly(d.parent,"polyline",d.points,d.settings)},polygon:function(a,b,c){var d=this._args(arguments,["points"]);return this._poly(d.parent,"polygon",d.points,d.settings)},_poly:function(b,c,d,e){for(var f="",g=0;g<d.length;g++)f+=d[g].join()+" ";return this._makeNode(b,c,a.extend({points:a.trim(f)},e||{}))},text:function(b,c,d,e,f){var g=this._args(arguments,["x","y","value"]);return"string"==typeof g.x&&arguments.length<4&&(g.value=g.x,g.settings=g.y,g.x=g.y=null),this._text(g.parent,"text",g.value,a.extend({x:g.x&&a.isArray(g.x)?g.x.join(" "):g.x,y:g.y&&a.isArray(g.y)?g.y.join(" "):g.y},g.settings||{}))},textpath:function(b,c,d,e){var f=this._args(arguments,["path","value"]),g=this._text(f.parent,"textPath",f.value,f.settings||{});return g.setAttributeNS(a.svg.xlinkNS,"href",f.path),g},_text:function(b,c,d,e){var f=this._makeNode(b,c,e);if("string"==typeof d)f.appendChild(f.ownerDocument.createTextNode(d));else for(var g=0;g<d._parts.length;g++){var h=d._parts[g];if("tspan"===h[0]){var i=this._makeNode(f,h[0],h[2]);i.appendChild(f.ownerDocument.createTextNode(h[1])),f.appendChild(i)}else if("tref"===h[0]){var i=this._makeNode(f,h[0],h[2]);i.setAttributeNS(a.svg.xlinkNS,"href",h[1]),f.appendChild(i)}else if("textpath"===h[0]){var j=a.extend({},h[2]);j.href=null;var i=this._makeNode(f,h[0],j);i.setAttributeNS(a.svg.xlinkNS,"href",h[2].href),i.appendChild(f.ownerDocument.createTextNode(h[1])),f.appendChild(i)}else f.appendChild(f.ownerDocument.createTextNode(h[1]))}return f},other:function(a,b,c){var d=this._args(arguments,["name"]);return this._makeNode(d.parent,d.name,d.settings||{})},_makeNode:function(b,c,d){b=b||this._svg;var e=this._svg.ownerDocument.createElementNS(a.svg.svgNS,c);for(var c in d){var f=d[c];null==f||"string"==typeof f&&""===f||e.setAttribute(a.svg._attrNames[c]||c,f)}return b.appendChild(e),e},add:function(b,c){var d=this._args(1===arguments.length?[null,b]:arguments,["node"]),e=this;d.parent=d.parent||this._svg,d.node=d.node.jquery?d.node:a(d.node);try{d.parent.appendChild(d.node.cloneNode(!0))}catch(f){d.node.each(function(){var a=e._cloneAsSVG(this);a&&d.parent.appendChild(a)})}return this},clone:function(b,c){var d=this,e=this._args(1===arguments.length?[null,b]:arguments,["node"]);e.parent=e.parent||this._svg,e.node=e.node.jquery?e.node:a(e.node);var f=[];return e.node.each(function(){var a=d._cloneAsSVG(this);a&&(a.id="",e.parent.appendChild(a),f.push(a))}),f},_cloneAsSVG:function(b){var c=null;if(1===b.nodeType){c=this._svg.ownerDocument.createElementNS(a.svg.svgNS,this._checkName(b.nodeName));for(var d=0;d<b.attributes.length;d++){var e=b.attributes.item(d);"xmlns"!==e.nodeName&&e.nodeValue&&("xlink"===e.prefix?c.setAttributeNS(a.svg.xlinkNS,e.localName||e.baseName,e.nodeValue):c.setAttribute(this._checkName(e.nodeName),e.nodeValue))}for(var d=0;d<b.childNodes.length;d++){var f=this._cloneAsSVG(b.childNodes[d]);f&&c.appendChild(f)}}else if(3===b.nodeType)a.trim(b.nodeValue)&&(c=this._svg.ownerDocument.createTextNode(b.nodeValue));else if(4===b.nodeType&&a.trim(b.nodeValue))try{c=this._svg.ownerDocument.createCDATASection(b.nodeValue)}catch(g){c=this._svg.ownerDocument.createTextNode(b.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}return c},_checkName:function(a){return a=a.substring(0,1)>="A"&&a.substring(0,1)<="Z"?a.toLowerCase():a,"svg:"===a.substring(0,4)?a.substring(4):a},load:function(b,c){c="boolean"==typeof c?{addTo:c}:"function"==typeof c?{onLoad:c}:"string"==typeof c?{parent:c}:"object"==typeof c&&c.nodeName?{parent:c}:"object"==typeof c&&c.jquery?{parent:c}:c||{},c.parent||c.addTo||this.clear(!1);var d=[this._svg.getAttribute("width"),this._svg.getAttribute("height")],e=this,f=function(b){b=a.svg.local.errorLoadingText+": "+b,c.onLoad?c.onLoad.apply(e._container||e._svg,[e,b]):e.text(null,10,20,b)},g=function(g){if(g){if("svg"!==g.documentElement.nodeName){var h=g.getElementsByTagName("parsererror"),i=h.length?h[0].getElementsByTagName("div"):[];return void f(h.length?(i.length?i[0]:h[0]).firstChild.nodeValue:"???")}for(var j=c.parent?a(c.parent)[0]:e._svg,k={},l=0;l<g.documentElement.attributes.length;l++){var m=g.documentElement.attributes.item(l);"version"!==m.nodeName&&"xmlns"!==m.nodeName.substring(0,5)&&(k[m.nodeName]=m.nodeValue)}e.configure(j,k,!c.parent);for(var n=g.documentElement.childNodes,l=0;l<n.length;l++)try{j.appendChild(e._svg.ownerDocument.importNode(n[l],!0)),"script"===n[l].nodeName&&a.globalEval(n[l].textContent)}catch(o){e.add(j,n[l])}if(!c.keepRelativeLinks&&b.match("/")){var p=b.replace(/\/[^\/]*$/,"/");a("*",j).each(function(){var b=a(this).attr("xlink:href");b&&!b.match(/(^[a-z][-a-z0-9+.]*:.*$)|(^\/.*$)|(^#.*$)/i)&&a(this).attr("xlink:href",p+b)})}c.changeSize||e.configure(j,{width:d[0],height:d[1]}),c.onLoad&&c.onLoad.apply(e._container||e._svg,[e])}};if(b.match("<svg"))try{g((new DOMParser).parseFromString(b,"text/xml"));
}catch(h){f(h)}else a.ajax({url:b,dataType:"xml",success:function(a){g(a)},error:function(a,b,c){f(b+(c?" "+c.message:""))}});return this},remove:function(a){return a=a.jquery?a[0]:a,a.parentNode.removeChild(a),this},clear:function(a){for(a&&this.configure({},!0);this._svg.firstChild;)this._svg.removeChild(this._svg.firstChild);return this},toSVG:function(a){return a=a||this._svg,"undefined"==typeof XMLSerializer?this._toSVG(a):(new XMLSerializer).serializeToString(a)},_toSVG:function(b){var c="";if(!b)return c;if(3===b.nodeType)c=b.nodeValue;else if(4===b.nodeType)c="<![CDATA["+b.nodeValue+"]]>";else{if(c="<"+b.nodeName,b.attributes)for(var d=0;d<b.attributes.length;d++){var e=b.attributes.item(d);""===a.trim(e.nodeValue)||e.nodeValue.match(/^\[object/)||e.nodeValue.match(/^function/)||(c+=" "+(e.namespaceURI===a.svg.xlinkNS?"xlink:":"")+e.nodeName+'="'+e.nodeValue+'"')}if(b.firstChild){c+=">";for(var f=b.firstChild;f;)c+=this._toSVG(f),f=f.nextSibling;c+="</"+b.nodeName+">"}else c+="/>"}return c}}),a.extend(d.prototype,{reset:function(){return this._path="",this},move:function(b,c,d){return d=a.isArray(b)?c:d,this._coords(d?"m":"M",b,c)},line:function(b,c,d){return d=a.isArray(b)?c:d,this._coords(d?"l":"L",b,c)},horiz:function(b,c){return this._path+=(c?"h":"H")+(a.isArray(b)?b.join(" "):b),this},vert:function(b,c){return this._path+=(c?"v":"V")+(a.isArray(b)?b.join(" "):b),this},curveC:function(b,c,d,e,f,g,h){return h=a.isArray(b)?c:h,this._coords(h?"c":"C",b,c,d,e,f,g)},smoothC:function(b,c,d,e,f){return f=a.isArray(b)?c:f,this._coords(f?"s":"S",b,c,d,e)},curveQ:function(b,c,d,e,f){return f=a.isArray(b)?c:f,this._coords(f?"q":"Q",b,c,d,e)},smoothQ:function(b,c,d){return d=a.isArray(b)?c:d,this._coords(d?"t":"T",b,c)},_coords:function(b,c,d,e,f,g,h){if(a.isArray(c))for(var i=0;i<c.length;i++){var j=c[i];this._path+=(0===i?b:" ")+j[0]+","+j[1]+(j.length<4?"":" "+j[2]+","+j[3]+(j.length<6?"":" "+j[4]+","+j[5]))}else this._path+=b+c+","+d+(null==e?"":" "+e+","+f+(null==g?"":" "+g+","+h));return this},arc:function(b,c,d,e,f,g,h,i){if(i=a.isArray(b)?c:i,this._path+=i?"a":"A",a.isArray(b))for(var j=0;j<b.length;j++){var k=b[j];this._path+=(0===j?"":" ")+k[0]+","+k[1]+" "+k[2]+" "+(k[3]?"1":"0")+","+(k[4]?"1":"0")+" "+k[5]+","+k[6]}else this._path+=b+","+c+" "+d+" "+(e?"1":"0")+","+(f?"1":"0")+" "+g+","+h;return this},close:function(){return this._path+="z",this},path:function(){return this._path}}),d.prototype.moveTo=d.prototype.move,d.prototype.lineTo=d.prototype.line,d.prototype.horizTo=d.prototype.horiz,d.prototype.vertTo=d.prototype.vert,d.prototype.curveCTo=d.prototype.curveC,d.prototype.smoothCTo=d.prototype.smoothC,d.prototype.curveQTo=d.prototype.curveQ,d.prototype.smoothQTo=d.prototype.smoothQ,d.prototype.arcTo=d.prototype.arc,a.extend(e.prototype,{reset:function(){return this._parts=[],this},string:function(a){return this._parts.push(["text",a]),this},span:function(a,b){return this._parts.push(["tspan",a,b]),this},ref:function(a,b){return this._parts.push(["tref",a,b]),this},path:function(b,c,d){return this._parts.push(["textpath",c,a.extend({href:b},d||{})]),this}}),a.fn.svg=function(b){var c=Array.prototype.slice.call(arguments,1);return"string"==typeof b&&"get"===b?a.svg["_"+b+"SVG"].apply(a.svg,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.svg["_"+b+"SVG"].apply(a.svg,[this].concat(c)):a.svg._attachSVG(this,b||{})})},a.svg=new b}(jQuery),function(a){function b(a){for(var b=a.split(/[, ]+/),c=0;c<b.length;c++)b[c]=parseFloat(b[c]),isNaN(b[c])&&(b[c]=0);if(b.length%2===1)for(var d=b.length,c=0;d>c;c++)b.push(b[c]);return b}function c(a){for(var b=a.split(/[, ]+/),c=0;c<b.length;c++)b[c]=parseFloat(b[c]),isNaN(b[c])&&(b[c]=0);for(;b.length<4;)b.push(0);return b}function d(b,c){b=b||"","object"==typeof b&&(b=b.nodeValue);var d=a.extend({translateX:0,translateY:0,scaleX:0,scaleY:0,rotateA:0,rotateX:0,rotateY:0,skewX:0,skewY:0,matrix:[0,0,0,0,0,0]},c||{});d.order="";for(var e=/([a-zA-Z]+)\(\s*([+-]?[\d\.]+)\s*(?:[\s,]\s*([+-]?[\d\.]+)\s*(?:[\s,]\s*([+-]?[\d\.]+)\s*(?:[\s,]\s*([+-]?[\d\.]+)\s*[\s,]\s*([+-]?[\d\.]+)\s*[\s,]\s*([+-]?[\d\.]+)\s*)?)?)?\)/g,f=e.exec(b);f;){switch(f[1]){case"translate":d.order+="t",d.translateX=parseFloat(f[2]),d.translateY=f[3]?parseFloat(f[3]):0;break;case"scale":d.order+="s",d.scaleX=parseFloat(f[2]),d.scaleY=f[3]?parseFloat(f[3]):d.scaleX;break;case"rotate":d.order+="r",d.rotateA=parseFloat(f[2]),d.rotateX=f[3]?parseFloat(f[3]):0,d.rotateY=f[4]?parseFloat(f[4]):0;break;case"skewX":d.order+="x",d.skewX=parseFloat(f[2]);break;case"skewY":d.order+="y",d.skewY=parseFloat(f[2]);break;case"matrix":d.order+="m",d.matrix=[parseFloat(f[2]),parseFloat(f[3]),parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6]),parseFloat(f[7])]}f=e.exec(b)}if("m"===d.order&&Math.abs(d.matrix[0])===Math.abs(d.matrix[3])&&0!==d.matrix[1]&&Math.abs(d.matrix[1])===Math.abs(d.matrix[2])){var g=180*Math.acos(d.matrix[0])/Math.PI;g=d.matrix[1]<0?360-g:g,d.order="rt",d.rotateA=g,d.rotateX=d.rotateY=0,d.translateX=d.matrix[4],d.translateY=d.matrix[5]}return d}var e=parseInt(a.fn.jquery,10)>1||parseInt(a.fn.jquery.substring(2),10)>5;a.each(["x","y","width","height","rx","ry","cx","cy","r","x1","y1","x2","y2","stroke-width","strokeWidth","opacity","fill-opacity","fillOpacity","stroke-opacity","strokeOpacity","stroke-dashoffset","strokeDashOffset","font-size","fontSize","font-weight","fontWeight","letter-spacing","letterSpacing","word-spacing","wordSpacing"],function(b,c){var d=c.charAt(0).toUpperCase()+c.substr(1);a.cssProps&&(a.cssProps["svg"+d]=a.cssProps["svg-"+c]=c),a.fx.step["svg"+d]=a.fx.step["svg-"+c]=function(b){var f=a.svg._attrNames[c]||c,g=b.elem.attributes.getNamedItem(f);if(!b.set){b.start=g?parseFloat(g.nodeValue):0;var h=e?"":b.options.curAnim["svg"+d]||b.options.curAnim["svg-"+c];/^[+-]=/.exec(h)&&(b.end=b.start+parseFloat(h.replace(/=/,""))),a(b.elem).css(f,""),b.set=!0}var i=b.pos*(b.end-b.start)+b.start+("%"===b.unit?"%":"");g?g.nodeValue=i:b.elem.setAttribute(f,i)}}),a.fx.step.svgStrokeDashArray=a.fx.step["svg-strokeDashArray"]=a.fx.step["svgStroke-dasharray"]=a.fx.step["svg-stroke-dasharray"]=function(c){var d=c.elem.attributes.getNamedItem("stroke-dasharray");if(!c.set){c.start=b(d?d.nodeValue:"");var f=e?c.end:c.options.curAnim.svgStrokeDashArray||c.options.curAnim["svg-strokeDashArray"]||c.options.curAnim["svgStroke-dasharray"]||c.options.curAnim["svg-stroke-dasharray"];if(c.end=b(f),/^[+-]=/.exec(f)){if(f=f.split(/[, ]+/),f.length%2===1)for(var g=f.length,h=0;g>h;h++)f.push(f[h]);for(var h=0;h<f.length;h++)/^[+-]=/.exec(f[h])&&(c.end[h]=c.start[h]+parseFloat(f[h].replace(/=/,"")))}c.set=!0}var i=a.map(c.start,function(a,b){return c.pos*(c.end[b]-a)+a}).join(",");d?d.nodeValue=i:c.elem.setAttribute("stroke-dasharray",i)},a.fx.step.svgViewBox=a.fx.step["svg-viewBox"]=function(b){var d=b.elem.attributes.getNamedItem("viewBox");if(!b.set){b.start=c(d?d.nodeValue:"");var f=e?b.end:b.options.curAnim.svgViewBox||b.options.curAnim["svg-viewBox"];if(b.end=c(f),/^[+-]=/.exec(f)){for(f=f.split(/[, ]+/);f.length<4;)f.push("0");for(var g=0;4>g;g++)/^[+-]=/.exec(f[g])&&(b.end[g]=b.start[g]+parseFloat(f[g].replace(/=/,"")))}b.set=!0}var h=a.map(b.start,function(a,c){return b.pos*(b.end[c]-a)+a}).join(" ");d?d.nodeValue=h:b.elem.setAttribute("viewBox",h)},a.fx.step.svgTransform=a.fx.step["svg-transform"]=function(a){var b=a.elem.attributes.getNamedItem("transform");a.set||(a.start=d(b?b.nodeValue:""),a.end=d(a.end,a.start),a.set=!0);for(var c="",e=0;e<a.end.order.length;e++)switch(a.end.order.charAt(e)){case"t":c+=" translate("+(a.pos*(a.end.translateX-a.start.translateX)+a.start.translateX)+","+(a.pos*(a.end.translateY-a.start.translateY)+a.start.translateY)+")";break;case"s":c+=" scale("+(a.pos*(a.end.scaleX-a.start.scaleX)+a.start.scaleX)+","+(a.pos*(a.end.scaleY-a.start.scaleY)+a.start.scaleY)+")";break;case"r":c+=" rotate("+(a.pos*(a.end.rotateA-a.start.rotateA)+a.start.rotateA)+","+(a.pos*(a.end.rotateX-a.start.rotateX)+a.start.rotateX)+","+(a.pos*(a.end.rotateY-a.start.rotateY)+a.start.rotateY)+")";break;case"x":c+=" skewX("+(a.pos*(a.end.skewX-a.start.skewX)+a.start.skewX)+")";case"y":c+=" skewY("+(a.pos*(a.end.skewY-a.start.skewY)+a.start.skewY)+")";break;case"m":for(var f="",g=0;6>g;g++)f+=","+(a.pos*(a.end.matrix[g]-a.start.matrix[g])+a.start.matrix[g]);c+=" matrix("+f.substr(1)+")"}b?b.nodeValue=c:a.elem.setAttribute("transform",c)},a.each(["fill","stroke"],function(b,c){var d=c.charAt(0).toUpperCase()+c.substr(1);a.fx.step["svg"+d]=a.fx.step["svg-"+c]=function(b){if(!b.set){b.start=a.svg._getColour(b.elem,c);var d="none"===b.end;b.end=d?a.svg._getColour(b.elem.parentNode,c):a.svg._getRGB(b.end),b.end[3]=d,a(b.elem).css(c,""),b.set=!0}var e="rgb("+[Math.min(Math.max(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),0),255),Math.min(Math.max(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),0),255),Math.min(Math.max(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),0),255)].join(",")+")";e=b.end[3]&&1===b.state?"none":e;var f=b.elem.attributes.getNamedItem(c);f?f.nodeValue=e:b.elem.setAttribute(c,e)}}),a.svg._getColour=function(b,c){b=a(b);var d;do if(d=b.attr(c)||b.css(c),""!==d&&"none"!==d||b.hasClass(a.svg.markerClassName))break;while(b=b.parent());return a.svg._getRGB(d)},a.svg._getRGB=function(b){var c;return b&&b.constructor===Array?3===b.length||4===b.length?b:f.none:(c=/^rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)$/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/^rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)$/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/^#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:f[a.trim(b).toLowerCase()]||f.none};var f={"":[255,255,255,1],none:[255,255,255,1],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}(jQuery),Ajax=function(){this.callBack=[],this.ajaxFailed=!1,this.json=function(a,b){b||(b={}),b.url=a,b.dataType="json",b.params||(b.params=""),b.params+="_token="+Ajax.getCSRF(),this.execute(b)},this.html=function(a,b,c){c||(c={}),a+=-1==a.indexOf("?")?"?__html=true":"&__html=true",c.url=a,c.type="GET",c.target=b,c.dataType="html",this.execute(c)},this.execute=function(a){var b={};if(-1==a.url.indexOf("?")?b.url=a.url+"?__ajax=true":b.url=a.url+"&__ajax=true",a.params&&(b.url+="&"+a.params),a.callBack){this.callBack.push(a.callBack);var c=this.callBack.length-1}else var c=-1;a.data&&(b.data=a.data),a.type?b.type=a.type:b.type="POST",a.dataType?b.dataType=a.dataType:b.dataType="json";var d=$.ajax(b);"json"==a.dataType?d.done(function(a){Ajax.doneJson(a,c)}):d.done(function(b){Ajax.doneHtml(b,a.target,c)}),d.fail(function(a,b){Ajax.fail(a,b)})},this.doneJson=function(data,n_cb){if(F.handleEvent("ajaxonload"),data.actions)for(var key in data.actions){if(data.args&&data.args[key])var args=data.args[key];else var args=[];var handler=eval("("+data.actions[key]+")");handler.call&&handler.call(this,args)}n_cb>=0&&this.callBack[n_cb](data),F.handleEvent("ajaxloadcompleted")},this.doneHtml=function(a,b,c){F.handleEvent("ajaxonload"),$(b).html(a),F.handleEvent("ajaxloadcompleted")},this.fail=function(a,b){this.ajaxFailed||(this.ajaxFailed=!0,Ajax.json("/jsLog",{data:"data="+b+"&jqXHR="+a})),alert("Something vent wrong. Try to reload the page. If this happens again plz inform administrator."),setTimeout(function(){window.location.reload()},2500),info(a),info(b)},this.init=function(){$("form[method='post'].ajax").each(function(){var a=$(this);"inited"!=a.attr("inited")&&(a.bind("submit",function(){return a.hasClass("inactive")?!1:(Ajax.formLoadingStart(a),Ajax.json(this.action,{params:"__csrf="+Ajax.getCSRF(),data:a.serialize(),callBack:function(){Ajax.formLoadingEnd(a)}}),!1)}),a.attr("inited","inited"))}),$("a.ajax").each(function(){var a=$(this);"inited"!=a.attr("inited")&&(a.bind("click",function(){return a.hasClass("disabled")?!1:(Ajax.linkLoadingStart(a),Ajax.json(this.href,{params:"__csrf="+Ajax.getCSRF(),callBack:function(){Ajax.linkLoadingEnd(a)}}),!1)}),a.attr("inited","inited"))}),$("a.hajax").each(function(){var a=$(this);"inited"!=a.attr("inited")&&(a.bind("click",function(){return a.hasClass("disabled")?!1:(Ajax.linkLoadingStart(a),Ajax.html(this.href,a.data("target"),{params:"__csrf="+Ajax.getCSRF(),callBack:function(){Ajax.linkLoadingEnd(a)}}),!1)}),a.attr("inited","inited"))})},this.formLoadingStart=function(a){a.addClass("inactive"),a.find("[type=submit]").button("loading")},this.formLoadingEnd=function(a){a.find("[type=submit]").button("reset"),a.removeClass("inactive")},this.linkLoadingStart=function(a){a.addClass("disabled")},this.linkLoadingEnd=function(a){a.removeClass("disabled")},this.getCSRF=function(){return $("#CSRF_TOKEN").length?$("#CSRF_TOKEN").val():$("#laravel-token").val()}},Ajax=new Ajax,window.F=new F;var clientW=0,clientH=0;window.onload=function(a){F.handleEvent("onload",a),F.handleEvent("onafterload",a)},window.onresize=function(a){window.resizeTimerMainWindow&&clearTimeout(window.resizeTimerMainWindow),window.resizeTimerMainWindow=setTimeout(F.startResize,100)},document.onmouseup=function(a){a||(a=window.event),F.handleEvent("onmouseup",a)},F.manageEvent("onload","$('body').click(function(event){F.handleEvent('onmousedown', event, this);})"),Form=function(){this.error=function(a){info(a.field),info(a.error);var b=$("form[inited='inited']");if(b.length>0){var c=b.find("input[name="+a.field+"]");c.before('<div class="control-group error"><span class="help-inline">'+a.error+"</span></div>"),c.prependTo(c.prev()),c.bind("blur",function(){$(this).parent().before($(this)),$(this).next().remove(),$(this).unbind("blur")})}}},Form=new Form,Action=new Action,$(document).ready(function(){ilfate_init()}),F.manageEvent("ajaxloadcompleted",ilfate_init),$.fn.starred=function(){$(this).each(function(a,b){b=$(b);var c=b.data("value");if(!b.prev().hasClass("before-stars")){b.before('<div class="container-stars"></div>').appendTo(b.prev()).before('<div class="before-stars label label-default"></div>'),b.prev().css({width:b.css("width"),height:b.css("height")});var d='<div class="star"><div class="under-star"></div><div class="img-star"></div></div>';b.prev().append(d+d+d+d);for(var e=0;4>e;e++)if(25*(e+1)>c){var f=b.prev().find(".star .under-star").eq(e);25*e>c?f.width("0px"):f.width(Math.floor((c-25*e)/25*18)+"px")}}})},$.fn.roundedBlock=function(){$(this).each(function(a,b){var c=$(b).find(".text");c.css("line-height",c.height()+"px"),$(b).bind("mouseenter",function(){$(this).find(".text").bounce()})})},$.fn.bounce=function(){var a=4,b=2,c=$(this).height();$(this).stop(!0,!0);for(var d=0;a>=d;d++)$(this).animate({"line-height":(d%2===0?c+(a-d)*b:c-(a-d)*b)+"px"},80+5*d)},Math.radians=function(a){return a*Math.PI/180},Math.degrees=function(a){return 180*a/Math.PI},Guess=new Guess,$(document).ready(function(){void 0!==window.guessGameFirstQuestion&&(Guess.Game=new Guess.Game,Guess.Game.init(window.guessGameFirstQuestion))}),Guess.Game=function(){this.color={blue:"#428BCA",green:"#069E2D",yellow:"#FFD416",red:"#F21616",orange:"#EF8354",black:"#584D3D",white:"#FFFFFF"},this.nextQuestion=[],this.questionNumber=1,this.queue={},this.currentQuestion={},this.currentTurn=1,this.currentAnswer=0,this.pointsAmount=0,this.timerInterval=0,this.nextImagesLoaded=!1,this.nextAnimationsEnded=!1,this.countImagesToLoad=0,this.resultK=0,this.resultSec=0,this.correctAnswer=!1,this.gameFinished=!1,this.userName=!1,this.stats=[],this.pointsAnimationEnabled=!0,this.isSwitchImages=!1,this.isTimeLimited=!0,this.turnStartTime={},this.secondsLeft=0,this.init=function(a){this.currentQuestion=a,$("#start-game").on({click:function(){Guess.Game.startGame()}}),this.drawQuestion(a)},this.startGame=function(){url="/GuessSeries/gameStarted",Ajax.json(url,{}),$(".sidebar-on-start-buttons").fadeOut(1e3,function(){$(this).remove()}),$(".ability").animate({opacity:1},1e3),$(".ability").on({click:function(){Guess.Game.ability($(this))}}),$("#start-game").animate({backgroundColor:"#529BCA",width:"100%"},500,function(){$(".game-container").fadeIn(500),Guess.Game.startTurn(!0)}),$("#start-game").animate({height:"500px",top:"0",opacity:0,"line-height":"250px"},500,function(){$("#start-game").remove()})},this.startTurn=function(a){this.currentAnswer="none",this.nextImagesLoaded=!1,this.nextAnimationsEnded=!1;var b=this.currentQuestion;this.restartTimer(),a||(this.drawQuestion(b),$(".to-delete").remove())},this.switchImagesAction=function(){switch(this.nextImagesLoaded=!1,this.nextAnimationsEnded=!1,this.isSwitchImages=!1,this.currentQuestion.type){case 1:$(".single-picture-overlay").css("background-image",$(".single-picture").css("background-image")),$(".single-picture").css({"background-image":'url("/images/game/guess/'+this.currentQuestion.picture+'")'}),$(".single-picture-overlay").animate({opacity:0},{duration:1e3,complete:function(){$(this).css({"background-image":"",opacity:1})}});break;case 2:for(var a=0;4>a;a++){var b=".answer.id-"+a+" .four-images-overlay";$(b).css("background-image",$(".answer.id-"+a).css("background-image")),$(".answer.id-"+a).css({"background-image":'url("/images/game/guess/'+this.currentQuestion.options[a]+'")'}),$(b).animate({opacity:0},{duration:1e3,complete:function(){$(this).css({"background-image":"",opacity:1})}})}}setTimeout(function(){Guess.Game.restartTimer()},500),$(".to-delete").remove()},this.drawQuestion=function(a){switch($(".turn-area").html(""),a.type){case 1:var b=$("#template-single-picture").html();break;case 2:var b=$("#template-four-pictures").html()}Mustache.parse(b);var c=Mustache.render(b,{question:a}),d=$(c);switch($(".turn-area").hide(),$(".turn-area").append(d),$(".turn-area").fadeIn(250),$(".answer").on({click:function(){Guess.Game.sendAnswer($(this))}}),a.type){case 1:$(".answer .block").on({mouseenter:function(){Guess.Game.answerButtonMouseOver($(this))},mouseleave:function(){Guess.Game.answerButtonMouseOut($(this))}});break;case 2:$(".answer").on({mouseenter:function(){Guess.Game.answerImageMouseOver($(this))},mouseleave:function(){Guess.Game.answerImageMouseOut($(this))}})}},this.ability=function(a){a.off();var b=a.data("id");this.stopTimer(),this.abilityButtonAnimation(a),url="/GuessSeries/ability",Ajax.json(url,{data:"id="+b,callBack:function(a){Guess.Game.abilityResult(a)}})},this.sendAnswer=function(a){this.stopTimer();var b=this.checkTime();if(this.secondsLeft>this.currentQuestion.sec-b+2&&(this.secondsLeft=this.currentQuestion.sec-b),$(".answer").off("click"),b){var c=a.data("id");this.currentAnswer=c,url="/GuessSeries/answer",Ajax.json(url,{data:"id="+c+"&seconds="+this.secondsLeft,callBack:function(a){Guess.Game.result(a)}}),this.animateAnswerSent()}},this.result=function(a){void 0!==a.finish?(this.stopGame(),this.pointsAmount=a.points,this.correctAnswersNumber=a.correctAnswersNumber,this.correctAnswer=a.correctAnswer,this.userName=a.name,this.stats=a.stats,this.nextAnimationsEnded?this.showFalseAnswerAnimation():this.nextImagesLoaded=!0):(this.currentTurn++,this.resultK=a.result.k,this.resultSec=a.result.seconds,this.currentQuestion=a.question,this.prepareToStartTurn(a.question),this.answerWasCorrectAnimations())},this.abilityResult=function(a){switch(info(a),a.id){case 1:this.restartTimer();var b=a.wrong[0],c=a.wrong[1];$(".answer.id-"+b+", .answer.id-"+c).off().animate({opacity:0},300);break;case 2:this.currentQuestion=a.question,this.nextAnimationsEnded=!0,this.pointsAnimationEnabled=!1,this.prepareToStartTurn(a.question);break;case 3:this.currentQuestion=a.question,this.isSwitchImages=!0,this.prepareToStartTurn(a.question)}},this.timeIsOut=function(a){this.stopGame(),this.pointsAmount=a.points,this.correctAnswer=a.correctAnswer,this.correctAnswersNumber=a.correctAnswersNumber,this.userName=a.name,this.stats=a.stats,this.showFalseAnswerAnimation()},this.stopGame=function(){this.gameFinished=!0,$(".ability").each(function(){Guess.Game.abilityButtonAnimation($(this))})},this.prepareToStartTurn=function(a){var b=[];switch(path="/images/game/guess/",a.type){case 1:b.push(path+a.picture),this.countImagesToLoad=1;break;case 2:b.push(path+a.options[0]),b.push(path+a.options[1]),b.push(path+a.options[2]),b.push(path+a.options[3]),this.countImagesToLoad=4}var c=$("<div></div>").addClass("to-delete").hide();for(var d in b)c.append('<img src="'+b[d]+'"/>');$("body").append(c),c.imagesLoaded().progress(Guess.Game.imagesLoaded)},this.imagesLoaded=function(){Guess.Game.countImagesToLoad--,0==Guess.Game.countImagesToLoad&&(Guess.Game.nextImagesLoaded=!0),Guess.Game.nextImagesLoaded&&Guess.Game.isSwitchImages?Guess.Game.switchImagesAction():Guess.Game.nextImagesLoaded&&Guess.Game.nextAnimationsEnded&&Guess.Game.showQuestionResult()},this.answerAnimationEnded=function(){this.nextAnimationsEnded=!0,this.nextImagesLoaded&&this.nextAnimationsEnded&&(this.gameFinished?this.showFalseAnswerAnimation():Guess.Game.showQuestionResult())},this.animateAnswerSent=function(){var a=$(".answer.name.id-"+this.currentAnswer+" .block");a.length&&($(".answer .block").off(),a.css({"background-color":Guess.Game.color.yellow})),this.hideOtherAnswers(this.currentAnswer),setTimeout(function(){Guess.Game.answerAnimationEnded()},300)},this.hideOtherAnswers=function(a){for(var b=0;4>b;b++){var c=$(".answer.id-"+b);b!==a&&(c.hasClass("name")&&c.find(".block").css({"background-color":Guess.Game.color.yellow}),c.animate({opacity:0},300))}},this.answerWasCorrectAnimations=function(){var a=$(".answer.name.id-"+this.currentAnswer+" .block");a.length&&($(".answer .block").stop(),a.animate({"background-color":Guess.Game.color.green,color:this.color.white},300))},this.showQuestionResult=function(){if($(".question").animate({opacity:0},{duration:1100,complete:function(){Guess.Game.startTurn(!1)}}),this.pointsAnimationEnabled){var a=this.resultK,b=this.resultSec,c=a*b;c!=parseInt(c)&&(c=Math.round(10*c)/10),this.pointsAmount+=c,this.pointsAmount!=parseInt(this.pointsAmount)&&(this.pointsAmount=Math.round(10*this.pointsAmount)/10),$(".add-points").delay(150).html(c).show().css({right:"-30px",opacity:1}).animate({right:"40%",opacity:.7},{duration:500,complete:function(){$(".points-amount").html(Guess.Game.pointsAmount).css({"font-size":"36px",color:Guess.Game.color.yellow}).animate({"font-size":"20px",color:"#ffffff"},500),$(this).hide()}})}else this.pointsAnimationEnabled=!0},this.abilityButtonAnimation=function(a){a.animate({"border-radius":"80px","background-color":Guess.Game.color.yellow},{duration:1200,complete:function(){$(this).hide(100)}}),a.delay(250).animate({opacity:0},{duration:1e3,queue:!1})},this.showFalseAnswerAnimation=function(){var a=1200;if("none"!=this.currentAnswer){var b=$(".answer.id-"+this.currentAnswer);b.animate({opacity:.8},a),b.hasClass("name")&&b.find(".block").animate({"background-color":Guess.Game.color.red,color:this.color.white},a)}else this.hideOtherAnswers(this.correctAnswer);var c=$(".answer.id-"+this.correctAnswer);c.animate({opacity:1},{duration:a}),c.hasClass("name")&&(c.find(".block").animate({"background-color":Guess.Game.color.green},a),$(".answer .block").off()),setTimeout(function(){Guess.Game.showEndModal()},2500)},this.showEndModal=function(){$(".turn-area, .col-md-10.timer").animate({opacity:0},{duration:300,complete:function(){$(".turn-area, .col-md-10.timer").hide(500)}}),setTimeout(function(){$(".game-area").removeClass("col-md-9").addClass("col-md-8"),$(".sidebar-col").removeClass("col-md-3").addClass("col-md-4")},800),$(".points-container").delay(800).animate({width:"100%"},300),$(".points").delay(1100).animate({height:"560px","padding-top":"50px","margin-top":"20px"},{duration:600,complete:function(){$(".points").addClass("points-modal"),Guess.Game.fillEndModal()}})},this.fillEndModal=function(){var a="You gave "+this.correctAnswersNumber+" correct answers",b=$("#template-end-modal").html();Mustache.parse(b);var c=Mustache.render(b,{data:{answers:this.correctAnswersNumber},number:this.pointsAmount,userName:this.userName}),d=$(c);$(".points-modal").html("").append(d),$(".points-amount .number").animate({"font-size":"40px"},800),$(".points-amount").animate({"font-size":"30px"},800);var e=[{text:" points",el:$(".points-amount .right"),options:{duration:500}},{text:a,el:$(".rest-stats-text"),options:{duration:800}}];this.userName?e.push({text:"Saved for name: "+this.userName,el:$(".modal-user-name"),options:{duration:800}}):Ajax.init(),$(".rest-stats-text").delay(1e3).animate({"font-size":"30px"},800),pasteText("You earned",$(".points-amount .left"),{duration:500,queue:e}),$(".facebook-placeholder").append($(".facebook-like-hidden :first-child"));var b=$("#template-sidebar-stats").html();Mustache.parse(b);var c=Mustache.render(b,{stats:this.stats}),d=$(c);$(".sidebar-col").html(""),$(".sidebar-col").append(d),d.fadeIn(400)},this.hideNameForm=function(){$(".end-modal").hide(),pasteText("Results saved :)",$(".modal-user-name"),{duration:500})},this.restartTimer=function(){$(".timer .progress-bar").css({width:"100%"}),this.secondsLeft=this.currentQuestion.sec,$(".timer .seconds .text").html(this.secondsLeft),$(".timer .seconds").css({"background-color":Guess.Game.color.green}).animate({"background-color":Guess.Game.color.red},1e3*this.currentQuestion.sec),this.turnStartTime=new Date,this.timerInterval=setInterval(function(){Guess.Game.timerTick()},1e3)},this.timerTick=function(){this.secondsLeft--;var a=this.checkTime(),b=100-a/(this.currentQuestion.sec/100);$(".timer .progress-bar").css({width:b+"%"}),$(".timer .seconds .text").html(this.secondsLeft)},this.stopTimer=function(){$(".timer .seconds").stop(),window.clearInterval(this.timerInterval)},this.checkTime=function(){var a=new Date,b=(a.getTime()-this.turnStartTime.getTime())/1e3;return b>this.currentQuestion.sec?(this.gameFinished=!0,url="/GuessSeries/timeIsOut",Ajax.json(url,{callBack:function(a){Guess.Game.timeIsOut(a)}}),window.clearInterval(this.timerInterval),$(".answer").off("click"),0):b},this.answerButtonMouseOver=function(a){$(".answer .block").css({"background-color":Guess.Game.color.blue,color:Guess.Game.color.white}),a.bounce(),a.animate({"background-color":Guess.Game.color.yellow,color:Guess.Game.color.black},{queue:!1,duration:400})},this.answerButtonMouseOut=function(a){a.stop(),a.css({"background-color":Guess.Game.color.blue,color:Guess.Game.color.white})},this.answerImageMouseOver=function(a){a.animate({"background-size":"103%"},{queue:!1,duration:400})},this.answerImageMouseOut=function(a){a.stop(),a.css({"background-size":"130%"})},this.adminDuffeculty=function(a){a=$(a),$(".difficulty-input").val(a.val())},this.seriesImagesGenerate=function(a){url="/GuessSeries/admin/generateImages",Ajax.json(url,{data:"seriesId="+a})}},CanvasActions=function(){this.tick_methods=[],this.objects=[],this.object_names=[],this.stage={},this.loader=new createjs.PreloadJS,this.assets=[],this.init=function(){this.stage=new createjs.Stage("demoCanvas"),this.stage.enableMouseOver(10),this.stage.mouseMoveOutside=!0,this.container=new createjs.Container,this.width=$("#demoCanvas").width(),this.height=$("#demoCanvas").height();var a=this.getMapManifest();this.loader.loadManifest(a),this.loader.onFileLoad=function(a){CanvasActions.handleFileLoad(a)},this.loader.onComplete=function(){CanvasActions.afterLoad()}},this.afterLoad=function(){this.createMap(),this.createRobot(),this.createMonster(),this.stage.addChild(this.container),this.stage.update(),createjs.Ticker.addListener(CanvasActions),createjs.Ticker.setFPS(30),createjs.Ticker.useRAF=!0},this.getMapManifest=function(){return[{src:"/images/game/map.png",id:"map"}]},this.createMap=function(){var a=new createjs.Container;a.x=this.width/2-32,a.y=this.height/2-32,this.map=new IL.Map(a),this.map.draw(),this.addTick(function(a){CanvasActions.map.draw()}),this.container.addChild(a)},this.createRobot=function(){var a=new createjs.Container;this.robot=new IL.Robot(a,this.map),this.robot.draw(),this.map.bindObject(this.robot),this.addTick(function(a){CanvasActions.robot.draw()}),this.container.addChild(a)},this.createMonster=function(){var a=new createjs.Container,b=new IL.Monster(a,this.map);this.map.bindObject(b);var c="monster_"+this.objects.length;b.setName(c),b.draw(),this.addObject(b,c),this.addTick(function(a){CanvasActions.getObject(c).draw()}),this.container.addChild(a)},this.addObject=function(a,b){this.objects.push(a),this.object_names.push(b)},this.getObject=function(a){var b=$.inArray(a,this.object_names);
return-1!=b?this.objects[b]:!1},this.addTick=function(a){this.tick_methods.push(a)},this.tick=function(a){if(this.tick_methods)for(var b in this.tick_methods)this.tick_methods[b](a);this.stage.update(a)},this.stop=function(){createjs.Ticker.setPaused(!0)},this.start=function(){createjs.Ticker.setPaused(!1)},this.handleFileLoad=function(a){this.addObject(a.result,a.id)}},IL=new IL,IL.Map=function(a){this.container=a,this.container_def_point=new IL.Point(a.x,a.y),this.needDraw=!0,this.cells=[],this.cell_idx=[],this.binded_objects=[],this.cell_width=64,this.map_radius=4,this.vision_radius=3,this.x=0,this.y=0,this.camera=new IL.Point(0,0),this.center=new IL.Point(0,0),this.centerPoint=new IL.Point(0,0),this.animation=new IL.Animation("move"),this.setCamera=function(a,b,c){Math.abs(a-this.center.x)>this.vision_radius*this.cell_width&&(a=this.center.x+this.vision_radius*this.cell_width*(this.center.x>this.camera.x?-1:1)),Math.abs(b-this.center.y)>this.vision_radius*this.cell_width&&(b=this.center.y+this.vision_radius*this.cell_width*(this.center.y>this.camera.y?-1:1)),c?this.animation.setSpeed(c).setStart(this.camera).setEnd(new IL.Point(a,b)).start():(this.camera.x=a,this.camera.y=b),this.needDraw=!0},this.move=function(a,b){this.center.x+=a*this.cell_width,this.center.y+=b*this.cell_width,this.centerPoint.x+=a,this.centerPoint.y+=b,this.setCamera(this.center.x,this.center.y,250),this.needDraw=!0};var b=this;this.container.onPress=function(a){var c={x:b.camera.x+a.stageX,y:b.camera.y+a.stageY};a.onMouseMove=function(a){b.setCamera(c.x-a.stageX,c.y-a.stageY)}},this.bindObject=function(a){this.binded_objects.push(a)},this.getSpriteType=function(a){var b=0,c=0;switch(a){case"floor":b=0,c=0;break;case"wall":b=8,c=5;break;case"wall_d1_1":b=9,c=6;break;case"wall_d1_2":b=0,c=7;break;case"wall_d1_3":b=1,c=7;break;case"wall_d1_4":b=2,c=7;break;case"wall_d2_1":b=3,c=7;break;case"wall_d2_2":b=4,c=7;break;case"wall_d2_3":b=5,c=7;break;case"wall_d2_4":b=6,c=7;break;case"wall_d3_1":b=7,c=7;break;case"wall_d3_2":b=8,c=7;break;case"wall_d3_3":b=9,c=7;break;case"wall_d3_4":b=0,c=8;break;case"floor_d":b=0,c=1;break;case"floor_1":b=2,c=1;break;case"floor_2":b=7,c=0;break;case"floor_3":b=3,c=1;break;case"floor_4":b=1,c=1;break;case"monst_1":b=1,c=8;break;case"monst_2":b=2,c=8;break;case"monst_3":b=3,c=8;break;case"monst_4":b=4,c=8;break;case"monst_5":b=5,c=8;break;case"monst_6":b=6,c=8;break;case"monst_7":b=7,c=8;break;case"monst_8":b=8,c=8;break;case"robot_1":b=9,c=8;break;case"robot_2":b=0,c=9;break;case"robot_3":b=1,c=9}return{x:b*this.cell_width,y:c*this.cell_width}},this.addCell=function(a){this.cells.push(a);var b=a.point.x+"_"+a.point.y;this.cell_idx.push(b)},this.addSimpleCell=function(a,b,c){this.addCell(new IL.Cell(new IL.Point(a,b),c))},this.getCell=function(a,b){var c=a+"_"+b,d=$.inArray(c,this.cell_idx);return-1!=d?this.cells[d]:!1},this.daleteCell=function(a,b){var c=a+"_"+b,d=$.inArray(c,this.cell_idx);-1!=d&&(this.cell_idx[d]="")},this.createPath=function(a,b){var c=[];c.opened=[],c.closed=[],c.linear=[];var d=this.getCell(a.x,a.y);d.closed=!1,d.opened=!0,d.cost=0,c.opened.push(d);for(var e,f=0,g=!1;(e=c.opened.shift())&&2e3>f&&!g;){c.closed.push(e),e.closed=!0;var h=this.getCell(e.point.x,e.point.y-1),i=this.getCell(e.point.x,e.point.y+1),j=this.getCell(e.point.x-1,e.point.y),k=this.getCell(e.point.x+1,e.point.y),l=[h,i,j,k];for(var m in l)if(l[m]&&!l[m].closed){if(l[m].point.x==b.x&&l[m].point.y==b.y){l[m].parent=e,g=l[m];break}!l[m].opened&&l[m].isPassable()&&(l[m].opened=!0,l[m].parent=e,l[m].cost=function(a){var c=(this.parent.cost&&this.parent.cost("g")||0)+10,d=Math.abs(this.x-b.x)+Math.abs(this.y-b.y);return"g"==a?c:"h"==a?d:c+d},c.opened.push(l[m]))}f++}for(var n in c.closed)c.closed[n].opened=!1,c.closed[n].closed=!1,c.closed[n].cost=0;for(var o in c.opened)c.opened[o].opened=!1,c.opened[o].closed=!1,c.opened[o].cost=0;if(!g)return info(c.opened),info("closed ="),info(c.closed),!1;g.opened=!1,g.closed=!1,g.cost=0;var p=[];if(g.point.x==a.x&&g.point.y==a.y)return p;for(var q=g.parent;;){if(q.point.x==a.x&&q.point.y==a.y)return p;if(p.push(q),!q.parent){info("error at CreatePath. BackPath");break}q=q.parent}},this.cells_options=["floor","floor","floor","floor","wall","wall","wall","wall","wall","wall","floor_d","floor_1","floor_2","floor_3","floor_4"],this.loadCell=function(a,b){var c=Math.floor(Math.random()*this.cells_options.length);return this.addSimpleCell(a,b,this.cells_options[c]),this.getCell(a,b)},this.getMiddlePoint=function(){return this.camera},this.checkAllVisibleCells=function(){var a=this.getMiddlePoint(),b=this.map_radius*this.cell_width,c=a.x-b,d=a.y-b;if(0>c)var e=-(c%this.cell_width);else var e=this.cell_width-c%this.cell_width;if(0>d)var f=-(d%this.cell_width);else var f=this.cell_width-d%this.cell_width;e?this.container.x=this.container_def_point.x-(this.cell_width-e):this.container.x=this.container_def_point.x,f?this.container.y=this.container_def_point.y-(this.cell_width-f):this.container.y=this.container_def_point.y;for(var g=Math.floor(c/this.cell_width),h=Math.floor(d/this.cell_width),i=g+2*this.map_radius+1+(0==e?0:1),j=h+2*this.map_radius+1+(0==f?0:1),k=-this.map_radius,l=-this.map_radius,m=g;i>m;m++,k++){l=-this.map_radius;for(var n=h;j>n;n++,l++){var o=this.getCell(m,n);o||(o=this.loadCell(m,n)),o.set(k,l),e?m==g?o.cutX(e-this.cell_width):m==i-1?o.cutX(e):o.cutX(0):o.cutX(0),f?n==h?o.cutY(f-this.cell_width):n==j-1?o.cutY(f):o.cutY(0):o.cutY(0)}}},this.draw=function(){if(this.needDraw){for(var a in this.binded_objects)this.binded_objects[a].update();this.animation.isRunning()&&(this.camera=this.animation.tic()),this.checkAllVisibleCells(),this.container.removeAllChildren();var b=!1;for(var a in this.cells)this.cells[a].visible&&(this.cells[a].draw(this.container,this.cell_width)&&(b=!0),this.cells[a].visible=!1);this.animation.isRunning()||b||(this.needDraw=!1)}},this.update=function(){this.needDraw=!0}},IL.Robot=function(a,b){this.container=a,this.map=b,this.direction=0,this.needDraw=!0,this.container.x=this.map.container.x+this.map.cell_width/2,this.container.y=this.map.container.y+this.map.cell_width/2,this.point=new IL.Point(this.map.centerPoint.x,this.map.centerPoint.y),this.animation=new IL.Animation("move"),this.img=new createjs.Bitmap(CanvasActions.getObject("map")),this.img.sourceRect=new createjs.Rectangle(9*this.map.cell_width,8*this.map.cell_width,64,64),this.img.regX=this.map.cell_width/2,this.img.regY=this.map.cell_width/2,this.move=function(a,b){if(this.animation.isRunning())return!1;var c=this.map.getCell(this.point.x+a,this.point.y+b);return c.isPassable()&&(c.take(),this.map.getCell(this.point.x,this.point.y).free(),this.animation.setStart(new IL.Point(this.point.x*this.map.cell_width,this.point.y*this.map.cell_width)),this.point.x+=a,this.point.y+=b,this.animation.setEnd(new IL.Point(this.point.x*this.map.cell_width,this.point.y*this.map.cell_width)).setSpeed(150).setType("move").start(),this.map.move(a,b),this.update()),this},this.rotate=function(a){return this.animation.isRunning()?!1:(this.animation.setStart(this.img.rotation),a>0&&(this.direction++,this.direction>3&&(this.direction=0,this.animation.setStart(-90))),0>a&&(this.direction--,this.direction<0&&(this.direction=3,this.animation.setStart(360))),this.animation.setType("rotate").setSpeed(150).setEnd(90*this.direction).start(),this.needDraw=!0,this)},this.forward=function(){switch(this.direction){case 0:this.move(0,-1);break;case 1:this.move(1,0);break;case 2:this.move(0,1);break;case 3:this.move(-1,0)}},this.backward=function(){switch(this.direction){case 0:this.move(0,1);break;case 1:this.move(-1,0);break;case 2:this.move(0,-1);break;case 3:this.move(1,0)}},this.destroyWall=function(){var a=this.point.next(this.direction),b=this.map.getCell(a.x,a.y);"wall"==b.type&&(b.runAnimation("destroyWall"),this.animation.setType("wait").setSpeed(400).start(),this.map.update())},this.getPosition=function(){return this.animation.isRunning()&&this.animation.isType("move")?this.animation.getLast():new IL.Point(this.point.x*this.map.cell_width,this.point.y*this.map.cell_width)},this.checkAngle=function(){this.animation.isRunning()&&this.animation.isType("rotate")?this.img.rotation=this.animation.getLast():this.img.rotation=90*this.direction},this.draw=function(){if(this.needDraw){this.animation.isRunning()&&this.animation.tic(),this.container.removeAllChildren();var a=this.getPosition();this.checkAngle(),this.img.x=-this.map.camera.x+a.x,this.img.y=-this.map.camera.y+a.y,this.container.addChild(this.img),this.animation.isRunning()||(this.needDraw=!1)}},this.update=function(){this.needDraw=!0}},IL.Monster=function(a,b){this.container=a,this.map=b,this.direction=2,this.type="crab",this.name="",this.needDraw=!0,this.spawn_radius=0,this.spawn=new IL.Point(0,1),this.point=new IL.Point(0,0),this.sprite=new IL.Point(0,0),this.path=!1,this.no_path=!1,this.target=!1,this.target_point=new IL.Point(0,0),this.spawned=!1,this.animationMove=new IL.Animation("move"),this.animation=new IL.Animation("spriteAnimation"),this.animation.setSpeed(1e3).setStart(["monst_1","monst_2","monst_3","monst_4","monst_5","monst_6","monst_7","monst_8"]).start(!0),this.container.x=this.map.container.x+this.map.cell_width/2,this.container.y=this.map.container.y+this.map.cell_width/2,this.img=new createjs.Bitmap(CanvasActions.getObject("map")),this.img.sourceRect=new createjs.Rectangle(1*this.map.cell_width,8*this.map.cell_width,this.map.cell_width,this.map.cell_width),this.img.regX=this.map.cell_width/2,this.img.regY=this.map.cell_width/2,this.setName=function(a){this.name=a},this.doSpawn=function(){if(this.spawn_radius>0)var a=this.spawn.x+Math.floor(Math.random()*this.spawn_radius)*(Math.random()>.5?1:-1),b=this.spawn.y+Math.floor(Math.random()*this.spawn_radius)*(Math.random()>.5?1:-1);else var a=this.spawn.x,b=this.spawn.y;this.point.set(a,b),this.spawned=!0},this.doSpawn(),this.move=function(){if(this.animationMove.isRunning())return!1;var a=this.point.next(this.direction),b=this.map.getCell(a.x,a.y);return b.isPassable()&&(b.take(),this.map.getCell(this.point.x,this.point.y).free(),this.animationMove.setStart(new IL.Point(this.point.x*this.map.cell_width,this.point.y*this.map.cell_width)),this.point=a,this.animationMove.setEnd(new IL.Point(this.point.x*this.map.cell_width,this.point.y*this.map.cell_width)).setSpeed(850).setType("move").start(),this.update()),this},this.rotate=function(a){return this.animationMove.isRunning()?!1:(this.animationMove.setStart(this.img.rotation),a>0&&(this.direction++,this.direction>3&&(this.direction=0,this.animationMove.setStart(-90))),0>a&&(this.direction--,this.direction<0&&(this.direction=3,this.animationMove.setStart(360))),this.animationMove.setType("rotate").setSpeed(350).setEnd(90*this.direction).start(),this.needDraw=!0,this)},this.getPosition=function(){return this.animationMove.isRunning()&&this.animationMove.isType("move")?this.animationMove.getLast():new IL.Point(this.point.x*this.map.cell_width,this.point.y*this.map.cell_width)},this.checkAngle=function(){this.animationMove.isRunning()&&this.animationMove.isType("rotate")?this.img.rotation=this.animationMove.getLast():this.img.rotation=90*this.direction},this.setType=function(a){this.type=a,this.sprite=CanvasActions.map.getSpriteType(a)},this.findTarget=function(){this.target=CanvasActions.robot},this.action=function(){if(!this.animationMove.isRunning()&&(this.target||this.findTarget(),(!this.path&&!this.no_path||this.target.point.x!=this.target_point.x||this.target.point.y!=this.target_point.y)&&(this.path=this.map.createPath(this.point,this.target.point),this.target_point.set(this.target.point.x,this.target.point.y),this.no_path=!this.path),this.path&&this.path.length>0)){var a=this.path[this.path.length-1].point,b=this.point.next(this.direction);if(b.x==a.x&&b.y==a.y)this.move(),this.path.pop();else{var c=this.direction+1;c>3&&(c=0);var d=this.point.next(c);d.x==a.x&&d.y==a.y?this.rotate(1):this.rotate(-1)}}},this.draw=function(){if(this.needDraw){this.action(),this.animationMove.isRunning()&&this.animationMove.tic(),this.setType(this.animation.tic()),this.container.removeAllChildren();var a=this.getPosition();this.checkAngle();var b=this.map.getCell(this.point.x,this.point.y);this.img.x=-this.map.camera.x+a.x+b.cutLeft,this.img.y=-this.map.camera.y+a.y+b.cutTop,this.img.sourceRect.x=this.sprite.x+b.cutLeft,this.img.sourceRect.y=this.sprite.y+b.cutTop,this.img.sourceRect.width=this.map.cell_width-b.cutLeft-b.cutRight,this.img.sourceRect.height=this.map.cell_width-b.cutTop-b.cutBottom,this.container.addChild(this.img),this.animation.isRunning()||this.animationMove.isRunning()||(this.needDraw=!1)}},this.update=function(){this.needDraw=!0}},IL.Point=function(a,b){this.x=a?a:0,this.y=b?b:0,this.set=function(a,b){return this.x=a,this.y=b,this},this.distance=function(a){return Math.sqrt(Math.pow(a.x-this.x,2)+Math.pow(a.y-this.y,2))},this.next=function(a){switch(a){case 0:return new IL.Point(this.x,this.y-1);case 1:return new IL.Point(this.x+1,this.y);case 2:return new IL.Point(this.x,this.y+1);case 3:return new IL.Point(this.x-1,this.y)}}},IL.Cell=function(a,b){this.visible=!1,this.shape=new createjs.Shape,this.window_point=new IL.Point(0,0),this.cutLeft=0,this.cutRight=0,this.cutTop=0,this.cutBottom=0,this.taken=!1,this.newType=!0,a?this.point=a:info("error. Cell needs a Point object"),this.setType=function(a){return this.type=a,this.sprite=CanvasActions.map.getSpriteType(a),this},this.setType(b),this.runAnimation=function(a){this.animation=new IL.Animation("spriteAnimation");var b=[["wall_d1_1","wall_d1_2","wall_d1_3","wall_d1_4","floor"],["wall_d2_1","wall_d2_2","wall_d2_3","wall_d2_4","floor"],["wall_d3_1","wall_d3_2","wall_d3_3","wall_d3_4","floor"]],c=Math.floor(Math.random()*b.length);return c==b.length&&c--,this.animation.setSpeed(700).setStart(b[c]).start(),this},this.set=function(a,b){return this.window_point.x=a,this.window_point.y=b,this.visible=!0,this},this.cutX=function(a){return 0>a?(this.cutLeft=-a,this.cutRight=0):a>0?(this.cutLeft=0,this.cutRight=a):this.cutRight=this.cutLeft=0,this},this.cutY=function(a){return 0>a?(this.cutTop=-a,this.cutBottom=0):a>0?(this.cutTop=0,this.cutBottom=a):this.cutTop=this.cutBottom=0,this},this.isPassable=function(){return"wall"==this.type||"hole"==this.type||this.taken?!1:!0},this.take=function(){return this.taken=!0,this},this.free=function(){return this.taken=!1,this},this.draw=function(a,b){if(this.newType&&(this.bitmap=new createjs.Bitmap(CanvasActions.getObject("map")),this.bitmap.sourceRect=new createjs.Rectangle(0,0,0,0),this.newType=!1),this.bitmap.x=b*this.window_point.x+this.cutLeft,this.bitmap.y=b*this.window_point.y+this.cutTop,this.bitmap.sourceRect.x=this.sprite.x+this.cutLeft,this.bitmap.sourceRect.y=this.sprite.y+this.cutTop,this.bitmap.sourceRect.width=b-this.cutLeft-this.cutRight,this.bitmap.sourceRect.height=b-this.cutTop-this.cutBottom,a.addChild(this.bitmap),this.animation&&this.animation.isRunning()){var c=this.animation.tic();return c!=this.type&&this.setType(c),!0}return!1}},IL.Animation=function(a){this.startObj,this.endObj,this.type=a,this.started=!1,this.working=!1,this.repeat=!1,this.repeat_times=-1,this.speed=0,this.start_time=0,this.last_tic=!1,this.start=function(a){return this.started=!0,this.working=!0,this.start_time=0,this.repeat=!!a,this},this.stop=function(){return this.working=!1,this},this.isRunning=function(){return this.working},this.setStart=function(a){return this.startObj=a,this},this.setEnd=function(a){return this.endObj=a,this},this.setSpeed=function(a){return this.speed=a,this},this.setType=function(a){return this.type=a,this},this.isType=function(a){return this.type===a},this.tic=function(){if(!this.working)return info("WTF tic try but animation is not working"),!1;this.start_time||(this.start_time=(new Date).getTime());var a=(new Date).getTime(),b=a-this.start_time;b>=this.speed&&(b=this.speed,this.repeat&&0!=this.repeat_times?(this.repeat_times--,this.start(!0)):this.stop());var c=b/this.speed;switch(this.type){case"move":var d=(this.endObj.x-this.startObj.x)*c+this.startObj.x,e=(this.endObj.y-this.startObj.y)*c+this.startObj.y;return this.last_tic=new IL.Point(d,e),this.last_tic;case"rotate":return this.last_tic=(this.endObj-this.startObj)*c+this.startObj,this.last_tic;case"spriteAnimation":var f=Math.round(this.startObj.length*c);return f==this.startObj.length&&(f=this.startObj.length-1),this.last_tic=this.startObj[f],this.last_tic;case"wait":return this.last_tic=!0,this.last_tic}return!1},this.getLast=function(){return this.last_tic}},IL.MapData=function(){this.map=[],this.set=function(a,b,c){this.map[a][b]=c}},$(document).ready(function(){return $(".game-template-container").length?(CanvasActions=new CanvasActions,CanvasActions.init(),void $(document).keypress(function(a){switch(a.keyCode){case 37:CanvasActions.robot.rotate(-1);break;case 38:CanvasActions.robot.backward();break;case 39:CanvasActions.robot.rotate(1);break;case 40:CanvasActions.robot.forward();break;case 13:break;case 119:CanvasActions.robot.forward();break;case 97:CanvasActions.robot.rotate(-1);break;case 115:CanvasActions.robot.backward();break;case 100:CanvasActions.robot.rotate(1);break;case 32:break;case 101:CanvasActions.robot.destroyWall();break;case 114:break;case 102:break;case 0:switch(a.charCode){case 119:CanvasActions.robot.forward("move");break;case 97:CanvasActions.robot.rotate(-1);break;case 115:CanvasActions.robot.backward();break;case 100:CanvasActions.robot.rotate(1);break;case 32:break;case 101:CanvasActions.robot.destroyWall();break;case 114:break;case 102:}}})):!1}),MathEffectPage=new MathEffectPage,TD=new TD,$(document).ready(function(){if($("body.math-effect").length){$("#modalHowUnitMoveButton").bind("click",function(){$("#modalHowUnitMove").modal({backdrop:"static",keyboard:!0,show:!0});var a="#modalHowUnitMove",b=$("#modalHowUnitMove iframe").attr("data-video"),c=b+"?autoplay=1";$(a+" iframe").attr("src",c),$(a+" .youtube-stop").click(function(){$(a+" iframe").attr("src",b)})});var a=!1,b=new TD.Game(a);b.init()}}),TD.Game=function(a){this.facet=new TD.Facet(this),this.mapConfig={},this.currentMap={},this.newMap={},this.running=!0,this.units={},this.lastUnitId=1,this.statsKilledPower=0,this.statsKilledUnits=0,this.statsLostUnits=0,this.statsLostPower=0,this.statsTicksSurvived=0,this.statsPoints=0,this.pointsPerKill=5,this.spawnBotsEveryTick=1,this.turnsBotWasSpawnd=0,this.chanceToSpawnBonus=15,this.init=function(){if(this.mapConfig=new TD.Map.Config,this.mapConfig.setSize(9),this.mapConfig.setSpawn(),this.currentMap=new TD.Map(this.facet,this.mapConfig),TD.Facet=this.facet,a){for(var b in a.units){var c=a.units[b],d=new TD.Unit(this);d.setPosition(c.x,c.y),d.setOwner(c.o),d.power=c.p,d.isBoss=!!c.b,d.active=c.a,d.direction=c.d,d.init()}if(a.bonuses)for(var b in a.bonuses){var e=a.bonuses[b],f=new TD.Bonus(this);f.x=e.x,f.y=e.y,f.power=e.p,f.type=e.t,this.currentMap.putBonusToMap(f,f.x,f.y)}}else this.spawnPlayerUnit(),this.spawnBotUnit();this.currentMap.drawMap(),this.currentMap.draw(this.units)},this.getNewUnitId=function(){return this.lastUnitId++},this.setUnit=function(a){debug("new unit:"+a.getId()+". Owner="+a.owner),this.units[a.getId()]=a,this.currentMap.setUnit(a)},this.removeUnit=function(a){debug("remove unit id = "+a.getId()),this.newMap.animateDeath(a),delete this.units[a.getId()]},this.getCenter=function(){return this.currentMap.getCenter()},this.checkUnitDirection=function(a){this.currentMap.checkUnitDirection(a)},this.spawnPlayerUnit=function(){if(!this.running)return void debug("can`t spawn unit. Game is stopped");var a=this.currentMap.getCenter(),b=this.currentMap.get(a.x,a.y);if(!b||void 0==this.units[b]){debug("SPAWN "+b),debug(this.units);var c=new TD.Unit(this);c.setPosition(a.x,a.y),c.setOwner("player"),c.init()}},this.spawnBotUnit=function(){if(!this.running)return void debug("can`t spawn unit. Game is stopped");if(0!=this.turnsBotWasSpawnd)return void this.turnsBotWasSpawnd--;this.turnsBotWasSpawnd=this.spawnBotsEveryTick;for(var a=!1,b=0;5>b;b++){var c=this.currentMap.getRandomBotSpawnCell();if(!this.currentMap.get(c.x,c.y)){debug("random coordinats x = "+c.x+" y = "+c.y),a=!0;break}}if(a){var d=new TD.Unit(this);d.setPosition(c.x,c.y),d.setOwner("bot"),d.activate(),d.init(),this.tryToSpawnBoss(d),this.currentMap.botUnitDirectionSetup(d)}},this.tryToSpawnBoss=function(a){var b=Math.round(this.statsTicksSurvived/10),c=Math.round(this.statsTicksSurvived/15),d=10,e=1+b;if(!(this.statsTicksSurvived<d||rand(0,100)>e)){var f=2+c,g=7+c;a.power=rand(f,g),a.isBoss=!0}},this.spawnBonus=function(){if(rand(1,100)<=this.chanceToSpawnBonus){var a=new TD.Bonus(this);this.currentMap.putBonusToMap(a)}},this.tick=function(){if(!this.running)return void debug("Game will not tick anymore!");this.newMap=new TD.Map(this.facet,this.mapConfig);for(var a in this.units)this.units[a].tick();this.duels(),this.battles(),this.handleBonuses(),this.newMap.getBonuses(this.currentMap),this.currentMap=this.newMap,this.newMap={},this.spawnPlayerUnit(),this.spawnBonus(),this.spawnBotUnit(),this.currentMap.draw(this.units),this.checkLoseConditions(),this.statsTicksSurvived++},this.duels=function(){for(var a in this.units){var b=this.units[a];if(b.active){var c=this.currentMap.get(b.x,b.y);if(c&&void 0!==this.units[c]){var d=this.units[c];if(d.x==b.oldX&&d.y==b.oldY){if(debug("Duel p1:"+b.power+" p2:"+d.power),b.power>d.power)var e=b,f=d;else var e=d,f=b;b.owner==d.owner?e.power=b.power+d.power:(e.power=e.power-f.power,this.statsBattle(e,f)),debug("remove unit duel"),this.removeUnit(f),0==e.power&&(debug("remove unit duel and winner"),this.removeUnit(e))}}}}},this.battles=function(){for(var a in this.units){var b=this.units[a],c=this.newMap.get(b.x,b.y);if(c&&void 0!==this.units[c]){var d=this.units[c];if(debug("Battle p1:"+b.power+" p2:"+d.power),b.power>d.power){var e=b,f=d;this.newMap.setUnit(b,!0)}else var e=d,f=b;b.owner==d.owner?e.power=e.power+f.power:(e.power=e.power-f.power,this.statsBattle(e,f)),debug("winner power:"+e.power),this.removeUnit(f),0==e.power&&(debug("remove unit battle and winner"),this.removeUnit(e))}else debug("set unit to map without battle p = "+b.power),this.newMap.setUnit(b,!0)}},this.statsBattle=function(a,b){"player"==a.owner?(this.statsKilledUnits++,this.statsPoints+=this.pointsPerKill,0==a.power&&this.statsLostUnits++):(this.statsLostUnits++,0==a.power&&(this.statsKilledUnits++,this.statsPoints+=this.pointsPerKill)),this.statsKilledPower+=b.power,this.statsLostPower+=b.power,this.statsPoints+=b.power},this.handleBonuses=function(){for(var a in this.currentMap.bonusesList){var b=this.currentMap.bonusesList[a],c=this.newMap.get(b.x,b.y);c&&void 0!=this.units[c]&&b.execute(this.units[c])}},this.userActionMoveUnit=function(a,b){if(debug("unit move"),this.checkUserUnit(a)){var c=this.units[a];if(c.direction==b&&1==c.active)return this.facet.stopGame(),void debug("unit is already moving to this direction");if(!isInt(b)||0>b||b>3)return this.facet.stopGame(),void debug("wrong direction provided by user ("+b+")");c.direction=b,c.activate(),this.tick()}},this.userActionStopUnit=function(a){this.checkUserUnit(a);var b=this.units[a];b.deactivate(),this.tick()},this.checkUserUnit=function(a){if(!a||void 0==this.units[a])return this.facet.stopGame(),debug("unit not found. unitId = "+a),!1;var b=this.units[a];return"player"!=b.owner?(this.facet.stopGame(),debug("unit don`t belong to user. unitId = "+a),!1):!0},this.checkLoseConditions=function(){var a=this.currentMap.getCenter();if(unitId=this.currentMap.get(a.x,a.y),unitId&&void 0!==this.units[unitId]&&"player"!=this.units[unitId].owner){this.stop(),$("#turnsSurvived").html(this.statsTicksSurvived),$("#unitsKilled").html(this.statsKilledUnits),$("#pointsEarned").html(this.statsPoints),$("#myModal").modal({backdrop:"static",keyboard:!0,show:!0});var b=$("#checkKey").val();Ajax.json("/MathEffect/save",{data:"turnsSurvived="+this.statsTicksSurvived+"&unitsKilled="+this.statsKilledUnits+"&pointsEarned="+this.statsPoints+"&checkKey="+b+"&_token="+$("#laravel-token").val()})}},this.stop=function(){this.running=!1}},TD.Facet=function(a){this.game=a,this.lockValue=!1,this.stopGame=function(){this.game.stop()},this.lock=function(){this.lockValue=!0},this.unlock=function(){this.lockValue=!1},this.isLock=function(){return this.lockValue},this.userActionMoveUnit=function(a,b){this.isLock()||(this.lock(),this.game.userActionMoveUnit(a,b),this.unlock())},this.userActionStopUnit=function(a){this.isLock()||(this.lock(),this.game.userActionStopUnit(a),this.unlock())}},TD.Map=function(a,b){this.facet=a,this.config=b,this.unitIds={},this.mapEl=!1,this.oneCellPixelSize=64,this.deathAnimations=[],this.directionName=["up","right","down","left"],this.bonuses=[],this.bonusesList=[],this.size=b.getSize(),this.center=b.getCenter().x,this.getRandomBotSpawnCell=function(){var a=rand(1,this.config.getTotalSpawnCells());return a>this.config.getTotalSpawnCells()&&(a=this.config.getTotalSpawnCells()),this.config.getSpawnCellsFlat(a)},this.getCenter=function(){return this.config.getCenter()},this.setUnit=function(a){void 0!==this.unitIds[a.x]?void 0!==this.unitIds[a.x][a.y]&&info("We can`t put a unit to occupied cell (But this is ok some times =_=)"):this.unitIds[a.x]={},this.unitIds[a.x][a.y]=a.getId()},this.removeUnit=function(a){var b=this.get(a.x,a.y);b&&(this.unitIds[a.x][a.y]=void 0)},this.get=function(a,b){return void 0!==this.unitIds[a]&&void 0!==this.unitIds[a][b]?this.unitIds[a][b]:!1},this.getRandomCoordNotinCenter=function(){return 1==rand(0,1)?rand(1,this.center-2):rand(this.center+2,this.size-2)},this.putBonusToMap=function(a,b,c){if(!b&&!c&&(a.x=this.getRandomCoordNotinCenter(),a.y=this.getRandomCoordNotinCenter(),this.get(a.x,a.y)))return debug("Can`t put bonus under unit!"),!1;if(void 0!==this.bonuses[a.x]){if(void 0!==this.bonuses[a.x][a.y])return debug("We can`t put a bonus to occupied cell (But this is ok some times =_=)"),!1}else this.bonuses[a.x]={};this.bonuses[a.x][a.y]=a,this.bonusesList.push(a)},this.getBonuses=function(a){this.bonuses=a.bonuses;for(var b in a.bonusesList){var c=a.bonusesList[b];c.active?this.bonusesList.push(c):delete this.bonuses[c.x][c.y]}},this.getNextCell=function(a,b,c){switch(c){case 0:b--;break;case 1:a++;break;case 2:b++;break;case 3:a--}return 0>a||0>b||a>=this.size||b>=this.size?!1:{x:a,y:b}},this.checkUnitDirection=function(a){var b=this.getNextCell(a.x,a.y,a.direction);if(b||a.deactivate(),"bot"==a.owner&&(a.x!=a.oldX||a.y!=a.oldY)){var c=this.getCenter().x;(a.x>=c-1&&a.x<=c+1||a.y>=c-1&&a.y<=c+1)&&(debug("BOT_PATH: unit is in roads"),a.oldX>=c-1&&a.oldX<=c+1||a.oldY>=c-1&&a.oldY<=c+1?(debug("BOT_PATH: unit was already on roads"),(a.x==c||a.y==c)&&(debug("BOT_PATH: unit is on center road"),a.oldX==c||a.oldY==c||(debug("BOT_PATH: unit just entered center road"),a.direction=this.getDirectionToCenter(a.x,a.y),debug("New direction for unit on main road = "+a.direction)))):(a.direction=this.getDirectionForSideRoad(a.x,a.y),debug("New direction for unit on side road = "+a.direction)))}},this.getDirectionToCenter=function(a,b){var c=this.getCenter().x;return a!=c?c>a?1:3:c>b?2:0},this.getDirectionForSideRoad=function(a,b){var c=this.getCenter().x;return a==c-1||a==c+1?c>b?2:0:c>a?1:3},this.botUnitDirectionSetup=function(a){possibleDirections=[],0==a.x?possibleDirections.push(1):a.x==this.size-1&&possibleDirections.push(3),0==a.y?possibleDirections.push(2):a.y==this.size-1&&possibleDirections.push(0),possibleDirections.length>1&&1==rand(0,1)?a.direction=possibleDirections[1]:a.direction=possibleDirections[0]},this.animateDeath=function(a){this.deathAnimations.push({id:a.getId(),x:a.x,y:a.y,direction:a.direction,active:a.active})},this.draw=function(a){this.mapEl=$("#tdMap"),$("#tdMap .tdUnit").addClass("inUpdate");for(var b in a)a[b]&&this.drawUnit(a[b]);for(var b in this.deathAnimations)this.drawDeath(this.deathAnimations[b]);this.drawBonus(),this.deathAnimations=[],this.isDrawn=!0},this.drawMap=function(){var a=this.getCenter().x;this.mapEl=$("#tdMap"),this.mapEl.html("").width(this.size*this.oneCellPixelSize);for(var b=0;b<this.size;b++)for(var c=0;c<this.size;c++){var d=$("<div></div>").addClass("tdCell").addClass("cell-"+c+"-"+b).addClass("emptyCell");(c>=a-1&&a+1>=c||b>=a-1&&a+1>=b)&&(c==a||b==a?d.addClass("main-road"):d.addClass("side-road")),this.mapEl.append(d)}this.drawHelpPath()},this.drawBonus=function(){$("#tdMap .bonus").remove();for(var a in this.bonusesList){var b=this.bonusesList[a];$(".cell-"+b.x+"-"+b.y).append($("<div>"+b.getText()+"</div>").addClass("bonus").addClass("b-"+b.type))}},this.helpPathShowCallback=function(a,b){return function(){$(".arrow-for-"+a+"-"+b).fadeIn(400)}},this.helpPathHideCallback=function(a,b){return function(){$(".arrow-for-"+a+"-"+b).clearQueue().hide().css("opacity",100)}},this.drawHelpPath=function(){for(var a=0;a<this.size;a++)for(var b=0;b<this.size;b++)if(0==b||b==this.size-1||0==a||a==this.size-1){var c=$(".cell-"+b+"-"+a),d=0;0==b&&(d=1),b==this.size-1&&(d=3),0==a&&(d=2),a==this.size-1&&(d=0),this.drawHelpPathDirection(b,a,d),(b==a||0==b&&a==this.size-1||b==this.size-1&&0==a)&&(0==b?this.drawHelpPathDirection(b,a,1):this.drawHelpPathDirection(b,a,3)),c.bind("mouseenter",this.helpPathShowCallback(b,a)),c.bind("mouseleave",this.helpPathHideCallback(b,a))}},this.drawHelpPathDirection=function(a,b,c){var d=this.config.getCenter().x,e=!1,f=!1;(a==d||b==d)&&(e=!0),(a>=d-1&&d+1>=a||b>=d-1&&d+1>=b)&&(f=!0);for(var g=a,h=b;g!=d||h!=d;){var i=$(".cell-"+g+"-"+h+" .arrow-"+c);if(i[0])i.addClass("arrow-for-"+a+"-"+b);else{var j=$("<div></div>").addClass("arrow").addClass("arrow-for-"+a+"-"+b).addClass("arrow-"+c).addClass("fa fa-long-arrow-"+this.directionName[c]);$(".cell-"+g+"-"+h).append(j)}switch(c){case 0:h--;break;case 1:g++;break;case 2:h++;break;case 3:g--}!f&&(g>=d-1&&d+1>=g||h>=d-1&&d+1>=h)&&(c=this.getDirectionForSideRoad(g,h),f=!0),e||g!=d&&h!=d||(c=this.getDirectionToCenter(g,h),e=!0)}},this.drawUnit=function(a){var b=$(".unit-"+a.getId());if(b[0])"player"==a.owner&&this.makeButtonsforUnit(b,a),b.removeClass("inUpdate"),b.animate({left:a.x*this.oneCellPixelSize,top:a.y*this.oneCellPixelSize},1e3),b.removeClass("unit-move-0").removeClass("unit-move-1").removeClass("unit-move-2").removeClass("unit-move-3");else{var b=$("<div></div>").addClass("tdUnit").addClass("unit-"+a.getId());"player"==a.owner?(b.addClass("playerUnit"),this.makeButtonsforUnit(b,a)):b.addClass("botUnit"),a.isBoss&&b.addClass("boss"),b.hide(),b.css("left",a.x*this.oneCellPixelSize),b.css("top",a.y*this.oneCellPixelSize),b.fadeIn(1e3);var c=$("<div></div>").addClass("moveArrow");b.append(c);var d=$("<div></div>").addClass("moveBlock");b.append(d);var e=$("<div></div>").addClass("unitPower");b.append(e),this.mapEl.append(b)}this.setUnitElPower(a),a.active&&b.addClass("unit-move-"+a.direction)},this.setUnitElPower=function(a){var b=$(".unit-"+a.getId());$(".unit-"+a.getId()+" .unitPower").html(a.power);var c=Math.ceil(a.power/4);c>10&&(c=10),b.removeClass("power-1","power-2","power-3","power-4","power-5","power-6","power-7","power-8","power-9","power-10"),b.addClass("power-"+c)},this.drawDeath=function(a){var b=$(".unit-"+a.id);b.removeClass("inUpdate"),a.active&&(b.removeClass("unit-move-0").removeClass("unit-move-1").removeClass("unit-move-2").removeClass("unit-move-3"),b.addClass("unit-move-"+a.direction)),b.find(".tdButton").remove(),b.animate({left:a.x*this.oneCellPixelSize,top:a.y*this.oneCellPixelSize,opacity:0},1e3,function(a){$(this).remove()})},this.makeButtonsforUnit=function(a,b){a.find(".tdButton")[0]||this.createButtonsForUnit(a,b),a.find(".tdButton").show(),1==b.active&&a.find(".arrow-"+b.direction).hide()},this.createButtonsForUnit=function(a,b){var c=["go_0","go_1","go_2","go_3"];for(var d in c){var e=$("<div></div>").addClass("tdButton");switch(c[d]){case"stop":switch(e.addClass("fa fa-shield").bind("click",function(){TD.Facet.userActionStopUnit(b.getId());
}),b.direction){case 0:e.addClass("tdGoTopButton");break;case 1:e.addClass("tdGoRightButton");break;case 2:e.addClass("tdGoBottomButton");break;case 3:e.addClass("tdGoLeftButton")}break;case"go_0":case"go_1":case"go_2":case"go_3":var f=parseInt(c[d].substr(3,1));e.addClass("arrow-"+f).addClass("fa fa-arrow-circle-"+this.directionName[f]).bind("click",this.helpUserActionMoveCallback(b.getId(),f));break;default:e=!1}e&&a.append(e)}},this.helpUserActionMoveCallback=function(a,b){return function(){TD.Facet.userActionMoveUnit(a,b)}}},TD.Map.Config=function(){this.size=0,this.cells=[],this.spawnCells=[],this.spawnCellsFlat=[],this.totalSpawnCells=0,this.center=0,this.setSize=function(a){this.size=a,this.center=Math.round(a/2)-1},this.getSize=function(){return this.size},this.setCells=function(a){this.height=a},this.getCenter=function(){return{x:this.center,y:this.center}},this.setSpawn=function(){if(!this.size)return void info("Map size it not setup for calculating spawn cells");for(var a=0;a<this.size;a++)for(var b=0;b<this.size;b++)(0==a||0==b||a==this.size-1||b==this.size-1)&&(this.totalSpawnCells++,this.spawnCellsFlat[this.totalSpawnCells]={x:a,y:b})},this.getTotalSpawnCells=function(){return this.totalSpawnCells},this.getSpawnCellsFlat=function(a){return this.spawnCellsFlat[a]}},TD.Unit=function(a){this.game=a,this.direction=0,this.active=!1,this.power=1,this.unitId=0,this.oldX=0,this.oldY=0,this.x=0,this.y=0,this.owner="",this.isBoss=!1,this.notMovingTurns=0,this.turnsForDebuffToStart=4,this.init=function(){this.unitId=this.game.getNewUnitId(),this.game.setUnit(this)},this.tick=function(){var a=this.game.getCenter();a.x==this.x&&a.y==this.y&&this.power++,this.active&&this.game.checkUnitDirection(this),this.active?(this.power++,this.move()):this.notMovingDebuff()},this.move=function(a,b){if(this.notMovingTurns=0,this.turnsForDebuffToStart=4,a&&b);else switch(this.direction){case 0:a=this.x,b=this.y-1;break;case 1:a=this.x+1,b=this.y;break;case 2:a=this.x,b=this.y+1;break;case 3:a=this.x-1,b=this.y}this.oldX=this.x,this.oldY=this.y,this.x=a,this.y=b,debug("Unit with power "+this.power+" is moving from ("+this.oldX+", "+this.oldY+") to ("+this.x+", "+this.y+")")},this.notMovingDebuff=function(){this.notMovingTurns++;var a=this.game.getCenter().x;(this.x!=a||this.y!=a)&&this.notMovingTurns>=this.turnsForDebuffToStart&&(this.power--,this.power>30&&this.power--,this.power>60&&this.power--,this.notMovingTurns=0,this.turnsForDebuffToStart>1&&this.turnsForDebuffToStart--,this.power<=0&&this.game.removeUnit(this))},this.getId=function(){return this.unitId},this.setPosition=function(a,b){this.x=a,this.oldX=a,this.y=b,this.oldY=b},this.setOwner=function(a){switch(a){case"player":case"bot":break;default:info("Unit owner is wrong")}this.owner=a},this.activate=function(){this.active=!0},this.deactivate=function(){this.active=!1}},TD.Bonus=function(a){this.game=a,this.id=0,this.x=0,this.y=0,this.active=1,this.power=0,this.type="",this.possibleTypes=["plus","minus"],this.typesPowers={plus:[1,5],minus:[1,5]},this.type=this.possibleTypes[rand(0,this.possibleTypes.length-1)],this.power=rand(this.typesPowers[this.type][0],this.typesPowers[this.type][1]),this.execute=function(a){switch(this.type){case"plus":a.power+=this.power;break;case"minus":a.power-=this.power,a.power<=0&&this.game.removeUnit(a)}this.active=!1},this.getText=function(){switch(this.type){case"plus":return"+"+this.power;case"minus":return"-"+this.power}}},$("body.robot-rock").length>0&&$(document).ready(function(){var a=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,2,2,2,2,2,1,2,2,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,0,0,0],[0,2,2,1,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0],[0,2,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0],[0,2,0,0,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0],[2,2,2,1,2,2,2,1,1,1,0,0,0,2,0,0,0,0,0,0],[0,1,2,1,1,2,2,1,2,2,2,0,0,2,0,0,0,0,0,0],[0,2,2,1,2,1,2,1,2,2,2,2,2,2,0,0,0,0,0,0],[0,1,0,1,2,1,2,1,2,2,2,2,0,2,0,0,0,0,0,0],[0,2,2,2,2,2,2,1,2,1,2,2,2,2,0,0,0,0,0,0],[0,2,0,2,2,1,1,1,2,2,2,2,1,2,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];game=new RRAnimator(a),game.init("/rr/"),pl=[],pl[3]=new Player;var b=pl[3];b.id=3,b.events=[{code:"F1",time:4091,attrs:{start_time:4091,start_x:5.5,start_y:8.5,end_time:4271,end_x:7.37,end_y:11.39}}],b.bot.id=3,b.bot.x=14,b.bot.y=14,b.bot.d=1,b.bot.model=Math.round(2*Math.random()+1),b.log={11:"M1",261:"M1",511:"M1",761:"M1",1011:"M1",1261:"M1",1511:"R2",1671:"M1",1921:"M1",2171:"M1",2421:"M1",2671:"M1",2921:"M1",3171:"M1",3421:"M1",3671:"M1",3921:"R2",4091:"F1",4591:"D1",5551:"ST"},game.addPlayer(b),pl[1]=new Player;var b=pl[1];b.id=1,b.events=[{code:"F1",time:3001,attrs:{start_time:3001,start_x:6.5,start_y:5.5,end_time:3241,end_x:9.62,end_y:9.1}},{code:"F1",time:3501,attrs:{start_time:3501,start_x:6.5,start_y:5.5,end_time:3821,end_x:7.74,end_y:11.39}},{code:"F1",time:4001,attrs:{start_time:4001,start_x:6.5,start_y:5.5,end_time:4161,end_x:5.45,end_y:8.35}},{code:"F1",time:4501,attrs:{start_time:4501,start_x:6.5,start_y:5.5,end_time:4721,end_x:4.96,end_y:9.68}},{code:"F1",time:5341,attrs:{start_time:5341,start_x:6.5,start_y:6.5,end_time:5501,end_x:7.4,end_y:9.35}}],b.bot.id=1,b.bot.x=2,b.bot.y=2,b.bot.d=3,b.bot.model=Math.round(2*Math.random()+1),b.log={11:"R2",171:"M1",511:"M1",841:"M1",1171:"M1",1511:"R2",1671:"R2",1841:"R2",2001:"M1",2341:"M1",2671:"M1",3001:"F1",3501:"F1",4001:"F1",4501:"F1",5001:"M1",5341:"F1",5551:"ST"},game.addPlayer(b),pl[2]=new Player;var b=pl[2];b.id=2,b.events=[{code:"F1",time:3371,attrs:{start_time:3371,start_x:7.5,start_y:11.5,end_time:3651,end_x:7.78,end_y:5.9}},{code:"F1",time:3871,attrs:{start_time:3871,start_x:7.5,start_y:11.5,end_time:4061,end_x:5.7,end_y:8.44}},{code:"F1",time:4371,attrs:{start_time:4371,start_x:7.5,start_y:11.5,end_time:4551,end_x:5.63,end_y:8.61}}],b.bot.id=2,b.bot.x=2,b.bot.y=14,b.bot.d=1,b.bot.model=Math.round(2*Math.random()+1),b.log={41:"M1",381:"R2",541:"R2",711:"R2",871:"M1",1211:"M1",1541:"M1",1871:"M1",2211:"M1",2541:"R2",2711:"M1",3041:"M1",3371:"F1",3871:"F1",4371:"F1",4871:"M1",5201:"M1",5541:"D1",5551:"ST"},game.addPlayer(b),game.draw()}),loadBot=function(a,b,c){var d=c.layers[b.id],e=(c.layers.bullets,d.addObject("bot","image").setXY(-(c.bot_square/2),-(c.bot_square/2),c.bot_square,c.bot_square,0,0,c.bot_square,c.bot_square));switch(info(c.path+"pics/tank4.png"),a){case 1:e.addAnimation("normal",1,6,[6,6,6,6,6,6]).addAnimation("fire",2,6,[5,5,5,5,5,5]).addAnimation("move",1,6,[6,6,6,6,6,6]).addAnimation("rotate",1,6,[6,6,6,6,6,6]).addAnimation("death",3,6,[10,10,10,10,10,10]).runAnimation("normal",-1).img(c.path+"pics/tank4.png"),D_func=function(a,b){var c=a.getLayer(b),d=c.getObject("bot");d.set("sy",92).set("sx",240).runAnimation("death",1)},F_func=function(a,b){var c=a.getLayer(b),d=c.getObject("bot");d.runAnimation("fire",1)},c.addEvent("D1",b.id,D_func),c.addEvent("F1",b.id,F_func);break;case 2:e.addAnimation("normal",1,6,[6,6,6,6,6,6]).addAnimation("move",1,6,[6,6,6,6,6,6]).addAnimation("rotate",1,6,[6,6,6,6,6,6]).addAnimation("death",2,6,[10,10,10,10,10,10]).runAnimation("normal",-1).img(c.path+"pics/tank3.png"),D_func=function(a,b){var c=a.getLayer(b),d=c.getObject("bot"),e=c.getObject("gun");d.set("sy",48).set("sx",240).runAnimation("death",1),e.set("sy",76).set("sx",240).runAnimation("death",1)},F_func=function(a,b){var c=a.getLayer(b),d=c.getObject("gun");d.runAnimation("fire",1)};var f=c.layers[b.id].addObject("gun","image").img(c.path+"pics/gun3.png").setXY(0-c.bot_square/2,0-c.bot_square/2,c.bot_square,c.bot_square,0,0,c.bot_square,c.bot_square);f.addAnimation("fire",2,6,[6,6,6,6,6,6]).addAnimation("death",3,6,[5,5,5,5,5,5]).runAnimation("normal",-1),c.addEvent("D1",b.id,D_func),c.addEvent("F1",b.id,F_func);break;case 3:e.addAnimation("normal",1,6,[6,6,6,6,6,6]).addAnimation("move",1,6,[6,6,6,6,6,6]).addAnimation("rotate",1,6,[6,6,6,6,6,6]).addAnimation("death",2,6,[10,10,10,10,10,10]).runAnimation("normal",-1).img(c.path+"pics/tank1.png"),D_func=function(a,b){var c=a.getLayer(b),d=c.getObject("bot"),e=c.getObject("gun");d.set("sy",48).set("sx",240).runAnimation("death",1),e.set("sy",76).set("sx",240).runAnimation("death",1)},F_func=function(a,b){var c=a.getLayer(b),d=c.getObject("gun");d.runAnimation("fire",1)};var f=c.layers[b.id].addObject("gun","image").img(c.path+"pics/gun1.png").setXY(0-c.bot_square/2,0-c.bot_square/2,c.bot_square,c.bot_square,0,0,c.bot_square,c.bot_square);f.addAnimation("fire",2,6,[6,6,6,6,6,6]).addAnimation("death",3,6,[5,5,5,5,5,5]).runAnimation("normal",-1),c.addEvent("D1",b.id,D_func),c.addEvent("F1",b.id,F_func)}},MageS=new MageS,$(document).ready(function(){if($("body.mage-survival").length){MageS.Game=new MageS.Game;var a=new MageS.Animations(MageS.Game),b=new MageS.Attacks(MageS.Game),c=new MageS.Inventory(MageS.Game),d=new MageS.Spellbook(MageS.Game),e=new MageS.Spells(MageS.Game),f=new MageS.Worlds(MageS.Game),g=new MageS.Objects(MageS.Game),h=new MageS.Units(MageS.Game),i=new MageS.Mage(MageS.Game),j=new MageS.Admin(MageS.Game),k=new MageS.Chat(MageS.Game),l=new MageS.Home(MageS.Game),m=new MageS.Spellcraft(MageS.Game),n=new MageS.Monimations(MageS.Game);MageS.Game.init(c,d,e,f,g,h,i,j,k,l,m,a,b,n)}}),MageS.Game=function(){this.color={blue:"#529BCA",darkBlue:"#428BBA",lightBlue:"#77d2e1",green:"#069E2D",yellow:"#FFD416",red:"#FF8360",purple:"#c700d6",purpleDark:"#990096",orange:"#F07818",black:"#584D3D",white:"#FFFFFF",grey:"#777",clay:"#FCEBB6",sand:"#c2b280",brown:"#5E412F",brownBright:"#726056"},this.device="pc",this.inventory={},this.spellbook={},this.spells={},this.worlds={},this.objects={},this.units={},this.mage={},this.admin={},this.chat={},this.home={},this.spellcraft={},this.animations={},this.attacks={},this.monimations={},this.gameStatus=$("#game-status").val(),this.rawData=[],this.svg=$("<div></div>"),this.svgToLoad=0,this.callback={},this.turn=0,this.worldType=0,this.actionInProcess=!1,this.gameInited=!1,this.isGameRuning=!0,this.availableDirections=[],this.fieldRadius=5,this.cellSize=1.6,this.itemSize=1.7,this.rem=20,this.mageInventorySize=7*this.itemSize+.9,this.mageMobileInventorySize=6*this.itemSize,this.animationTime=350,this.battleFieldSize=(2*this.fieldRadius+1)*this.cellSize,this.deviceCheck=function(){$(window).width()<992?(this.device="tablet",$(window).width()<768&&(this.device="mobile")):this.device="pc"},this.init=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){switch(this.inventory=a,this.spellbook=b,this.spells=c,c.init(),this.worlds=d,this.objects=e,this.units=f,this.mage=g,this.admin=h,this.chat=i,this.home=j,this.spellcraft=k,k.init(),this.animations=l,this.attacks=m,m.init(),this.monimations=n,this.deviceCheck(),this.gameStatus){case"mage-list":this.home.init(),this.initSVG(function(){MageS.Game.replaceMissingSvg()});break;case"mage-home":this.initSVG(function(){MageS.Game.replaceMissingSvg(),MageS.Game.home.startAnimation(),setTimeout(function(){MageS.Game.hideGameLoadOverlay()},150)});break;case"battle":this.deviceInit(),info(this.device),this.initSVG(function(){if(MageS.Game.chat.buildChat(),MageS.Game.buildMap(),MageS.Game.mage.drawMage(MageS.Game.rawData.mage),MageS.Game.updateActions(MageS.Game.rawData.actions,!0),MageS.Game.spellbook.buildSpells(),MageS.Game.inventory.buildItems(),MageS.Game.buildUnits(),MageS.Game.replaceMissingSvg(),MageS.Game.updateHealth(MageS.Game.rawData.mage),"mobile"!==MageS.Game.device)setTimeout(function(){MageS.Game.hideGameLoadOverlay(),MageS.Game.mage.onLoad()},150);else{$("#overlay-loading-text").hide();var a=$("#overlay-tap-text");a.show(),MageS.Game.monimations.blastInScale(a,2),$(".game-load-overlay").on("click",function(){MageS.Game.hideGameLoadOverlay(),MageS.Game.mage.onLoad()})}}),this.configureKeys();break;case"admin":this.admin.init();break;case"admin-battle":this.deviceInit(),this.initSVG(function(){MageS.Game.chat.buildChat(),MageS.Game.buildMap(),MageS.Game.mage.drawMage(MageS.Game.rawData.mage),MageS.Game.updateActions(MageS.Game.rawData.actions,!0),MageS.Game.spellbook.buildSpells(),MageS.Game.inventory.buildItems(),MageS.Game.buildUnits(),MageS.Game.replaceMissingSvg(),MageS.Game.updateHealth(MageS.Game.rawData.mage),MageS.Game.hideGameLoadOverlay(),MageS.Game.mage.onLoad(),MageS.Game.admin.isEnabled=!0,setTimeout(function(){MageS.Game.admin.start()},600)})}},this.hideGameLoadOverlay=function(){MageS.Game.gameInited||("mobile"==this.device&&MageS.Game.toggleFullScreen(),$(".game-load-overlay").animate({opacity:"0"},{duration:1e3,complete:function(){$(".loading-field").append($(this).find(".load-animation").css({width:"140%",height:"100%","margin-top":"5%"})),$(this).remove()}}),MageS.Game.gameInited=!0)},this.deviceInit=function(){if("pc"==this.device)$(".interface-switch-panel").remove();else if($(".toggle-inventory").on("click",function(){MageS.Game.inventory.toggleInventory()}),$(".toggle-spellbook").on("click",function(){MageS.Game.spellbook.toggleSpellbook()}),$(".toggle-chat").on("click",function(){MageS.Game.chat.swipeEnd()}),"pc"!==this.device){this.spellbook.showSpellbook();var a=new Hammer(document.getElementById("battle-border"),{});a.get("pan").set({direction:Hammer.DIRECTION_ALL}),a.get("swipe").set({direction:Hammer.DIRECTION_VERTICAL}),a.on("panup",function(a){MageS.Game.swipe(a,0)}),a.on("panright",function(a){MageS.Game.swipe(a,1)}),a.on("pandown",function(a){MageS.Game.swipe(a,2)}),a.on("panleft",function(a){MageS.Game.swipe(a,3)}),a.on("panend",function(a){MageS.Game.swipeEnd(a)}),$("#mobile-spell-info-container").on("click",function(){MageS.Game.spellbook.toggleHiddenDescription()});var a=new Hammer(document.getElementById("mobile-spell-info-container"),{});a.get("pan").set({direction:Hammer.DIRECTION_ALL}),a.on("panright",function(a){MageS.Game.spellbook.panMobileSpellDescriptionRight(a)}),a.on("panleft",function(a){MageS.Game.spellbook.panMobileSpellDescriptionLeft(a)}),a.on("panend",function(a){MageS.Game.spellbook.toggleHiddenDescription()})}},this.toggleFullScreen=function(){var a=window.document,b=a.documentElement,c=b.requestFullscreen||b.mozRequestFullScreen||b.webkitRequestFullScreen||b.msRequestFullscreen,d=a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen;c&&(a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement||a.msFullscreenElement?d.call(a):c.call(b))},this.trytoGoFullScreen=function(){var a=window.document;a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement||a.msFullscreenElement||this.toggleFullScreen()},this.pageResize=function(){var a=this.rem,b=$(window).width();switch(this.device){case"mobile":b>=428?a=24:b>=408?a=23:b>=388?a=22:b>=368?a=21:300>=b?a=17:320>=b?a=18:338>=b?a=19:360>=b&&(a=20)}this.rem=a,$("html").css("font-size",a+"px")},this.swipe=function(a,b){},this.swipeEnd=function(a){if($("#move-control-field").hasClass("disable"))return!1;if(a.distance<20)return!1;switch(a.additionalEvent){case"panup":MageS.Game.action("move-up");break;case"panright":MageS.Game.action("move-right");break;case"pandown":MageS.Game.action("move-down");break;case"panleft":MageS.Game.action("move-left")}},this.buildMap=function(){this.rawData=mageSurvivalData,this.turn=this.rawData.turn,this.worldType=this.rawData.world;for(var a in this.rawData.map)for(var b in this.rawData.map[a])this.drawCell(this.rawData.map[a][b],b,a);for(var a in this.rawData.objects)for(var b in this.rawData.objects[a])this.objects.drawObject(this.rawData.objects[a][b],b,a)},this.action=function(a,b){if(this.actionInProcess)return void info("Action is locked");b||(b={});var c=!1;switch(a){case"move-up":c=0;break;case"move-right":c=1;break;case"move-down":c=2;break;case"move-left":c=3}if(c!==!1){if(!MageS.Game.availableDirections[c])return void MageS.Game.chat.dialogMessage({targetX:0,targetY:0,message:"I can`t move there...",time:500});if(this.mage.cantMoveTill>this.turn)return void MageS.Game.chat.dialogMessage({targetX:0,targetY:0,message:"I can`t move!!",time:700});var d=$(".battle-border .mage"),e=d.data("d"),f=0;c!=e&&(f=150,this.mage.beforeMoveD=e,d.data("d",c),this.animations.rotate(d,{d:c,wasD:e},!1)),setTimeout(function(){var a=0,b=0;switch(c){case 0:b=1;break;case 1:a=-1;break;case 2:b=-1;break;case 3:a=1}MageS.Game.mage.startMove(a,b)},f)}if(this.startAction(a),this.spellbook.turnOffPatterns(),this.spellbook.removePermanentTooltip(),$(".spellBook .spell.active").removeClass("active"),void 0===b.fake&&!this.admin.isEnabled){var g="",h="";switch(a){case"move-up":g="move",h='{"d":"0"}',ga("send","event","GamePlay","move","Spellcraft",0);break;case"move-right":g="move",h='{"d":"1"}',ga("send","event","GamePlay","move","Spellcraft",1);break;case"move-down":g="move",h='{"d":"2"}',ga("send","event","GamePlay","move","Spellcraft",2);break;case"move-left":g="move",h='{"d":"3"}',ga("send","event","GamePlay","move","Spellcraft",3);break;case"objectInteract":g="objectInteract",h=b,ga("send","event","GamePlay","object","Spellcraft");break;case"craftSpell":g="craftSpell",h=b,ga("send","event","GamePlay","craft","Spellcraft");break;case"skipTurn":g="skipTurn",h=b,ga("send","event","GamePlay","skip","Spellcraft");break;case"spell":g="spell",h=b,ga("send","event","GamePlay","cast","Spellcraft");break;case"register":g="register",h=b,ga("send","event","GamePlay","register","Spellcraft");break;default:return void info("action not found")}Ajax.json("/Spellcraft/action",{data:"action="+g+"&data="+h+"&turn="+this.turn,callBack:function(a){MageS.Game.callback(a)}}),"mobile"==this.device&&MageS.Game.trytoGoFullScreen()}},this.callback=function(a){if(a.action)switch(a.action){case"mage-create":window.location="/Spellcraft";break;case"move":break;case"rotate":break;case"objectInteract":this.inventory.addItems(a.game);break;case"craftSpell":this.spellcraft.spellCrafted(a);break;case"spell":break;case"error-message":this.spells.spellAnimationRunning&&(this.spells.stopAnimation=!0),this.mage.moveStarted&&this.mage.cancelMove();break;case"reload":MageS.Game.admin.isEnabled?window.location="/Spellcraft/admin":window.location.reload()}void 0!==a.game.actions&&this.updateActions(a.game.actions,!1),a.game.items&&this.inventory.updateItems(a.game.items),a.game.spells&&this.spellbook.updateSpells(a.game.spells),a.game.messages&&this.chat.postMessages(a.game.messages),a.game.events?this.animations.animateEvents(a.game):this.endAction(),a.game.turn&&(this.turn=a.game.turn,this.spellbook.turn())},this.updateActions=function(a,b){var c=$(".actions"),d={};c.find(".action").each(function(){d[$(this).data("method")]=$(this)});for(var e in a){var f=a[e].method;if(void 0===d[f])switch(a[e].location){case"actions":var g=$("#template-action-button").html();Mustache.parse(g);var h="";void 0!==a[e].key&&(h=a[e].key);var i=Mustache.render(g,{name:a[e].name,method:f,key:h}),j=$(i),k=$(this.svg).find("#"+a[e].icon+" path");j.find("svg").append(k.clone()),c.append(j),b||j.find("a").css({opacity:.3}).animate({opacity:1},{queue:!1,duration:this.animationTime/2}),void 0==a[e].noAjax&&this.bindActionButtonClick(a[e],j);break;case"move-0":case"move-1":case"move-2":case"move-3":MageS.Game.availableDirections[a[e].name]=a[e].method==="move-"+a[e].name;var l=$("#move-control-field ."+a[e].location);if(l.data("method")==a[e].method)continue;if(l.data("method",a[e].method),l.hasClass("svg-replace"))l.data("svg",a[e].icon);else{l.find("svg path").remove();var k=$(this.svg).find("#"+a[e].icon+" path");l.find("svg").append(k.clone())}break;default:info('No location "'+a[e].location+'" found for action')}else d[f]=!1}for(var e in d)d[e]&&d[e].remove();b&&($(".method-craft-spell").on("click",function(){MageS.Game.spellcraft.showSpellCrafting()}),$(".method-skip-turn").on("click",function(){MageS.Game.action("skipTurn",'{"method":"skip-turn"}')}),$(".method-menu").on("click",function(){MageS.Game.toggleMenu()}),$(".method-test-spell").on("click",function(){MageS.Game.spells.isSecondPartWaiting=!0,MageS.Game.spells.currentSpellData={targetX:-3,targetY:1,d:1,data:[[-2,3],[3,3],[4,-1],[0,2]],targets:[[-3,-3],[3,3],[-3,2]],pattern:[[-1,-1],[-2,-2],[-3,-3],[-4,-4],[-5,-5]]},MageS.Game.attacks.attack({attack:{animation:"bow"},fromX:3,fromY:-4,targetX:0,targetY:0})}),$("#move-control-field .control-arrow").on("click",function(){switch($(this).data("d")){case 0:MageS.Game.action("move-up");break;case 1:MageS.Game.action("move-right");break;case 2:MageS.Game.action("move-down");break;case 3:MageS.Game.action("move-left")}}))},this.bindActionButtonClick=function(a,b){var c="objectInteract";void 0!==a.actionName&&(c=a.actionName),b.on("click",function(){MageS.Game.action(c,'{"method":"'+$(this).data("method")+'"}')})},this.toggleMenu=function(){switch(this.device){case"mobile":$(".mobile-menu").hasClass("active")?this.hideMenu():this.showMenu();break;case"pc":}},this.showMenu=function(){switch(this.device){case"mobile":$(".mobile-actions .method-menu svg path").css({fill:MageS.Game.color.blue}),$(".mobile-menu").addClass("active");break;case"pc":}},this.hideMenu=function(){switch(this.device){case"mobile":$(".mobile-actions .method-menu svg path").css({fill:MageS.Game.color.clay}),$(".mobile-menu").removeClass("active");break;case"pc":}},this.keyPressed=function(a){var b=$(".actions .action.key-"+a);b.length&&b.click()},this.buildUnits=function(){for(var a in this.rawData.units)for(var b in this.rawData.units[a])this.units.drawUnit(this.rawData.units[a][b],b,a)},this.updateHealth=function(a){var b=a.maxHealth,c=Math.round(a.health/b*100);if("mobile"==this.device){var d=parseInt($(".health-mobile-info .health .value").html());d==a.health&&this.gameInited||(d<a.health?(MageS.Game.monimations.bounce($(".health-mobile-info .health")),$(".health-mobile-info .health .svg").removeClass("color-red"),$(".health-mobile-info .health .normal path").animate({svgFill:"#069E2D"}).animate({svgFill:"#FF8360"})):d>a.health&&(MageS.Game.monimations.skweeze($(".health-mobile-info .health")),$(".health-mobile-info .health .normal path").animate({svgFill:this.color.yellow}).animate({svgFill:this.color.red})),$(".health-mobile-info .health .cover").height(100-c+"%"),$(".health-mobile-info .health .value").html(a.health));var e=parseInt($(".health-mobile-info .armor .value").html()),f="#FF8360";e!=a.armor&&(e<a.armor&&(f="#069E2D"),$(".health-mobile-info .armor .svg").removeClass("color-brown"),$(".health-mobile-info .armor path").animate({svgFill:f}).animate({svgFill:"#5E412F"}),$(".health-mobile-info .armor .value").html(a.armor))}else{var g=0,h=100;void 0!==a.armor&&(b+=a.armor,g=Math.round(a.armor/b*100),h=Math.round(a.health/b*100)),$(".health-bar .progress-bar-success").css("width",h+"%"),$(".health-bar .progress-bar-warning").css("width",g+"%"),$(".health-bar .health-value").html(a.health+"HP"),void 0!==a.armor&&$(".health-bar .armor-value").html(a.armor)}},this.initSVG=function(a){this.svgCallback=a;var b={svg:"/images/game/mage/game-icons.svg",tiles:"/images/game/mage/game-tiles.svg"};this.svgToLoad=Object.keys(b).length;for(var c in b)MageS.Game.loadSingleSvg(b[c],c)},this.loadSingleSvg=function(a,b){jQuery.get(a,function(a){MageS.Game.svg.append(jQuery(a).find("svg")),MageS.Game.singleSvgLoadDone()},"xml")},this.singleSvgLoadDone=function(){this.svgToLoad--,0==this.svgToLoad&&this.svgCallback()},this.replaceMissingSvg=function(){$(".svg.svg-replace").each(function(){MageS.Game.replaceSvg($(this))})},this.replaceSvg=function(a){var b=MageS.Game.svg.find("#"+a.data("svg")+" path"),c=b.clone(),d=a.data("color");a.removeClass("svg-replace").find("svg").append(c),d&&c.css({fill:this.color[d]})},this.startAction=function(a){switch(a){case"spell":break;case"":default:$(".loading-field").fadeIn()}"mobile"==this.device?$(".mobile-actions").find("path").animate({svgFill:this.color.brownBright}):"pc"==this.device&&$(".actions-container .default-actions").fadeOut(this.animationTime/2),$(".actions-container .actions").fadeOut(this.animationTime/2),this.actionInProcess=!0},this.endAction=function(){this.actionInProcess=!1,$(".loading-field").fadeOut(50),$(".actions-container .actions").fadeIn(),"mobile"==this.device?$(".mobile-actions").find("path").animate({svgFill:this.color.clay},{duration:200}):"pc"==this.device&&$(".actions-container .default-actions").fadeIn(),MageS.Game.hideMenu(),this.admin.actionEnded()},this.getIcon=function(a,b){var c=$(this.svg).find("#"+a);if(0==c.length)return void info('icon for "'+a+'" not found');var d=c.children();return b&&d.css({fill:this.color[b]}),d},this.drawCell=function(a,b,c,d){d||(d=$(".battle-field.current"));var e=$("#template-map-cell").html();Mustache.parse(e);var f=Mustache.render(e,{x:b,y:c,"class":a}),g=$(f);this.worlds.cell(this.worldType,a,g),d.append(g),g.css({"margin-left":b*this.cellSize+"rem","margin-top":c*this.cellSize+"rem"})},this.itemsMessage=function(a,b){var c=$("#template-alert-items").html();Mustache.parse(c);var d=Mustache.render(c,{message:a,strong:b}),e=$(d);$(".inventory-message-container").append(e),setTimeout(function(){$(".inventory-message-container .alert").hide(500)},3e3)},this.registrationPopup=function(){var a=$("#template-registration").html();Mustache.parse(a);var b=Mustache.render(a,{}),c=$(b);$(".battle-border").append(c),c.css({opacity:0}),c.animate({opacity:1}),MageS.Game.isGameRuning=!1},this.cancelRegistration=function(){MageS.Game.isGameRuning=!0,$(".mage-registration").animate({opacity:0},{duration:500,complete:function(){$(this).remove()}})},this.register=function(){this.cancelRegistration();var a=$(".mage-registration .email").val(),b=$(".mage-registration .password").val();MageS.Game.action("register",'{"email":"'+a+'", "password":"'+b+'"}')},this.configureKeys=function(){$(document).keydown(function(a){switch(a.keyCode){case 38:MageS.Game.action("move-up");break;case 37:MageS.Game.action("move-left");break;case 40:MageS.Game.action("move-down");break;case 39:MageS.Game.action("move-right")}}),$(document).keypress(function(a){if(MageS.Game.isGameRuning)switch(a.keyCode){case 13:break;case 119:case 1094:MageS.Game.action("move-up");break;case 97:case 1092:MageS.Game.action("move-left");break;case 115:case 1099:MageS.Game.action("move-down");break;case 100:case 1074:MageS.Game.action("move-right");break;case 32:break;case 113:MageS.Game.spellcraft.showSpellCrafting();break;case 101:MageS.Game.keyPressed("E");break;case 114:break;case 102:MageS.Game.keyPressed("F");break;case 0:switch(a.charCode){case 119:MageS.Game.action("move-up");break;case 97:MageS.Game.action("move-left");break;case 115:MageS.Game.action("move-down");break;case 100:MageS.Game.action("move-right");break;case 32:break;case 101:MageS.Game.keyPressed("E");break;case 113:MageS.Game.spellcraft.showSpellCrafting();break;case 114:break;case 102:MageS.Game.keyPressed("F")}}})}},MageS.Inventory=function(a){this.game=a,this.items={},this.buildItems=function(){var a=$("#template-item").html();Mustache.parse(a);var b=$(".inventory .items"),c=b.data("items");for(var d in c){var e=this.renderItem(a,c[d]);b.append(e),MageS.Game.inventory.addItemDescription(c[d],e),MageS.Game.inventory.bindItem(e)}b.data("items","").attr("data-items",""),$(".items-filter").each(function(){$(this).on("click",function(){MageS.Game.inventory.filterItems($(this))})}),$(".inventory .item").on("click",function(){})},this.filterItems=function(a){var b=$(".items-filter.active");this.turnOffFilters(),b.length&&b.data("name")==a.data("name")||(a.addClass("active"),$(".inventory .item:not(.type-"+a.data("name")+"):not(.type-all)").addClass("filtered-out"))},this.turnOffFilters=function(){$(".items-filter.active").removeClass("active"),$(".inventory .item.filtered-out").removeClass("filtered-out")},this.renderItem=function(a,b){var c=Mustache.render(a,{id:b.id,name:b.name,type:b.type,quantity:b.quantity}),d=$(c),e=$(this.game.svg).find("#"+b.icon+" path");return d.find("svg").append(e.clone()),void 0!==b.iconColor&&d.find(".svg").addClass(b.iconColor),this.items[b.id]=b,d},this.updateItems=function(a){this.turnOffFilters();for(var b in a){var c=a[b],d=$(".inventory .item.id-"+b);if(d.length){var e=parseInt(d.find(".value").html()),f=e+c.quantity;f>0?(d.find(".value").html(f),this.items[b]=c):d.remove(),c.quantity>0&&(this.showInventory(),this.game.monimations.bounce(d),d.find(".value").css({"background-color":"#069E2D",color:"#fff"}).animate({"background-color":"#FCEBB6",color:"#5E412F"},{duration:2e3}))}else{this.showInventory();var g=$("#template-item").html();Mustache.parse(g);var h=this.renderItem(g,c);$(".inventory .items").append(h),MageS.Game.monimations.scaleIn(h),this.addItemDescription(c,h),this.bindItem(h)}}},this.addItemDescription=function(a,b){var c=$("#template-item-tooltip").html();Mustache.parse(c);var d=Mustache.render(c,{id:a.id,name:a.name,stats:a.stats,item:a.type}),e=$(d);$(".tooltip-helper-area").append(e),this.bindItemTooltip(b)},this.bindItemTooltip=function(a){a.on({mouseenter:function(){if(!MageS.Game.spellcraft.craftingIsInProgress){var a=$(this).data("id");$(".tooltip-helper-area .item-tooltip.id-"+a).show()}},mouseleave:function(){var a=$(this).data("id");$(".tooltip-helper-area .item-tooltip.id-"+a).hide()}})},this.toggleInventory=function(){$(".items-col").hasClass("active")||this.showInventory()},this.showInventory=function(){"pc"!==this.game.device&&($(".items-col").hasClass("active")||(this.game.spellbook.hideSpellbook(),$(".items-col").addClass("active").fadeIn(),$(".toggle-inventory").addClass("active"),this.game.spellbook.turnOffPatterns(),this.game.spellbook.turnOffActiveSpell()),this.game.chat.hideChat())},this.hideInventory=function(){$(".items-col").hide().removeClass("active"),$(".toggle-inventory").removeClass("active")},this.itemClick=function(a){MageS.Game.spellcraft.craftingIsInProgress&&MageS.Game.spellcraft.itemClick(a)},this.bindItem=function(a){a.on("mousedown",function(){MageS.Game.inventory.itemClick($(this))})},this.addItems=function(a){}},$.fn.animateRotate=function(a,b,c,d,e){var f=$.speed(c,d,e),g=f.step;return this.each(function(c,d){f.complete=$.proxy(f.complete,d),f.step=function(a){return $.style(d,"transform","rotate("+a+"deg)"),g?g.apply(d,arguments):void 0},$({deg:a}).animate({deg:b},f)})},MageS.Animations=function(a){this.game=a,this.animationsInQueue=[],this.currentStage="",this.animationsRunning=[],this.isAnimationsRunning=!1,this.stages=[],this.stagesDefenition=["mage-before-action-speech","mage-action","mage-action-2","mage-action-3","mage-after-action-speech","mage-action-effect","mage-action-effect-2","unit-action","unit-action-2","unit-action-3","turn-end-effects","turn-end-effects-2","message-time","message-time-2","message-time-3"],this.animateEvents=function(a){this.animationsInQueue=a.events,this.stages=this.stagesDefenition,this.isAnimationsRunning=!0,this.runAnimations()},this.runAnimations=function(){this.runSingleStageAnimation()},this.getNextStageName=function(){var a=this.stages[0];return this.stages=this.stages.slice(1),a},this.runSingleStageAnimation=function(){var a=this.getNextStageName();if(!a)return this.game.endAction(),void(this.isAnimationsRunning=!1);if(void 0===this.animationsInQueue[a])return void this.runSingleStageAnimation();this.currentStage=a;var b=this.animationsInQueue[a];this.animationsRunning[a]=b.length;for(var c in b)this.selectAnimationByName(b[c],a)},this.singleAnimationFinished=function(a){this.animationsRunning[a]--,0==this.animationsRunning[a]?this.runSingleStageAnimation():this.animationsRunning[a]<0&&info("Error. More animations finished then started")},this.selectAnimationByName=function(a,b){switch(a.name){case"mage-move":this.mageMoveAnimation(a.data,b);break;case"mage-rotate":this.mageRotateAnimation(a.data,b);break;case"mage-spell-cast":this.spellCastAnimation(a.data,b);break;case"mage-add-armor":this.mageAddArmorAnimation(a.data,b);
break;case"mage-add-status":this.mageAddStatusAnimation(a.data,b);break;case"mage-remove-status":this.mageRemoveStatusAnimation(a.data,b);break;case"mage-damage":this.mageDamageAnimation(a.data,b);break;case"mage-heal":this.mageHealAnimation(a.data,b);break;case"mage-use-portal":this.mageUsePortalAnimation(a.data,b);break;case"mage-death":this.mageUsePortalAnimation(a.data,b);break;case"unit-kill":this.unitKillAnimation(a.data,b);break;case"unit-move":this.unitMoveAnimation(a.data,b);break;case"unit-rotate":this.unitRotateAnimation(a.data,b);break;case"unit-attack":this.unitAttackAnimation(a.data,b);break;case"unit-remove-status":this.unitRemoveStatusAnimation(a.data,b);break;case"unit-spawn":this.unitSpawnAnimation(a.data,b);break;case"spell-craft":this.game.spellcraft.endSpellCraftAnimations(a.data,b);break;case"unit-damage":this.showDamageAnimation(a.data,"damage",!0,b);break;case"object-destroy":this.objectDestroyAnimation(a.data,b);break;case"object-activate":this.game.objects.activate(a.data,b);break;case"object-move":this.game.objects.move(a.data,b);break;case"add-object":this.addObjectAnimation(a.data,b);break;case"add-unit":this.addUnitAnimation(a.data,b);break;case"add-unit-status":this.addUnitStatusAnimation(a.data,b);break;case"cell-change":this.changeCellAnimation(a.data,b);break;case"say-message":this.sayMessageAnimation(a.data,b);break;case"user-ask-to-register":this.askRegistrationAnimation(a.data,b);break;case"effect":this.effectAnimation(a.data,b);break;case"wait":this.waitAnimation(a.data,b)}},this.mageMoveAnimation=function(a,b){this.game.mage.moveMage(a,b)},this.mageRotateAnimation=function(a,b){var c=$(".battle-border .mage"),d=c.data("d");return d==a.d?void MageS.Game.animations.singleAnimationFinished(b):void this.rotate(c,a,b)},this.rotate=function(a,b,c){var d=90*b.d,e=90*b.wasD;270==e&&0==d&&(e=-90),0==e&&270==d&&(e=360),a.removeClass("d-"+b.d),a.removeClass("d-"+b.wasD),a.animateRotate(e,d,150,"swing",function(){$(this).addClass("d-"+b.d).data("d",b.d),c&&MageS.Game.animations.singleAnimationFinished(c)})},this.unitKillAnimation=function(a,b){var c=$(".battle-border .unit.id-"+a.id);return c.length<1?void MageS.Game.animations.singleAnimationFinished(b):void this.game.units.animateDeath(c,b)},this.unitMoveAnimation=function(a,b){this.game.units.moveUnit(a,b)},this.unitRotateAnimation=function(a,b){var c=$(".battle-border .unit.id-"+a.id+" .rotate-div");c.length>0?this.rotate(c,a,b):MageS.Game.animations.singleAnimationFinished(b)},this.unitAttackAnimation=function(a,b){this.game.attacks.attack(a,b)},this.unitRemoveStatusAnimation=function(a,b){var c=$(".battle-border .unit.id-"+a.id+" .unit-status.flag-"+a.flag);c.length>0&&c.remove(),MageS.Game.animations.singleAnimationFinished(b)},this.unitSpawnAnimation=function(a,b){this.game.units.unitSpawn(a,b)},this.addUnitStatusAnimation=function(a,b){var c=$(".battle-border .unit.id-"+a.id);c.length>0&&this.game.units.addUnitStatusIcons(c,a.flags),setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},600)},this.mageAddStatusAnimation=function(a,b){$(".battle-border .mage");this.game.mage.addMageStatus(a.flags),setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},600)},this.mageRemoveStatusAnimation=function(a,b){var c=$(".battle-border .mage");c.find(".unit-status.flag-"+a.flag).remove(),MageS.Game.animations.singleAnimationFinished(b)},this.spellCastAnimation=function(a,b){this.game.spells.cast(a,b)},this.mageDamageAnimation=function(a,b){this.game.updateHealth(a),this.showDamageAnimation(a,"damage",!1,b)},this.mageHealAnimation=function(a,b){this.game.updateHealth(a),this.showDamageAnimation(a,"heal",!1,b)},this.mageAddArmorAnimation=function(a,b){this.game.updateHealth(a),this.showDamageAnimation(a,"armor",!1,b)},this.mageUsePortalAnimation=function(a,b){this.game.monimations.rotateWithScale($("body"),0,540,1,-1,1500),setTimeout(function(){MageS.Game.admin.isEnabled?window.location="/Spellcraft/admin":window.location="/Spellcraft"},750)},this.showDamageAnimation=function(a,b,c,d){var e=a.id,f={};if("damage"==b)var g=-a.value;else var g=a.value;if(c){if(f=$(".unit.id-"+e),f.length<1)return void MageS.Game.animations.singleAnimationFinished(d);var h=$(".tooltip-unit-area .unit-tooltip.id-"+a.id);h.length>0&&h.find(".current-health").html(a.health)}else f=$(".battle-border .mage-damage-container");var i=$("<div>"+g+"</div>").addClass("damage");"heal"==b&&i.addClass("heal"),"armor"==b&&i.addClass("armor"),f.prepend(i);var j=.75;if(1==rand(0,1))var k=100*j,l=rand(0,100*j);else var k=rand(0,100*j),l=100*j;k/=100,l/=100;var m=parseInt(i.css("margin-top"))/20,n=parseInt(i.css("margin-left"))/20;1==rand(0,1)?m+=l:m-=l,1==rand(0,1)?n+=k:n-=k,i.animate({"margin-top":m+"rem","margin-left":n+"rem",opacity:.3},{duration:400,complete:function(){$(this).remove()}}),setTimeout(function(){MageS.Game.animations.singleAnimationFinished(d)},400)},this.askRegistrationAnimation=function(a,b){setTimeout(function(){MageS.Game.registrationPopup()},a.time),setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},a.time+2e3)},this.effectAnimation=function(a,b){this.game.spells.isSecondPartWaiting=b,this.game.spells["continue"](a.spell,a)},this.waitAnimation=function(a,b){setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},a.time)},this.sayMessageAnimation=function(a,b){this.game.chat.dialogMessage(a,b)},this.objectDestroyAnimation=function(a,b){var c=$(".object.id-"+a.id);c.length>0&&c.animate({opacity:0},{duration:300,complete:function(){$(this).remove()}}),setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},300)},this.addObjectAnimation=function(a,b){this.game.objects.drawObject(a.object,a.object.x,a.object.y);MageS.Game.animations.singleAnimationFinished(b)},this.addUnitAnimation=function(a,b){this.game.units.drawUnit(a.unit,a.targetX,a.targetY);MageS.Game.animations.singleAnimationFinished(b)},this.changeCellAnimation=function(a,b){this.game.worlds.cellsChange(a,b)}},MageS.Attacks=function(a){this.game=a,this.field={},this.attacks={},this.init=function(){this.field=$(".attacks-field")},this.attack=function(a,b){var c=1e4*Math.random();if(void 0!==this.attacks[c])return void this.attack(a,b);var d=$("<div></div>").addClass("id-"+c);switch(this.attacks[c]={data:a,container:d},$(".attacks-field").append(d),a.attack.animation){case"melee":this.game.units.meleeAttack(a,d,c,b);break;case"fireSpit":this.fireSpit(c,b);break;case"web":this.web(c,b);break;case"spawn":this.spawn(c,b);break;case"greenLaser":this.greenLaser(c,b);break;case"bow":this.bow(c,b);break;default:MageS.Game.attacks.finishAttack(c,b)}},this.fireSpit=function(a,b){var c=this.attacks[a].data;MageS.Game.spells.beam(c.fromX,c.fromY,c.targetX,c.targetY,"#F07818"),MageS.Game.spells.beam(c.fromX,c.fromY,c.targetX,c.targetY,"#F07818","icon-bullet-line-small-curve-right"),MageS.Game.spells.beam(c.fromX,c.fromY,c.targetX,c.targetY,"#F07818","icon-bullet-line-small-curve-left"),setTimeout(function(){MageS.Game.attacks.finishAttack(a,b)},800)},this.web=function(a,b){var c=this.attacks[a].data,d={time:700,rotate:!0};MageS.Game.spells.moveIcon("icon-spider-web","color-white",c.fromX,c.fromY,c.targetX,c.targetY,d),setTimeout(function(){MageS.Game.attacks.finishAttack(a,b)},800)},this.spawn=function(a,b){var c=this.attacks[a].data;for(var d in c.targets)for(var e={moveLeft:(c.targets[d][0]+.5)*MageS.Game.cellSize+"rem",moveTop:(c.targets[d][1]+.5)*MageS.Game.cellSize+"rem",time:1,beamWidth:10,segment1:["100%","100%"],segment2:["-8%","0"],"delete":!0},f=0;5>f;f++)MageS.Game.spells.beamStrike(4,72*f,"icon-bullet-start-spin","#07B26A",e);setTimeout(function(){MageS.Game.attacks.finishAttack(a,b)},800)},this.greenLaser=function(a,b){var c=this.attacks[a].data,d={time:.2,beamWidth:10,segment1:["0%","0%"],segment2:["0%","100%"]},e=$(".battle-border .unit.id-"+c.attackerId);MageS.Game.units.rotateUnitToTarget(e,c);for(var f=MageS.Game.spells.beam(c.fromX,c.fromY,c.targetX,c.targetY,"#07B26A","icon-bullet-line",d),g={time:300},h=0,i=0,j=0;30>j;j++)h=c.targetX+2*Math.random()-1,i=c.targetY+2*Math.random()-1,g.delay=200+800*Math.random(),g.scale=.1,MageS.Game.spells.moveIcon("icon-cercle","color-green",c.targetX,c.targetY,h,i,g);setTimeout(function(){MageS.Game.units.rotateUnitBack(e),f.remove(),MageS.Game.attacks.finishAttack(a,b)},1200)},this.bow=function(a,b){var c=this.attacks[a].data,d={time:.1,time2:.1,beamWidth:12,segment1:["0%","0%"],segment2:["40%","60%"],segment3:["80%","100%"],"delete":!0},e=$(".battle-border .unit.id-"+c.attackerId);MageS.Game.units.rotateUnitToTarget(e,c);var f=MageS.Game.spells.beam(c.fromX,c.fromY,c.targetX,c.targetY,MageS.Game.color.white,"icon-bullet-line",d);setTimeout(function(){MageS.Game.units.rotateUnitBack(e),f.remove(),MageS.Game.attacks.finishAttack(a,b)},350)},this.finishAttack=function(a,b){this.clearAttack(a),MageS.Game.animations.singleAnimationFinished(b)},this.clearAttack=function(a){return void 0===this.attacks[a]?void info("Wtf I cant clear attack with id = "+a):(this.attacks[a].container.remove(),void delete this.attacks[a])}},MageS.Spellbook=function(a){this.game=a,this.spellsPatterns={},this.buildSpells=function(){var a=$("#template-inventory-spell").html();Mustache.parse(a);var b=$(".spellBook .spells"),c=b.data("spells");for(var d in c){var e=this.renderSpell(a,c[d]);b.append(e),MageS.Game.spellbook.buildSpell(e)}b.data("spells","").attr("data-spells",""),$(".spell-filter").each(function(){$(this).on("click",function(){MageS.Game.spellbook.filterSpells($(this))})}),$(".pattern-field .pattern-cell").on("click",function(){MageS.Game.spellbook.patternClick($(this))})},this.buildSpell=function(a){a.on("click",function(){MageS.Game.spellbook.spellClick($(this))})},this.spellClick=function(a){if(this.game.spellcraft.isBlenderActive)return void this.game.spellcraft.itemClick(a);if(a.hasClass("cooldown")&&"mobile"!==this.game.device)return void info("This spell is on cooldown");if(this.game.animations.isAnimationsRunning)return void this.game.monimations.shake(a);var b=a.data("spell-type"),c=a.data("target-type"),d=!1,e=!1,f=!1;switch("mobile"==this.game.device?a.hasClass("active")?d=!0:e=!0:"pc"==this.game.device?d=!1:"tablet"==this.game.device&&(d=!1),b){case"noTargetSpell":d&&!a.hasClass("cooldown")?(this.castSpellStart(a,'{"id":"'+a.data("id")+'"}'),a.removeClass("active")):this.checkForActiveSpells(a)&&(f=!0,a.addClass("active"),this.activateSpellTooltipPermanent(a));break;case"directTargetSpell":switch(f=!0,c){case"enemy":MageS.Game.spellbook.showEnemyTargets(a)}break;case"pattern":f=!0,MageS.Game.spellbook.showPattern(a,this.spellsPatterns[a.data("id")])}e&&this.createHiddenDescription(a),f&&this.addCastToDescription(a)},this.spellCastClick=function(){var a=$(".spell.active");this.castSpellStart(a,'{"id":"'+a.data("id")+'"}')},this.updateSpells=function(a){for(var b in a){var c=a[b],d=$(".spell.id-"+b);if("new"==c.status){var e=$("#template-inventory-spell").html();Mustache.parse(e);var f=this.renderSpell(e,c);$(".spellBook .spells").append(f),this.game.monimations.scaleIn(f,2e3),f.tooltip(),MageS.Game.spellbook.buildSpell(f),MageS.Game.spellbook.addSpellDescription(c,f);var g=$(".spells-filter-panel .spell-filter.school-"+c.schoolId);if(g.length<1){var e=$("#template-inventory-spell-filter").html();Mustache.parse(e);var h=Mustache.render(e,{schoolId:c.schoolId,"class":c.schoolViewData["class"]}),i=$(h),j=this.game.getIcon(c.schoolViewData.icon,c.schoolViewData.color);i.find("svg").append(j.clone()),i.on("click",function(){MageS.Game.spellbook.filterSpells($(this))}),$(".spells-filter-panel").append(i)}$(".spellBook .spells").append(f)}else if(d.length)if("deleted"==c.status)this.deleteSpellFromInventory(d);else{var k=c.config.usages;k>0?(d.find(".value").html(k),d.data("cooldown-mark",c.config.cooldownMark),d.find(".value").css({"background-color":"#FF8360",color:"#fff"}).animate({"background-color":"#FCEBB6",color:"#5E412F"},{duration:2e3}),MageS.Game.monimations.skweeze(d),d.hasClass("cooldown")?this.game.turn>=c.config.cooldownMark&&this.removeCooldown(d):this.game.turn<c.config.cooldownMark&&this.addCooldown(d)):this.deleteSpellFromInventory(d)}}},this.deleteSpellFromInventory=function(a){a.animate({bullshit:100},{step:function(a,b){var c=a/100;$(this)[0].style.transform="scale("+(1-c)+") rotate("+360*c+"deg)"},duration:1500,easing:"easeInBounce",complete:function(){$(this).remove()}})},this.renderSpell=function(a,b){var c="",d="";b.viewData.noTargetSpell?c="noTargetSpell":b.viewData.directTargetSpell?(c="directTargetSpell",d=b.viewData.directTargetSpell):b.pattern&&(c="pattern",this.spellsPatterns[b.id]=b.pattern);var e=$(this.game.svg).find("#"+b.viewData.iconClass+" path"),f=Mustache.render(a,{id:b.id,viewData:b.viewData,quantity:b.config.usages,cooldownMark:b.config.cooldownMark,spellType:c,targetType:d,school:b.schoolId}),g=$(f);return g.find("svg").append(e.clone()),void 0!==b.viewData.iconColor&&g.find(".svg").addClass(b.viewData.iconColor),MageS.Game.spellbook.addSpellDescription(b,g),this.game.turn<b.config.cooldownMark&&this.addCooldown(g),g},this.turn=function(){$(".spellBook .spell.cooldown").each(function(){$(this).data("cooldown-mark")<=MageS.Game.turn?MageS.Game.spellbook.removeCooldown($(this)):MageS.Game.spellbook.stepCooldown($(this))})},this.addCooldown=function(a){a.addClass("cooldown");var b=a.data("id");$(".spell-tooltip.id-"+b+" .cooldown").find(".active").show().find(".value").html(a.data("cooldown-mark")-this.game.turn)},this.removeCooldown=function(a){a.removeClass("cooldown");var b=a.data("id");$(".spell-tooltip.id-"+b+" .cooldown .active").hide()},this.stepCooldown=function(a){var b=a.data("id");$(".spell-tooltip.id-"+b+" .cooldown .active .value").html(a.data("cooldown-mark")-this.game.turn)},this.filterSpells=function(a){var b=$(".spell-filter.active");$(".spell-filter.active").removeClass("active"),$(".spellBook .spell.filtered-out").removeClass("filtered-out"),b.length&&b.data("school")==a.data("school")||(a.addClass("active"),$(".spellBook .spell:not(.school-"+a.data("school")+")").addClass("filtered-out"))},this.turnOffFilters=function(){$(".spell-filter.active").removeClass("active"),$(".spellBook .spell.filtered-out").removeClass("filtered-out")},this.filterAllWithValueLessThen=function(a){$(".spellBook .spell").each(function(){!$(this).hasClass("filtered-out")&&parseInt($(this).find(".value").html())<a&&$(this).addClass("filtered-out")})},this.checkForActiveSpells=function(a){var b=$(".spell.active");return b.length&&(this.turnOffPatterns(),this.removePermanentTooltip(),this.turnOffActiveSpell(),a&&b.data("id")==a.data("id"))?!1:!0},this.turnOffActiveSpell=function(){$(".spell.active").removeClass("active")},this.showPattern=function(a,b){if(1!=this.game.actionInProcess&&this.checkForActiveSpells(a)){this.activateSpellTooltipPermanent(a),a.addClass("active"),$("#move-control-field").addClass("disable"),mageDirection=0;for(var c=0;4>c;c++)for(var d in b){var e=b[d][0],f=b[d][1],g=this.rotatePatternCoordinats(e,f,c),h=$(".pattern-cell.x-"+g[0]+".y-"+g[1]);h.addClass("group-d-"+c).data("d",c),c==mageDirection?h.addClass("active"):h.addClass("visible"),h.on("mouseenter",function(){MageS.Game.spellbook.patternSwitchDirection($(this))})}}},this.rotatePatternCoordinats=function(a,b,c){switch(c){case 0:return[a,b];case 1:return[-b,a];case 2:return[-a,-b];case 3:return[b,-a]}},this.patternSwitchDirection=function(a){if(!a.hasClass("active")){var b=a.data("d");$(".pattern-cell.active").removeClass("active").addClass("visible"),$(".pattern-cell.group-d-"+b).removeClass("visible").addClass("active")}},this.turnOffPatterns=function(){for(var a=0;4>a;a++)$(".pattern-cell.group-d-"+a).removeClass("group-d-"+a).data("d","");$(".pattern-cell.active").removeClass("active"),$(".pattern-cell.visible").removeClass("visible"),$("#move-control-field").removeClass("disable"),this.deleteHiddenDescription()},this.patternClick=function(a){var b=$(".spell.active");1!==b.length&&info("ERROR not one spell active"),b.removeClass("active");var c=a.data("d"),d=a.data("x"),e=a.data("y"),f='{"id":"'+b.data("id")+'","d":"'+c+'","x":"'+d+'","y":"'+e+'"}';this.castSpellStart(b,f)},this.castSpellStart=function(a,b){this.removePermanentTooltip(),MageS.Game.action("spell",b);var c=a.data("spell");this.game.spells.startCast(c)},this.showEnemyTargets=function(a){this.checkForActiveSpells(a)&&(this.activateSpellTooltipPermanent(a),a.addClass("active"),$("#move-control-field").addClass("disable"),$(".battle-border .unit-field .unit").each(function(){var a=$(this).data("x"),b=$(this).data("y"),c=$(".pattern-cell.x-"+a+".y-"+b);c.addClass("active")}))},this.addSpellDescription=function(a,b){var c=$("#template-spell-tooltip").html();Mustache.parse(c);var d=!1;void 0!==a.ingredients&&a.ingredients.length>0&&(d=a.ingredients);var e=Mustache.render(c,{id:a.id,name:a.viewData.name,description:a.viewData.description,cooldown:a.config.cooldown,ingredients:d}),f=$(e);if(void 0!==a.viewData.noTargetSpell&&f.addClass("noTargetSpell"),d)for(var g in d){var h=d[g],i=this.game.getIcon(h.icon);f.find("."+h.icon+" svg").append(i.clone()),void 0!==h.iconColor&&f.find(".svg."+h.icon).addClass(h.iconColor)}$(".tooltip-spell-area").append(f),"pc"==this.game.device&&b.on({mouseenter:function(){var a=$(this).data("id");$(".tooltip-spell-area .spell-tooltip.id-"+a).addClass("hover")},mouseleave:function(){var a=$(this).data("id");$(".tooltip-spell-area .spell-tooltip.id-"+a).removeClass("hover")}})},this.createHiddenDescription=function(a){var b=a.data("id"),c=$(".tooltip-spell-area .spell-tooltip.id-"+b).clone();c.height(this.game.chat.inventorySize+"rem"),$("#mobile-spell-info-container").show().append(c)},this.deleteHiddenDescription=function(){$("#mobile-spell-info-container").hide().find(".spell-tooltip").remove(),$("#mobile-spell-info-container").hasClass("active")&&this.toggleHiddenDescription()},this.toggleHiddenDescription=function(){$("#mobile-spell-info-container").hasClass("active")?$("#mobile-spell-info-container").removeClass("active").animate({"margin-left":-this.game.mageInventorySize+15*parseInt($(".right-panel").width())/(100*this.game.rem)+"rem"},{easing:"easeOutElastic"}):$("#mobile-spell-info-container").hasClass("active")||$("#mobile-spell-info-container").addClass("active").animate({"margin-left":"0"},{easing:"easeOutElastic"})},this.activateSpellTooltipPermanent=function(a){var b=a.data("id");$(".tooltip-spell-area .spell-tooltip.id-"+b).addClass("click");var c=a.data("spell-type");switch(c){case"noTargetSpell":break;case"directTargetSpell":case"pattern":}},this.removePermanentTooltip=function(){$(".spell-tooltip.click").removeClass("click")},this.addCastToDescription=function(a){var b=a.find(".svg").clone().addClass("cast-button");a.hasClass("cooldown")?b.find("path").css({fill:"#ccc"}):b.on("click",function(a){a.stopPropagation(),MageS.Game.spellbook.spellClick($(".spellBook .spell.active"))}),$("#mobile-spell-info-container .spell-tooltip").prepend(b)},this.panMobileSpellDescriptionRight=function(a){$("#mobile-spell-info-container").hasClass("active")||$("#mobile-spell-info-container").css({"margin-left":-this.game.mageInventorySize+1.5*this.game.cellSize+a.distance/this.game.rem+"rem"})},this.panMobileSpellDescriptionLeft=function(a){$("#mobile-spell-info-container").hasClass("active")&&$("#mobile-spell-info-container").css({"margin-left":-(a.distance/this.game.rem)+"rem"})},this.toggleSpellbook=function(){$(".spells-col").hasClass("active")||this.showSpellbook()},this.showSpellbook=function(){"pc"!==this.game.device&&(this.game.inventory.hideInventory(),$(".spells-col").addClass("active").fadeIn(),$(".toggle-spellbook").addClass("active"),this.game.chat.hideChat())},this.hideSpellbook=function(){$(".spells-col").hide().removeClass("active"),$(".toggle-spellbook").removeClass("active"),this.removePermanentTooltip(),this.turnOffPatterns()}},MageS.Spells=function(a){this.game=a,this.currentSpellName="",this.isSecondPartWaiting=!1,this.spellAnimationRunning=!1,this.stopAnimation=!1,this.currentSpellData={},this.savedData=[],this.fire={},this.water={},this.air={},this.earth={},this.arcane={},this.init=function(){this.fire=new MageS.Spells.Fire(this.game,this),this.water=new MageS.Spells.Water(this.game,this),this.air=new MageS.Spells.Air(this.game,this),this.earth=new MageS.Spells.Earth(this.game,this),this.arcane=new MageS.Spells.Arcane(this.game,this)},this.cast=function(a,b){this.spellAnimationRunning?(this.currentSpellData=a,this.isSecondPartWaiting=b):(info("there is no animation running for spell "+a.spell),MageS.Game.animations.singleAnimationFinished(b))},this.startCast=function(a){var b=!0;switch(a){case"Fireball":this.fire.startFireball();break;case"FireNova":case"ExplodingBees":case"ButthurtJump":case"LightMyFire":case"Bomb":case"FireLady":case"FaceCanon":case"LetFireInYourEyes":case"PhoenixStrike":case"RainOfFire":case"BurnCitiesToTheGround":case"FireImp":case"DoesItBurns":this.fire.startStandartFire();break;case"IceCrown":this.water.startIceCrown();break;case"Freeze":case"Freeze2":case"IceSlide":case"IceWall":case"IceSpear":case"IceCone":case"WashAndGo":case"Blizzard":case"IceShield":case"Icelock":case"FreshWaterFountain":case"WaterBody":this.water.startStandartWater();break;case"Push":case"Harmony":case"NoMoreAirForYou":case"HardLanding":case"QuardroLightning":case"Lightning":case"SkyFist":case"LightingShield":case"WindSword":case"LootItAll":case"Push2":case"TeslaTrap":case"ChainLighting":this.air.startStandartAir();break;case"StoneFace":case"GroundShake":case"Quicksand":case"StoneSpear":case"TunnelTravel":case"EarthProtection":case"StalactitesFall":case"Earthquake":case"Astonishing":case"WallUp":case"MilestoneHit":case"RollingStones":this.earth.startStandartEarth();break;case"arcane":this.arcane.startStandartArcane();break;default:b=!1,info('No start animation for "'+a+'"')}b&&(this.spellAnimationRunning=!0,this.currentSpellName=a,$(".battle-border .mage path.hand").hide(),$(".battle-border .mage path.active-hand").show())},this.iterate=function(a){switch(a){case"Fireball":this.fire.iterateFireball();break;case"FireNova":case"ExplodingBees":case"ButthurtJump":case"LightMyFire":case"Bomb":case"FireLady":case"FaceCanon":case"LetFireInYourEyes":case"PhoenixStrike":case"RainOfFire":case"BurnCitiesToTheGround":case"FireImp":case"DoesItBurns":this.fire.iterateStandartFire();break;case"IceCrown":this.water.iterateIceCrown();break;case"IceSlide":case"Freeze":case"Freeze2":case"IceWall":case"IceSpear":case"IceCone":case"WashAndGo":case"Blizzard":case"IceShield":case"Icelock":case"FreshWaterFountain":case"WaterBody":this.water.iterateStandertWater();break;case"Push":case"Harmony":case"NoMoreAirForYou":case"HardLanding":case"QuardroLightning":case"Lightning":case"SkyFist":case"LightingShield":case"WindSword":case"LootItAll":case"Push2":case"TeslaTrap":case"ChainLighting":this.air.iterateStandartAir();break;case"StoneFace":case"GroundShake":case"Quicksand":case"StoneSpear":case"TunnelTravel":case"EarthProtection":case"StalactitesFall":case"Earthquake":case"Astonishing":case"WallUp":case"MilestoneHit":case"RollingStones":this.earth.iterateStandartEarth();break;case"arcane":this.arcane.iterateStandartArcane();break;default:info('No iteration animation for "'+a+'"')}},this["continue"]=function(a,b){switch(b||(b=this.currentSpellData),a){case"Fireball":this.fire.finishFireball(b);break;case"FireNova":this.fire.finishFireNova(b);break;case"ExplodingBees":this.fire.finishExplodingBees(b);break;case"ButthurtJump":this.fire.finishButthurtJump(b);break;case"LightMyFire":this.fire.finishLightMyFire(b);break;case"Bomb":this.fire.finishBomb(b);break;case"FireLady":this.fire.finishExplodingBees(b);break;case"FaceCanon":this.fire.finishFaceCanon(b);break;case"LetFireInYourEyes":this.fire.finishLetFireInYourEyes(b);break;case"PhoenixStrike":this.fire.finishPhoenixStrike(b);break;case"RainOfFire":this.fire.finishRainOfFire(b);break;case"BurnCitiesToTheGround":this.fire.finishBurnCitiesToTheGround(b);break;case"FireImp":this.fire.finishFireImp(b);break;case"DoesItBurns":this.fire.finishDoesItBurns(b);break;case"IceCrown":this.water.finishIceCrown(b);break;case"IceSlide":this.water.finishIceSlide(b);break;case"Freeze":case"Freeze2":this.water.finishFreeze(b);break;case"IceWall":this.water.finishIceWall(b);break;case"IceSpear":this.water.finishIceSpear(b);break;case"IceCone":this.water.finishIceCone(b);break;case"WashAndGo":this.water.finishWashAndGo(b);break;case"Blizzard":this.water.finishBlizzard(b);break;case"IceShield":this.water.finishIceShield(b);break;case"Icelock":this.water.finishIcelock(b);break;case"FreshWaterFountain":this.water.finishFreshWaterFountain(b);break;case"WaterBody":this.water.finishWaterBody(b);break;case"Push":this.air.finishPush(b);break;case"Harmony":this.air.finishHarmony(b);break;case"NoMoreAirForYou":this.air.finishNoMoreAirForYou(b);break;case"HardLanding":this.air.finishHardLanding(b);break;case"QuardroLightning":this.air.finishQuardroLightning(b);break;case"Lightning":this.air.finishLightning(b);break;case"SkyFist":this.air.finishSkyFist(b);break;case"LightingShield":this.air.finishLightingShield(b);break;case"WindSword":this.air.finishWindSword(b);break;case"LootItAll":this.air.finishLootItAll(b);break;case"Push2":this.air.finishPush2(b);break;case"TeslaTrap":this.air.finishTeslaTrap(b);break;case"ChainLighting":this.air.finishChainLighting(b);break;case"StoneFace":this.earth.finishStoneFace(b);break;case"GroundShake":this.earth.finishGroundShake(b);break;case"Quicksand":this.earth.finishQuicksand(b);break;case"StoneSpear":this.earth.finishStoneSpear(b);break;case"TunnelTravel":this.earth.finishTunnelTravel(b);break;case"EarthProtection":this.earth.finishEarthProtection(b);break;case"StalactitesFall":this.earth.finishStalactitesFall(b);break;case"Earthquake":this.earth.finishEarthquake(b);break;case"Astonishing":this.earth.finishAstonishing(b);break;case"WallUp":this.earth.finishWallUp(b);break;case"MilestoneHit":this.earth.finishMilestoneHit(b);break;case"RollingStones":this.earth.finishRollingStones(b);break;case"arcane":this.arcane.finisharcane(b);break;default:info('No last animation for "'+a+'"'),MageS.Game.animations.singleAnimationFinished(this.isSecondPartWaiting)}},this.tryToEndFirstPart=function(){this.isSecondPartWaiting?this["continue"](this.currentSpellName):this.stopAnimation?this.clearAnimationField():this.iterate(this.currentSpellName)},this.endSpellAnimation=function(){var a=this.isSecondPartWaiting;this.clearAnimationField(),MageS.Game.animations.singleAnimationFinished(a)},this.clearAnimationField=function(){$(".battle-border .mage path.hand").show(),$(".battle-border .mage path.active-hand").hide(),$(".animation-field").html(""),this.savedData=[],this.currentSpellName="",this.isSecondPartWaiting=!1,this.stopAnimation=!1,this.currentSpellData={},this.spellAnimationRunning=!1},this.createIcon=function(a,b,c){var d=$(this.game.svg).find("#"+a+" path"),e=$('<div class="svg animation"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="svg-icon" viewBox="0 0 512 512"></svg></div>');return e.find("svg").append(d.clone()),b&&e.addClass(b),c&&e.find("svg").rotate(c+"deg"),e},this.angle_trunc=function(a){for(;0>a;)a+=2*Math.PI;return a},this.getDistanceBetweenTwoDots=function(a,b,c,d){var e=d-b,f=c-a,g=this.angle_trunc(Math.atan2(e,f)),h=g*(180/Math.PI),i=Math.sqrt(Math.pow(f,2)+Math.pow(e,2));return[i,h]},this.transformDegAndDistanceToMargin=function(a,b){var c=1,d=1;if(a>360)return a-=360,this.transformDegAndDistanceToMargin(a,b);if(0>a)return a+=360,this.transformDegAndDistanceToMargin(a,b);a>0&&90>=a||(a>90&&180>=a?(a=180-a,c=-1):a>180&&270>=a?(a-=180,d=-1,c=-1):a>270&&360>=a&&(a=360-a,d=-1));var e=b*Math.sin(Math.radians(a))*d,f=b*Math.sin(Math.radians(90-a))*c;return[f,e]},this.beam=function(a,b,c,d,e,f,g){g||(g={});var h=MageS.Game.spells.getDistanceBetweenTwoDots(a,b,c,d);return void 0===g.moveTop&&(g.moveTop=(b+.5)*MageS.Game.cellSize+"rem"),void 0===g.moveLeft&&(g.moveLeft=(a+.5)*MageS.Game.cellSize+"rem"),f||(f="icon-bullet-line"),MageS.Game.spells.beamStrike(h[0],h[1],f,e,g)},this.beamStrike=function(a,b,c,d,e){e||(e={}),b-=45;var f=this.createIcon(c).addClass("beam"),g=" rotate("+b+"deg)";f[0].style.transform=g;var h=f.find(".svg-icon"),i="";i=void 0!==e.moveTop?e.moveTop:this.game.cellSize/2+"rem";var j="";j=void 0!==e.moveLeft?e.moveLeft:this.game.cellSize/2+"rem",f.css({width:"1px",height:"1px","margin-left":j,"margin-top":i});var k=a/Math.sqrt(2);f.find("svg").css({width:k*this.game.cellSize+"rem",height:k*this.game.cellSize+"rem"}),h.css({position:"absolute"}),$(".animation-field").append(f);var l=f.find("path"),m=10;void 0!==e.beamWidth&&(m=e.beamWidth);var n=(m-a)/10;l.css({fill:"none",stroke:d,"stroke-width":n+"rem","stroke-opacity":1});var o=l[0],p=new Segment(o),q=.8;void 0!==e.time&&(q=e.time);var r="0",s="0",t="100%",u="150%",v=!1,w=0;if(void 0!==e.segment1&&(r=e.segment1[0],s=e.segment1[1]),void 0!==e.segment2&&(t=e.segment2[0],u=e.segment2[1]),void 0!==e.segment3){v=!0;var x=e.segment3[0],y=e.segment3[1];w=e.time2}void 0===e.yesIWantToHaveBlinkBug&&p.draw(r,s,0);var z=0,A=0;return void 0!==e.delay&&(z=e.delay),void 0!==e.delay2&&(A=e.delay2),setTimeout(function(){void 0!==e.yesIWantToHaveBlinkBug&&p.draw(r,s,0),p.draw(t,u,q)},z),v&&setTimeout(function(){p.draw(x,y,w)},z+1e3*q+A),void 0!==e["delete"]&&setTimeout(function(){f.remove()},z+1e3*q+1e3*w+A),f},this.spinIcon=function(a,b,c,d){var e=0;void 0!==d.delay&&(e=d.delay);var f=MageS.Game.spells.createIcon(a,b).addClass("spinIcon");return setTimeout(function(){$(".animation-field").append(f);var a=.5*MageS.Game.cellSize*MageS.Game.rem;f.css({width:"1px",height:"1px",opacity:0,"margin-left":a,"margin-top":a});var b=f.find("svg");void 0!==d.rangeRandom&&(c+=Math.random()*d.rangeRandom-d.rangeRandom/2),b.css({"margin-left":c*MageS.Game.cellSize*MageS.Game.rem,"margin-top":-a}),void 0!==d.scale&&(b[0].style.transform="scale("+d.scale+")");var e=500;void 0!==d.time&&(e=d.time);var g=0;g=void 0!==d.angleStart?d.angleStart:360*Math.random();var h=360;void 0!==d.rotateDistance&&(h=d.rotateDistance);var i=g+h,j=0;if(void 0!==d.preAnimationDelay&&(j=d.preAnimationDelay),f[0].style.transform="rotate("+g+"deg)",setTimeout(function(){f.animateRotate(g,i,e,"linear")},j),f.animate({opacity:1},{duration:100,queue:!1}),void 0!==d.rangeMove){var k=Math.random()*d.rangeMove*2-d.rangeMove;b.animate({"margin-left":(c+k)*MageS.Game.cellSize*MageS.Game.rem},{duration:e})}void 0!==d["delete"]&&setTimeout(function(){f.animate({opacity:0},{duration:100,queue:!1,complete:function(){$(this).remove()}})},e-100)},e),f},this.moveIcon=function(a,b,c,d,e,f,g){var h=0;if(void 0===g.delay){var i=400;void 0!==g.delayRange&&(i=g.delayRange),h=Math.random()*i}else h=g.delay;setTimeout(function(){var h=MageS.Game.spells.createIcon(a,b);$(".animation-field").append(h);var i=MageS.Game.cellSize*MageS.Game.rem,j=0;void 0!==g.randomRange&&(j=g.randomRange);var k=0;void 0!==g.startRandomRange&&(k=g.startRandomRange),c=c*i+Math.random()*k-k/2,d=d*i+Math.random()*k-k/2,h.css({opacity:0,"margin-left":c,"margin-top":d});var l="";void 0!==g.scale&&(l+=" scale("+g.scale+", "+g.scale+")"),void 0!==g.startRotate&&(l+=" rotate("+g.startRotate+"deg)"),l&&(h[0].style.transform=l);var m=h.find("svg");h.animate({opacity:1},{duration:50}),e=e*i+Math.random()*j-j/2,f=f*i+Math.random()*j-j/2;var n="swing";void 0!==g.easing&&(n=g.easing),h.animate({"margin-left":e,"margin-top":f},{queue:!1,duration:g.time,easing:n}),void 0!==g.rotate&&m.animateRotate(0,720,g.time);var o=0;void 0!==g.deleteDelay&&(o=g.deleteDelay),setTimeout(function(){h.fadeOut(50,function(){$(this).remove()})},g.time-50+o)},h)},this.particleExplosion=function(a,b,c,d){void 0===d.time&&(d.time=300);var e={time:d.time},f=0,g=0,h=20;void 0!==d.count&&(h=d.count);var i=0;void 0!==d.delay&&(i=d.delay);var j=400;void 0!==d.randomDelay&&(j=d.randomDelay);
for(var k=0;h>k;k++)f=a+2*Math.random()-1,g=b+2*Math.random()-1,e.delay=i+Math.random()*j,e.scale=.1,MageS.Game.spells.moveIcon("icon-cercle",c,a,b,f,g,e)},this.addScreen=function(a){var b=0;void 0!==a.delay&&(b=a.delay),setTimeout(function(){var b=100;void 0!==a.duration&&(b=a.duration);var c=$(".animation-shadow");void 0!==a.color&&c.css({"background-color":a.color});var d=.8;void 0!==a.opacity&&(d=a.opacity),c.show().animate({opacity:d},{duration:b,complete:function(){if(void 0!==a["delete"]){var b=0;void 0!==a.deleteDelay&&(b=a.deleteDelay);var d=100;void 0!==a.deleteDuration&&(d=a.deleteDuration),setTimeout(function(){c.animate({opacity:0},{duration:d,complete:function(){$(this).hide()}})},b)}}})},b)},this.cellShake=function(a,b){var c=0,d=0,e=5;void 0!==b.amplitude&&(e=b.amplitude);var f=200;void 0!==b.duration&&(f=b.duration);var g=0;void 0!==b.delay&&(g=b.delay);for(var h in a){c=a[h][0],d=a[h][1];var i=$(".battle-border .cell.x-"+c+".y-"+d);MageS.Game.monimations.camShake("Y",f,e,{el:i,delay:g})}},this.getRightHandCoordinates=function(a){var b=$(".battle-border .mage").data("d"),c=0,d=0;switch(b){case 0:c=a;break;case 1:d=a;break;case 2:c=-a;break;case 3:d=-a}return[c,d]},this.getLeftHandCoordinates=function(a){var b=$(".battle-border .mage").data("d"),c=0,d=0;switch(b){case 0:c=-a;break;case 1:d=-a;break;case 2:c=a;break;case 3:d=a}return[c,d]},this.getMiddleCoordinats=function(a,b,c,d){return[(a+c)/2,(b+d)/2]}},MageS.Spells.Fire=function(a,b){this.game=a,this.spells=b,this.startStandartFire=function(){for(var a="icon-bullet-cast-2-spirals",b="icon-bullet-cast-2-spirals-2",c=this.spells.getRightHandCoordinates(.7),d=this.spells.getLeftHandCoordinates(.7),e=.5,f=0;1>f;f++){var g={time:e,time2:e,delay2:0,beamWidth:12,segment1:["0%","0%"],segment2:["25%","75%"],segment3:["100%","200%"],"delete":!0};this.spells.beam(c[0],c[1],d[0],d[1],MageS.Game.color.red,a,g),this.spells.beam(c[0],c[1],d[0],d[1],MageS.Game.color.red,b,g);var h={time:e,time2:e,delay2:0,beamWidth:12,segment1:["0%","0%"],segment2:["0%","100%"],segment3:["100%","200%"],"delete":!0};this.spells.beam(d[0],d[1],c[0],c[1],MageS.Game.color.red,a,h),this.spells.beam(d[0],d[1],c[0],c[1],MageS.Game.color.red,b,h)}setTimeout(function(){MageS.Game.spells.fire.iterateStandartFire()},600)},this.iterateStandartFire=function(){for(var a="icon-bullet-cast-2-segments",b=0;3>b;b++)for(var c={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.2,time2:.2,beamWidth:12,segment1:["100%","100%"],segment2:["15%","85%"],segment3:["-50%","0%"],"delete":!0,delay:200*b},d=0;4>d;d++)this.spells.beamStrike(2,90*d+45*b,a,MageS.Game.color.red,c);setTimeout(function(){MageS.Game.spells.tryToEndFirstPart()},800)},this.standartFireToMiddle=function(a){a||(a=300)},this.finishFireNova=function(a){this.standartFireToMiddle(),this.blastSunRing("color-red-bright"),setTimeout(function(){MageS.Game.spells.fire.blastSunRing("color-yellow")},100),setTimeout(function(){MageS.Game.spells.fire.blastSunRing("color-white")},200),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1400)},this.blastSunRing=function(a,b){void 0===b&&(b={});var c=this.spells.createIcon("icon-sun-fire",a);$(".animation-field").append(c);var d=6;void 0!==b.scale&&(d=b.scale),this.game.monimations.blastInScale(c.find("svg.svg-icon"),d,null,1200),void 0!==b.marginTop&&c.css("margin-top",b.marginTop*MageS.Game.cellSize*MageS.Game.rem),void 0!==b.marginLeft&&c.css("margin-left",b.marginLeft*MageS.Game.cellSize*MageS.Game.rem),setTimeout(function(){c.animate({opacity:0},{duration:400,complete:function(){$(this).remove()}})},800)},this.finishExplodingBees=function(a){if(this.standartFireToMiddle(),void 0===a.targetX)return void MageS.Game.spells.endSpellAnimation();var b=Math.atan2(a.targetY,a.targetX),c=b*(180/Math.PI),d=Math.sqrt(Math.pow(a.targetX,2)+Math.pow(a.targetY,2));MageS.Game.spells.beamStrike(d,c,"icon-sinusoidal-line","#F07818"),setTimeout(function(){MageS.Game.spells.beamStrike(d,c,"icon-bullet-around-side-line","#F07818")},50),setTimeout(function(){MageS.Game.spells.beamStrike(d,c,"icon-bullet-backward-line","#F07818")},100),setTimeout(function(){MageS.Game.spells.beamStrike(d,c,"icon-bullet-cercle-line","#F07818")},200),setTimeout(function(){MageS.Game.spells.beamStrike(d,c,"icon-bullet-around-line","#F07818")},250),setTimeout(function(){$(".animation-field .beam").remove()},1200);var e=this.spells.createIcon("icon-fireflake","color-red").addClass("blast").css({"margin-left":a.targetX*this.game.cellSize+"rem","margin-top":a.targetY*this.game.cellSize+"rem"}),f=e.find("svg.svg-icon");f[0].style.transform="scale(0)",$(".animation-field").append(e),setTimeout(function(){MageS.Game.monimations.blastInScale(f,1,function(){$(".animation-field .blast").animate({opacity:0},{duration:300,complete:function(){$(this).remove(),MageS.Game.spells.endSpellAnimation()}})},500)},500)},this.buttFire=function(a,b,c){var d=this.spells.createIcon("icon-celebration-fire"),e=d.find("path");e.attr("fill","#ff3f03"),$(".animation-field").append(d),d[0].style.transform="rotate("+a+"deg) translate("+c*MageS.Game.cellSize*MageS.Game.rem+"px, "+b*MageS.Game.cellSize*MageS.Game.rem+"px)",e.animate({svgFill:"#fff"},{duration:600}),MageS.Game.monimations.blastInScale(d.find("svg.svg-icon"),.8,null,250),setTimeout(function(){d.animate({opacity:0},{duration:200,complete:function(){$(this).remove()}})},250)},this.finishButthurtJump=function(a){this.standartFireToMiddle(50),$(".battle-border .mage path.hand").show(),$(".battle-border .mage path.active-hand").hide();var b=a.d,c=0,d=-.3,e=0;switch(b){case 0:c=180;break;case 1:c=-90,d=-.4,e=.1;break;case 2:d=-.5;break;case 3:c=90,d=-.4,e=-.1}MageS.Game.animations.singleAnimationFinished(MageS.Game.spells.isSecondPartWaiting),this.buttFire(c,d,e),setTimeout(function(){MageS.Game.spells.fire.buttFire(c,d,e)},150),setTimeout(function(){MageS.Game.spells.fire.buttFire(c,d,e)},300),setTimeout(function(){MageS.Game.spells.fire.buttFire(c,d,e)},450),setTimeout(function(){MageS.Game.spells.clearAnimationField()},900)},this.finishBomb=function(a){this.standartFireToMiddle(800),MageS.Game.animations.singleAnimationFinished(MageS.Game.spells.isSecondPartWaiting),setTimeout(function(){MageS.Game.spells.clearAnimationField()},800)},this.finishLightMyFire=function(a){this.standartFireToMiddle(800);var b=this.spells.createIcon("icon-torch","color-red");$(".animation-field").append(b),b.animate({"margin-left":a.targetX*MageS.Game.cellSize*MageS.Game.rem},{duration:600,easing:"easeInBack",queue:!1}),b.animate({"margin-top":a.targetY*MageS.Game.cellSize*MageS.Game.rem},{duration:600,easing:"easeInOutCirc",queue:!1}),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},800)},this.finishFaceCanon=function(a){this.standartFireToMiddle();var b="X";(0==a.d||2==a.d)&&(b="Y");var c=this.spells.createIcon("icon-quick-slash");$(".animation-field").append(c);var d=0,e=0,f=0,g=0,h=0,i=0,j=0;switch(a.d){case 0:d=-90,f=-1.5,h=3;break;case 1:e=1.5,g=3;break;case 2:d=90,f=1.5,h=3;break;case 3:d=180,e=-1.5,g=3}c.animate({"margin-left":this.game.cellSize*e+"rem","margin-top":this.game.cellSize*f+"rem"},{duration:1200}),c[0].style.transform="rotate("+d+"deg)",this.game.monimations.blastInScale(c.find("svg.svg-icon"),6,null,1200),c.find("path").attr("fill","#ff3f03").animate({opacity:0,svgFill:"#fff"},{duration:1050,easing:"easeInExpo"});for(var k=$('<div class="animation animation-centred-block"></div>'),l=0;5>=l;l++){var m=$('<div class="circle n-'+l+'" data-n="'+l+'"></div>').width("0").height("0").css({position:"absolute"});m.svg({onLoad:function(a){a.circle(0,0,.1*MageS.Game.rem,{fill:"#ff3f03",stroke:"none"})}}),g&&(i=g-l*g/2.5),h&&(j=h-l*h/2.5),m.find("svg circle").delay(550).animate({svgCx:(5*e+j)*MageS.Game.cellSize*MageS.Game.rem,svgCy:(5*f+i)*MageS.Game.cellSize*MageS.Game.rem},{duration:400}),k.append(m)}$(".animation-field").append(k),MageS.Game.monimations.camShake(b,500,6,{delay:800}),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1200)},this.finishLetFireInYourEyes=function(a){this.standartFireToMiddle(100);for(var b=900,c=this.spells.getDistanceBetweenTwoDots(0,0,a.targetX,a.targetY),d=0;2>d;d++){var e=this.spells.createIcon("icon-eyeball","color-white"),f=this.spells.createIcon("icon-eyeball2","color-red"),g=c[1]+90+-180*d,h=MageS.Game.cellSize*MageS.Game.rem,i=this.spells.transformDegAndDistanceToMargin(g,h);e.animate({"margin-left":i[0],"margin-top":i[1]},{duration:300}),f.animate({"margin-left":i[0],"margin-top":i[1]},{duration:300}),e.find("svg").css({width:"0.1rem",height:"0.1rem"}).animate({width:"1.6rem",height:"1.6rem"},{duration:600}),f.find("svg").css({width:"0.1rem",height:"0.1rem"}).animate({width:"1.6rem",height:"1.6rem"},{duration:600}),$(".animation-field").append(e).append(f);var j=MageS.Game.cellSize*MageS.Game.rem,k=MageS.Game.spells.getDistanceBetweenTwoDots(i[0]/j,i[1]/j,a.targetX,a.targetY),l={segment2:["0","100%"],time:.05,delay:b,moveLeft:i[0]+j/2,moveTop:i[1]+j/2};MageS.Game.spells.beamStrike(k[0],k[1],"icon-bullet-line","#F07818",l);var m=k[1]-30,n=m-(180+90*Math.random());1===d&&(n=m+(180+90*Math.random())),e.find("svg").animateRotate(n,m,b,"easeInOutBack"),f.find("svg").animateRotate(n,m,b,"easeInOutBack")}var o="X";(c[1]>=45&&c[1]<135||c[1]>=225&&c[1]<315)&&(o="Y"),MageS.Game.monimations.camShake(o,400,3,{delay:b}),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1400)},this.doPhoenixStep=function(a,b,c,d){var e=b[c].point,f=[];if(void 0!==b[c].targets){f=b[c].targets;for(var g in f){var h=this.spells.getDistanceBetweenTwoDots(e[0],e[1],f[g][0],f[g][1]),i={moveTop:(e[1]+.5)*MageS.Game.cellSize+"rem",moveLeft:(e[0]+.5)*MageS.Game.cellSize+"rem",time:1,delay:500,beamWidth:15},j="icon-bullet-simple-middle-line";Math.random()>.5&&(j="icon-sinusoidal-line"),MageS.Game.spells.beamStrike(h[0],h[1],j,"#F07818",i)}}a.animate({"margin-left":e[0]*MageS.Game.cellSize+"rem","margin-top":e[1]*MageS.Game.cellSize+"rem"},{duration:500,easing:"linear",complete:function(){if(void 0!==b[c+1])MageS.Game.spells.fire.doPhoenixStep(a,b,c+1,d);else{var f=0,g=0;switch(d){case 0:g-=5;break;case 1:f+=5;break;case 2:g+=5;break;case 3:f-=5}a.animate({opacity:0,"margin-left":(e[0]+f)*MageS.Game.cellSize+"rem","margin-top":(e[1]+g)*MageS.Game.cellSize+"rem"},{duration:1e3,complete:function(){MageS.Game.spells.fire.clearPhoenix()}})}}})},this.clearPhoenix=function(){MageS.Game.spells.endSpellAnimation()},this.finishPhoenixStrike=function(a){this.standartFireToMiddle();var b=this.spells.createIcon("icon-crow-dive","color-red").addClass("phoenix");$(".animation-field").append(b);var c=-45;switch(a.d){case 0:c-=90;break;case 2:c+=90;break;case 3:c+=180}b[0].style.transform="rotate("+c+"deg)",this.doPhoenixStep(b,a.data,0,a.d)},this.meteorFromSkyOnCell=function(a,b){var c=this.spells.createIcon("icon-plasma-bolt");c.find("path").attr("fill","#ff3f03"),c.css({"margin-top":b*MageS.Game.cellSize+"rem","margin-left":a*MageS.Game.cellSize+"rem"}),$(".animation-field").append(c);var d=c.find("svg.svg-icon");d.css({top:"-4rem",left:"-4rem",position:"absolute",opacity:0}),setTimeout(function(){d.animate({top:"0",left:"0"},{duration:300,easing:"easeInBack"}),setTimeout(function(){d.animate({opacity:1},{duration:210,queue:!1})},50),setTimeout(function(){d.find("path").animate({svgFill:"#fff"}),d.animate({whyNotToUseANonExistingProperty:100,svgFill:"#fff"},{step:function(a,b){$(this).css("-webkit-transform","skew("+-a/3+"deg, "+-a/2+"deg)")},duration:200,easing:"linear",queue:!1,complete:function(){$(this).remove()}})},260)},300*Math.random())},this.finishRainOfFire=function(a){this.standartFireToMiddle(),MageS.Game.monimations.camShake("Y",1500,3,{delay:100},function(){MageS.Game.spells.endSpellAnimation()});for(var b in a.data)this.meteorFromSkyOnCell(a.data[b][0],a.data[b][1]);setTimeout(function(){for(var b in a.data)MageS.Game.spells.fire.meteorFromSkyOnCell(a.data[b][0],a.data[b][1])},300),setTimeout(function(){for(var b in a.data)MageS.Game.spells.fire.meteorFromSkyOnCell(a.data[b][0],a.data[b][1])},600)},this.finishBurnCitiesToTheGround=function(a){this.standartFireToMiddle(50);for(var b="icon-bullet-cast-2-segments",c=[MageS.Game.color.red,MageS.Game.color.white,MageS.Game.color.orange],d=0;3>d;d++)for(var e={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.3,beamWidth:12,segment1:["100%","100%"],segment2:["0%","100%"],delay:400*d},f=0;4>f;f++)this.spells.beamStrike(2,90*f,b,c[d],e);var g=["icon-bullet-line","icon-bullet-line-small-curve-right","icon-bullet-line-small-curve-left"];MageS.Game.monimations.camShake("Y",500,3,{delay:50}),MageS.Game.monimations.camShake("X",500,3,{delay:550}),MageS.Game.monimations.camShake("Y",500,3,{delay:1050});for(var h=0;60>h;h++){var i={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.3,beamWidth:12,segment1:["8%","8%"],segment2:["100%","140%"],"delete":!0,delay:20*h},j=array_rand(g);this.spells.beamStrike(7,6*h,j,MageS.Game.color.red,i)}setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1500)},this.finishFireImp=function(a){this.standartFireToMiddle(50);for(var b={moveLeft:(a.targetX+.5)*MageS.Game.cellSize+"rem",moveTop:(a.targetY+.5)*MageS.Game.cellSize+"rem",time:1.3,beamWidth:12,segment1:["100%","100%"],segment2:["-8%","0"]},c=0;9>c;c++)this.spells.beamStrike(8,40*c,"icon-bullet-start-spin","#F07818",b);setTimeout(function(){MageS.Game.animations.singleAnimationFinished(MageS.Game.spells.isSecondPartWaiting)},1150),setTimeout(function(){MageS.Game.spells.clearAnimationField()},1500)},this.finishDoesItBurns=function(a){var b="icon-bullet-cast-middle-half-cercle",c="icon-bullet-cast-middle-only-cercle",d=parseInt(a.targetX),e=parseInt(a.targetY),f=this.spells.getMiddleCoordinats(0,0,d,e),g={delay:0,scale:.5,time:500,rotate:!0,easing:"easeOutCubic",deleteDelay:400};this.spells.moveIcon("icon-fireflake","color-red",0,0,f[0],f[1],g);for(var h=0;4>h;h++){var g={time:.5,delay:100*h,segment1:["0%","0%"],segment2:["100%","110%"],"delete":!0};this.spells.beam(0,0,d,e,MageS.Game.color.white,c,g)}var i=.5,g={time:i,delay:500,segment1:["8%","8%"],segment2:["100%","200%"],"delete":!0};this.spells.beam(0,0,d,e,MageS.Game.color.red,b,g);var j={time:i,delay:500,segment1:["92%","92%"],segment2:["-100%","0%"],"delete":!0};this.spells.beam(d,e,0,0,MageS.Game.color.red,b,j);var k={delay:700,randomDelay:300};this.spells.particleExplosion(d,e,"color-red",k),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1200)},this.startFireball=function(){for(var a=$('<div class="animation animation-centred-block"></div>'),b=0;3>b;b++){var c=$('<div class="circle n-'+b+'" data-n="'+b+'"></div>').width("0").height("0").css({position:"absolute"});c.svg({onLoad:function(a){a.circle(0,0,.25*MageS.Game.rem,{fill:"none",stroke:"#F07818"})}}),c.find("svg circle").animate({svgR:(.75+.25*b)*this.game.rem},{duration:250}),a.append(c)}for(var b=0;2>b;b++){var c=$('<div class="fire-dot n-'+b+'"></div>').width("0").height("0").css({position:"absolute"});c.svg({onLoad:function(a){a.circle(0,0,.1*MageS.Game.rem,{fill:"#F07818",stroke:"none"})}}),c.find("svg circle").animate({svgCx:(1+.25*b)*this.game.rem},{duration:250}),MageS.Game.monimations.rotate(c,0,360,250,0==b,!1),a.append(c)}setTimeout(function(){MageS.Game.spells.fire.iterateFireball()},260),this.spells.savedData[0]=!0,$(".animation-field").prepend(a)},this.iterateFireball=function(){var a=400,b=$(".animation-field .animation");if(MageS.Game.monimations.rotate(b.find(".fire-dot.n-0"),0,360,a,!0,!1,function(){MageS.Game.spells.tryToEndFirstPart()}),MageS.Game.monimations.rotate(b.find(".fire-dot.n-1"),0,360,a,!1,!1),this.spells.savedData[0])var c="#FFF";else var c="#F07818";this.spells.savedData[0]=!this.spells.savedData[0],b.find(".fire-dot circle").animate({svgStroke:c},{duration:a})},this.finishFireball=function(a){var b=$(".animation-field .animation");MageS.Game.monimations.rotate(b.find(".fire-dot.n-0"),180+180*Math.random(),180,500,!0,!1),MageS.Game.monimations.rotate(b.find(".fire-dot.n-1"),180+180*Math.random(),180,500,!1,!1),b.find(".fire-dot circle").animate({svgCx:0},{duration:350,complete:function(){b.find(".fire-dot").remove()},easing:"easeInBack"});for(var c=Math.atan2(a.targetY,a.targetX),d=c*(180/Math.PI),e=["easeOutCubic","easeOutQuart","easeOutExpo"],f=Math.round(Math.sqrt(Math.pow(a.targetX,2)+Math.pow(a.targetY,2))*this.game.cellSize),g=0;3>g;g++)b.find(".circle.n-"+g+" circle").animate({svgR:(.1+.1*g)*this.game.rem},{duration:200,complete:function(){var a=$(this),b=a.parents(".circle").data("n");a.css({stroke:"none",fill:"#F07818"}),a.parent()[0].style.transform="rotate("+d+"deg)",a.parent()[0].style["transform-origin"]="0% 0%",setTimeout(function(){a.animate({svgCx:f*MageS.Game.rem},{duration:400,easing:e[b]})},100),setTimeout(function(){a.animate({svgTransform:"skewX("+40*b+")",svgFill:"#fff"},{duration:300,easing:e[b],queue:!1})},420)}});$(".animation-field .animation").animate({opacity:"0.9"},{duration:1300,easing:"easeInExpo",complete:function(){MageS.Game.spells.endSpellAnimation()}})}},MageS.Spells.Water=function(a,b){this.game=a,this.spells=b,this.sparklingAnimation=function(a){for(var b=$('<div class="animation-centred-block"></div>'),c=0;6>c;c++){var d=$("<div></div>").width("0").height("0").css({position:"absolute"});d.svg({onLoad:function(a){a.circle(0,0,.25*MageS.Game.rem,{fill:"#fff",stroke:"none"})}}),d.find("svg circle").animate({svgCx:4*this.game.rem,svgR:.05*this.game.rem},{duration:500}),d[0].style.transform="rotate("+parseInt(60*c)+"deg)",b.append(d)}return a.prepend(b),b},this.createCastingSphere=function(a,b,c,d){var e=this.spells.createIcon(c).addClass("casting-sphere");$(".animation-field").append(e);var f=e.find("path");e.css({"margin-left":a*MageS.Game.cellSize*MageS.Game.rem,"margin-top":b*MageS.Game.cellSize*MageS.Game.rem}),f.css({fill:"none",stroke:d,"stroke-width":"1rem","stroke-opacity":1});var g=f[0],h=new Segment(g);return h.draw(0,0,0),h.draw("100%","110%",1.5),h},this.startStandartWater=function(){var a=$(".battle-border .mage").data("d"),b=0,c=0,d=0,e=0,f=.7;switch(a){case 1:case 3:c=-f,e=f;break;case 0:case 2:b=-f,d=f}this.spells.savedData[0]=this.createCastingSphere(b,c,"icon-bullet-sphere-cast","#37A4F9"),this.spells.savedData[1]=this.createCastingSphere(b,c,"icon-bullet-sphere-cast-2","#fff"),this.spells.savedData[2]=this.createCastingSphere(b,c,"icon-bullet-sphere-cast-3","#37A4F9"),this.spells.savedData[3]=this.createCastingSphere(d,e,"icon-bullet-sphere-cast","#37A4F9"),this.spells.savedData[4]=this.createCastingSphere(d,e,"icon-bullet-sphere-cast-2","#fff"),this.spells.savedData[5]=this.createCastingSphere(d,e,"icon-bullet-sphere-cast-3","#37A4F9"),setTimeout(function(){MageS.Game.spells.tryToEndFirstPart()},1500)},this.iterateStandertWater=function(){for(var a in this.spells.savedData){var b=this.spells.savedData[a];b.draw(0,0,0),b.draw("100%","120%",1.5)}setTimeout(function(){MageS.Game.spells.tryToEndFirstPart()},1500)},this.finishStandartWater=function(){$(".casting-sphere").remove()},this.finishIceSlide=function(a){this.finishStandartWater();for(var b="icon-bullet-cercle-sinus-2",c="icon-bullet-cercle-sinus",d={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.8,beamWidth:10,segment1:["0%","0%"],segment2:["100%","200%"]},e=0;4>e;e++)this.spells.beamStrike(2.7-.3*e,90*e,b,MageS.Game.color.darkBlue,d),this.spells.beamStrike(2.9-.3*e,90*e,c,MageS.Game.color.darkBlue,d);for(var f={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.8,beamWidth:10,segment1:["100%","100%"],segment2:["-100%","0%"]},e=0;4>e;e++)this.spells.beamStrike(3-.5*e,90*e,b,MageS.Game.color.darkBlue,f),this.spells.beamStrike(3.3-.5*e,90*e,c,MageS.Game.color.darkBlue,f);setTimeout(function(){MageS.Game.spells.endSpellAnimation()},800)},this.finishFreeze=function(a){this.finishStandartWater();for(var b={time:400,startRandomRange:MageS.Game.cellSize*MageS.Game.rem,randomRange:MageS.Game.cellSize*MageS.Game.rem,delayRange:300,scale:.25,rotate:!0},c=a.targetX,d=a.targetY,e=0,f=0,g=0;20>g;g++)Math.random()>.5?(e=Math.random()>.5?5:-5,f=Math.round(10*Math.random()-5)):(f=Math.random()>.5?5:-5,e=Math.round(10*Math.random()-5)),b.from=[e,f],this.spells.moveIcon("icon-snowflake-1","color-white",e,f,c,d,b);setTimeout(function(){MageS.Game.spells.endSpellAnimation()},800)},this.finishIceWall=function(a){this.finishStandartWater();var b={time:500,startRandomRange:1.5*MageS.Game.cellSize*MageS.Game.rem,randomRange:1.5*MageS.Game.cellSize*MageS.Game.rem,scale:.25,rotate:!0},c=3;switch(14==a.patternId&&(c=2),a.d){case 0:var d=4,e=-c,f=-3,g=-c;break;case 1:var d=c,e=-4,f=c,g=3;break;case 2:var d=4,e=c,f=-3,g=c;break;case 3:var d=-c,e=-4,f=-c,g=3}for(var h=0;20>h;h++)this.spells.moveIcon("icon-snowflake-1","color-white",d,e,f,g,b);setTimeout(function(){MageS.Game.spells.endSpellAnimation()},900)},this.finishIceSpear=function(a){this.finishStandartWater();var b=this.spells.createIcon("icon-ice-spear","color-dark-blue");$(".animation-field").append(b);var c=this.spells.getDistanceBetweenTwoDots(0,0,a.targetX,a.targetY);b.find("svg")[0].style.transform="rotate("+(c[1]-45)+"deg)";var d=this.spells.transformDegAndDistanceToMargin(c[1],c[0]);b.animate({"margin-left":d[0]*MageS.Game.cellSize*MageS.Game.rem,"margin-top":d[1]*MageS.Game.cellSize*MageS.Game.rem},{duration:400,easing:"easeInQuart",complete:function(){$(this).remove()}});var e={segment2:["100%","105%"],time:.5,delay:100},f="icon-bullet-sinus-2",g="icon-bullet-sinus";this.spells.beamStrike(c[0],c[1],f,"#fff",e),this.spells.beamStrike(c[0],c[1],g,"#fff",e),e.delay=250,this.spells.beamStrike(c[0],c[1],f,"#fff",e),this.spells.beamStrike(c[0],c[1],g,"#fff",e),e.delay=400,this.spells.beamStrike(c[0],c[1],f,"#fff",e),this.spells.beamStrike(c[0],c[1],g,"#fff",e),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},900)},this.finishIceCone=function(a){this.finishStandartWater();var b={time:400,startRandomRange:MageS.Game.cellSize*MageS.Game.rem,randomRange:MageS.Game.cellSize*MageS.Game.rem,scale:.25,rotate:!0},c=[];for(var d in a.pattern)Math.abs(a.pattern[d][0])+Math.abs(a.pattern[d][1])>2&&c.push([a.pattern[d][0],a.pattern[d][1]]);for(var e=[],f=0;20>f;f++)e=array_rand(c),this.spells.moveIcon("icon-snowflake-1","color-white",0,0,e[0],e[1],b);setTimeout(function(){MageS.Game.spells.endSpellAnimation()},800)},this.finishWashAndGo=function(a){this.finishStandartWater();for(var b={beamWidth:20},c=["#529BCA","#37A4F9","#ffffff"],d="",e=["icon-bullet-line-small-curve-right","icon-bullet-line-small-curve-left","icon-bullet-line","icon-bullet-sinus"],f="",g=0;10>g;g++)d=array_rand(c),f=array_rand(e),this.spells.beam(a.targetX+.5*Math.random()-.25,a.targetY+.5*Math.random()-.25,0,0,d,f,b);setTimeout(function(){MageS.Game.spells.endSpellAnimation()},800)},this.finishBlizzard=function(a){this.finishStandartWater();for(var b={scale:.25,time:300,rotateDistance:180,rangeRandom:2,rangeMove:1,"delete":!0},c=0;70>c;c++)b.delay=1200*Math.random(),this.spells.spinIcon("icon-snowflake-1","color-white",2,b);setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1500)},this.finishIceShield=function(a){this.finishStandartWater();for(var b={time:400,startRandomRange:MageS.Game.cellSize*MageS.Game.rem,randomRange:MageS.Game.cellSize*MageS.Game.rem,delayRange:300,scale:.25,rotate:!0},c=0,d=0,e=0,f=0,g=0;20>g;g++)Math.random()>.5?(c=Math.random()>.5?5:-5,d=Math.round(10*Math.random()-5)):(d=Math.random()>.5?5:-5,c=Math.round(10*Math.random()-5)),b.from=[c,d],this.spells.moveIcon("icon-snowflake-1","color-white",c,d,f,e,b);var h=this.spells.createIcon("icon-ice-shield","color-white");$(".animation-field").append(h),MageS.Game.monimations.blastInScale(h,3,function(){},700),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1e3)},this.finishIcelock=function(a){if(this.finishStandartWater(),0==a.data.length)return MageS.Game.spells.endSpellAnimation(),void info("there is no targets for Icelock");var b={segment2:["100%","110%"],time:.8,delay:100},c=["icon-bullet-line","icon-bullet-sinus","icon-bullet-sinus-2","icon-bullet-around-side-line","icon-bullet-simple-right-line","icon-bullet-simple-middle-line","icon-bullet-simple-middle-line-2","icon-bullet-line-small-curve-left","icon-bullet-line-small-curve-right"];for(var d in a.data)this.spells.beam(0,0,a.data[d][0],a.data[d][1],"#fff",array_rand(c),b),this.spells.beam(0,0,a.data[d][0],a.data[d][1],"#fff",array_rand(c),b),this.spells.beam(0,0,a.data[d][0],a.data[d][1],"#fff",array_rand(c),b);setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1e3)},this.finishFreshWaterFountain=function(a){this.finishStandartWater(),MageS.Game.animations.singleAnimationFinished(MageS.Game.spells.isSecondPartWaiting),setTimeout(function(){MageS.Game.spells.clearAnimationField()},800)},this.finishWaterBody=function(a){this.finishStandartWater(),MageS.Game.monimations.skweeze($(".battle-border .mage .svg-icon")),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},800)},this.startIceCrown=function(){var a=this.spells.createIcon("icon-frozen-orb","color-white");$(".animation-field").append(a),this.spells.savedData[0]=a,this.spells.savedData[1]=this.sparklingAnimation(a),this.spells.savedData[2]=!1,a.find("svg.svg-icon path").animate({svgFill:"#fff"},{duration:1500}),this.game.monimations.blastInScale(a.find("svg.svg-icon"),3,function(){MageS.Game.spells.water.iterateIceCrown()})},this.iterateIceCrown=function(){var a=400;if(MageS.Game.monimations.rotate(this.spells.savedData[1],parseInt(30),90,a,!0,!1),this.spells.savedData[2])var b=.15*this.game.rem,c=2.5*this.game.rem;else var b=.05*this.game.rem,c=4*this.game.rem;this.spells.savedData[1].find("circle").animate({svgCx:c,svgR:b},{duration:a}),this.spells.savedData[2]=!this.spells.savedData[2];var d=this.spells.savedData[0].find("svg.svg-icon"),e=60;new mojs.Tween({repeat:0,delay:1,duration:a,onUpdate:function(a){a=a*e-e,d[0].style.transform="scale(2.25) rotate("+a+"deg)"},onComplete:function(){MageS.Game.spells.tryToEndFirstPart()}}).run()},this.finishIceCrown=function(a){MageS.Game.monimations.rotate(this.spells.savedData[1],parseInt(30),150,1e3,!0,!1),this.spells.savedData[1].find("circle").animate({svgCx:.5*this.game.rem,svgR:.15*this.game.rem},{duration:1e3,easing:"easeOutBounce"});var b=this.spells.savedData[0];MageS.Game.monimations.rotateWithScale(b.find("svg.svg-icon"),0,360,2.25,-2,1e3),$(".animation-field .animation").animate({opacity:"0"},{duration:1e3,easing:"easeInExpo",complete:function(){MageS.Game.spells.endSpellAnimation()}})}},MageS.Spells.Air=function(a,b){this.game=a,this.spells=b,this.startStandartAir=function(){for(var a={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:1,beamWidth:7,segment1:["100%","100%"],segment2:["6%","16%"],"delete":!0},b=0;7>b;b++)this.spells.beamStrike(5,360/7*b,"icon-bullet-start-spin",MageS.Game.color.lightBlue,a);setTimeout(function(){MageS.Game.spells.air.iterateStandartAir()},1e3)},this.iterateStandartAir=function(){for(var a="icon-bullet-cercle",b={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.5,beamWidth:10,segment1:["100%","100%"],segment2:["0%","5%"],"delete":!0},c=0;7>c;c++)this.spells.beamStrike(2.2,360/7*c,a,MageS.Game.color.lightBlue,b);setTimeout(function(){MageS.Game.spells.tryToEndFirstPart()},500)},this.finishPush=function(a){var b=this.spells.createIcon("icon-cloud-ring","color-light-blue");$(".animation-field").append(b),b[0].style.transform="rotate("+90*a.d+"deg)",this.game.monimations.blastInScale(b.find("svg.svg-icon"),4,null,900);var c=0,d=0;switch(a.d){case 0:d=-2*MageS.Game.cellSize+"rem";break;case 1:c=2*MageS.Game.cellSize+"rem";break;case 2:d=2*MageS.Game.cellSize+"rem";break;case 3:c=-2*MageS.Game.cellSize+"rem"}b.animate({"margin-left":c,"margin-top":d},{duration:600,easing:"easeInSine"}),MageS.Game.monimations.camShake(a.d,200,4,{delay:100}),setTimeout(function(){b.animate({opacity:.3},{duration:200,queue:!1})},500),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},600)},this.finishHarmony=function(a){var b=this.spells.createIcon("icon-triorb","color-light-blue");$(".animation-field").append(b),b.css({opacity:0});var c={delay:0,scale:.4,time:700,easing:"easeOutCubic"};this.spells.moveIcon("icon-cercle","color-light-blue",5,-3,.5,-.1,c),this.spells.moveIcon("icon-cercle","color-light-blue",-5,-3,0,-.1,c),this.spells.moveIcon("icon-cercle","color-light-blue",0,5,.25,.25,c),setTimeout(function(){b.animate({opacity:1},{duration:200,queue:!1})},650),setTimeout(function(){b.animate({opacity:0},{duration:200})},1e3),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1200)},this.finishNoMoreAirForYou=function(a){for(var b={moveLeft:(.5+parseInt(a.targetX))*MageS.Game.cellSize+"rem",moveTop:(.5+parseInt(a.targetY))*MageS.Game.cellSize+"rem",time:1,beamWidth:12,segment1:["-10%","0%"],segment2:["100%","116%"],"delete":!0},c=0;12>c;c++)this.spells.beamStrike(2,30*c,"icon-bullet-around-side-line",MageS.Game.color.lightBlue,b);setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1e3)},this.finishHardLanding=function(a){MageS.Game.animations.singleAnimationFinished(MageS.Game.spells.isSecondPartWaiting);for(var b="icon-bullet-cercle",c={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.7,beamWidth:10,segment1:["100%","100%"],segment2:["0%","3%"],"delete":!0},d=0;12>d;d++)this.spells.beamStrike(2+.4*Math.random(),30*d,b,MageS.Game.color.lightBlue,c);MageS.Game.monimations.camShake("Y",200,5,{delay:700});for(var e={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.3,beamWidth:12,segment1:["0%","0%"],segment2:["100%","200%"],"delete":!0,delay:700},f=0;12>f;f++)this.spells.beamStrike(2,30*f,"icon-bullet-around-side-line",MageS.Game.color.lightBlue,e);setTimeout(function(){MageS.Game.spells.clearAnimationField()},900)},this.finishQuardroLightning=function(a){if(0==a.targets.length)return void MageS.Game.spells.endSpellAnimation();var b={color:"#000","delete":!0,duration:200,deleteDelay:300,deleteDuration:200};this.spells.addScreen(b);var c=["icon-bullet-lightning","icon-bullet-lightning-2"],d={time:.1,beamWidth:10,segment1:["100%","100%"],segment2:["0%","100%"],"delete":!0,delay:100,yesIWantToHaveBlinkBug:!0},e="";setTimeout(function(){for(var b=0;b<a.targets.length;b++)e=array_rand(c),MageS.Game.spells.beam(0,0,a.targets[b][0],a.targets[b][1],"#FFF",e,d)},300),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},800)},this.finishLightning=function(a){var b={color:"#000","delete":!0,duration:200,deleteDelay:300,deleteDuration:200};this.spells.addScreen(b);var c="icon-bullet-lightning",d={moveLeft:(.5+parseInt(a.targetX))*MageS.Game.cellSize+"rem",moveTop:(.5+parseInt(a.targetY))*MageS.Game.cellSize+"rem",time:.1,beamWidth:10,segment1:["100%","100%"],segment2:["0%","100%"],"delete":!0,delay:100,yesIWantToHaveBlinkBug:!0};MageS.Game.monimations.camShake("Y",200,8,{el:$("body"),delay:300}),setTimeout(function(){MageS.Game.spells.beamStrike(5,-90,c,"#FFF",d)},300),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},800)},this.finishSkyFist=function(a){var b=a.pattern[0][0],c=a.pattern[0][1],d={delay:0,time:300,scale:3,startRotate:180},e=b,f=c-16;this.spells.moveIcon("icon-fist","color-white",e,f,b,c-1,d),MageS.Game.monimations.camShake("Y",200,8,{delay:300});for(var g=[],h=0;10>h;h++){var i={time:.3,beamWidth:17,"delete":!0};g[0]=2*Math.random()-1,g[1]=2*Math.random()-1,MageS.Game.spells.beam(e+g[0],f+g[1],b+g[0],c+g[1],MageS.Game.color.lightBlue,"icon-bullet-line",i)}for(var j={moveLeft:(.5+b)*MageS.Game.cellSize+"rem",moveTop:(.5+c)*MageS.Game.cellSize+"rem",time:.3,beamWidth:10,segment1:["0%","0%"],segment2:["100%","200%"],delay:300,"delete":!0},k=0;10>k;k++)this.spells.beamStrike(2,36*k,"icon-bullet-start-spin",MageS.Game.color.lightBlue,j);setTimeout(function(){
MageS.Game.spells.endSpellAnimation()},800)},this.finishLightingShield=function(a){for(var b="icon-bullet-cercle",c={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.5,beamWidth:10,segment1:["0%","0%"],segment2:["0%","100%"],"delete":!0},d=0;7>d;d++)b="icon-bullet-simple-middle-line",this.spells.beamStrike(1,360/7*d,b,MageS.Game.color.lightBlue,c);setTimeout(function(){MageS.Game.spells.endSpellAnimation()},800)},this.finishWindSword=function(a){for(var b in a.pattern)for(var c="icon-bullet-around-side-line",d={moveLeft:(.5+a.pattern[b][0])*MageS.Game.cellSize+"rem",moveTop:(.5+a.pattern[b][1])*MageS.Game.cellSize+"rem",time:.3,beamWidth:10,segment1:["0%","0%"],segment2:["100%","150%"],"delete":!0,delay:200*b},e=0;7>e;e++)this.spells.beamStrike(1.5,360/7*e,c,MageS.Game.color.lightBlue,d);setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1200)},this.finishLootItAll=function(a){if(0==a.targets.length)return void MageS.Game.spells.endSpellAnimation();for(var b in a.targets)for(var c="icon-bullet-start-spin",d=0;10>d;d++){var e={time:.7,beamWidth:10,segment1:["100%","100%"],segment2:["-2%","0%"],"delete":!0,delay:50*d};this.spells.beam(0,0,a.targets[b][0],a.targets[b][1],MageS.Game.color.lightBlue,c,e)}setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1200)},this.finishPush2=function(a){for(var b="icon-bullet-sinus-2",c=0;20>c;c++){var d={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.4,beamWidth:20,segment1:["0%","0%"],segment2:["100%","150%"],"delete":!0,delay:5*c};this.spells.beamStrike(2.5,18*c,b,MageS.Game.color.lightBlue,d)}setTimeout(function(){MageS.Game.spells.endSpellAnimation()},600)},this.finishTeslaTrap=function(a){var b={color:"#000","delete":!0,duration:200,deleteDelay:300,deleteDuration:200};this.spells.addScreen(b);var c="icon-bullet-lightning",d={moveLeft:(.5+parseInt(a.pattern[0][0]))*MageS.Game.cellSize+"rem",moveTop:(.5+parseInt(a.pattern[0][1]))*MageS.Game.cellSize+"rem",time:.1,beamWidth:10,segment1:["100%","100%"],segment2:["0%","100%"],"delete":!0,delay:100,yesIWantToHaveBlinkBug:!0};setTimeout(function(){MageS.Game.spells.beamStrike(5,-90,c,"#FFF",d)},300),setTimeout(function(){MageS.Game.animations.singleAnimationFinished(MageS.Game.spells.isSecondPartWaiting)},300),setTimeout(function(){MageS.Game.spells.clearAnimationField()},800)},this.finishChainLighting=function(a){if(0==a.targets.length)return void MageS.Game.spells.endSpellAnimation();var b={color:"#000","delete":!0,duration:400,deleteDelay:300,deleteDuration:200};this.spells.addScreen(b);var c=["icon-bullet-lightning","icon-bullet-lightning-2"],d="",e=0,f=0;setTimeout(function(){for(var b=0;b<a.targets.length;b++){var g={time:.1,beamWidth:10,segment1:["100%","100%"],segment2:["0%","100%"],"delete":!0,delay:100+100*b,yesIWantToHaveBlinkBug:!0};d=array_rand(c),MageS.Game.spells.beam(e,f,a.targets[b][0],a.targets[b][1],"#FFF",d,g),e=a.targets[b][0],f=a.targets[b][1]}},300),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},800)}},MageS.Spells.Earth=function(a,b){this.game=a,this.spells=b,this.startStandartEarth=function(){for(var a=0,b=0,c="icon-bullet-small-spiral",d=0;4>d;d++){switch(d){case 0:a=0,b=-1;break;case 1:a=1,b=0;break;case 2:a=0,b=1;break;case 3:a=-1,b=0}for(var e={moveLeft:(.5+a)*MageS.Game.cellSize+"rem",moveTop:(.5+b)*MageS.Game.cellSize+"rem",time:.3,beamWidth:12,segment1:["100%","100%"],segment2:["-20%","0%"],"delete":!0},f=0;3>f;f++)this.spells.beamStrike(2.5,120*f,c,MageS.Game.color.brown,e)}for(var g=[],f=0;4>f;f++){var h={scale:.5,time:600,rotateDistance:90,delay:200,angleStart:90*f-7,preAnimationDelay:200},i=this.spells.spinIcon("icon-stone-sphere","color-brown",.5,h);g.push(i)}this.spells.savedData[0]=g;for(var j=[],k=[],l="icon-bullet-cercle-sinus-2",m="icon-bullet-cercle-sinus",n={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.6,beamWidth:10,segment1:["40%","40%"],segment2:["24%","16%"],delay:400},f=0;4>f;f++)j.push(this.spells.beamStrike(2.7,90*f,l,MageS.Game.color.orange,n)),k.push(this.spells.beamStrike(2.9,90*f,m,MageS.Game.color.orange,n));this.spells.savedData[1]=j,this.spells.savedData[2]=k,setTimeout(function(){MageS.Game.spells.earth.iterateStandartEarth()},1e3)},this.iterateStandartEarth=function(){for(var a in this.spells.savedData[0]){var b=this.spells.savedData[0][a],c=90*a-7;b.animateRotate(c,c+90,600,"linear")}for(var d in this.spells.savedData[1]){var e=this.spells.savedData[1][d],f=e.find("path")[0],g=new Segment(f);g.draw("49%","41%",0),g.draw("24%","16%",.6)}for(var h in this.spells.savedData[2]){var e=this.spells.savedData[2][h],f=e.find("path")[0],g=new Segment(f);g.draw("49%","41%",0),g.draw("24%","16%",.6)}setTimeout(function(){$(".battle-border .mage-container .mage .svg").css({overflow:"visible"}),MageS.Game.spells.tryToEndFirstPart()},600)},this.finishStandartEarth=function(a){for(var b in this.spells.savedData[0]){var c=this.spells.savedData[0][b],d=90*b-7;c.animateRotate(d,d+90,a,"linear");var e=c.find("svg");e.animate({"margin-left":0,opacity:0},{duration:a,complete:function(){$(this).remove()}})}for(var f in this.spells.savedData[1]){var g=this.spells.savedData[1][f];g.animate({opacity:0},{duration:100,complete:function(){$(this).remove()}})}for(var h in this.spells.savedData[2]){var g=this.spells.savedData[2][h];g.animate({opacity:0},{duration:100,complete:function(){$(this).remove()}})}},this.finishStoneFace=function(a){this.finishStandartEarth(200);for(var b="icon-bullet-simple-middle-line",c=0;5>c;c++){var d={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.4,beamWidth:15,segment1:["100%","100%"],segment2:["-40%","0%"],"delete":!0,delay:100+5*c};this.spells.beamStrike(4,72*c,b,MageS.Game.color.brown,d)}var e=this.spells.createIcon("icon-iron-mask","color-brown");$(".animation-field").append(e),MageS.Game.monimations.blastInScale(e,3,function(){},700),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1e3)},this.finishGroundShake=function(a){this.finishStandartEarth(200),this.spells.cellShake(a.pattern,{duration:350,amplitude:10,delay:200}),this.spells.cellShake(a.pattern,{duration:350,amplitude:8,delay:500}),this.spells.cellShake(a.pattern,{duration:350,amplitude:5,delay:800}),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1e3)},this.finishQuicksand=function(a){if(this.finishStandartEarth(200),0==a.targets.length)return MageS.Game.spells.endSpellAnimation(),void info("no targets for quicksand");var b=this.spells.getRightHandCoordinates(.7),c=this.spells.getLeftHandCoordinates(.7);for(var d in a.targets){var e={time:1,segment1:["0%","0%"],segment2:["100%","400%"],"delete":!0};this.spells.beam(b[0],b[1],a.targets[d][0],a.targets[d][1],MageS.Game.color.sand,"icon-bullet-spiral-cast-line-2",e);var e={time:1,segment1:["0%","0%"],segment2:["100%","400%"],"delete":!0};this.spells.beam(c[0],c[1],a.targets[d][0],a.targets[d][1],MageS.Game.color.sand,"icon-bullet-spiral-cast-line",e)}setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1e3)},this.finishStoneSpear=function(a){this.finishStandartEarth(200);var b=[a.targetX,a.targetY],c=this.spells.createIcon("icon-stone-spear","color-brown");$(".animation-field").append(c);var d=this.spells.getDistanceBetweenTwoDots(0,0,b[0],b[1]);c.find("svg")[0].style.transform="rotate("+(d[1]-45)+"deg)";var e=this.spells.transformDegAndDistanceToMargin(d[1],d[0]);c.animate({"margin-left":e[0]*MageS.Game.cellSize*MageS.Game.rem,"margin-top":e[1]*MageS.Game.cellSize*MageS.Game.rem},{duration:400,easing:"easeInQuart",complete:function(){$(this).remove()}});for(var f={time:400,randomRange:MageS.Game.cellSize*MageS.Game.rem,scale:.25,rotate:!0,delay:400},g=0;20>g;g++){var h=Math.random()*b[0]+1.5*b[0],i=Math.random()*b[1]+1.5*b[1];this.spells.moveIcon("icon-stone-sphere","color-brown",b[0],b[1],h,i,f)}var j="Y";Math.abs(b[0])>Math.abs(b[1])&&(j="X"),MageS.Game.monimations.camShake(j,100,4,{delay:380}),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},600)},this.finishTunnelTravel=function(a){this.finishStandartEarth(200);for(var b=0;20>b;b++){var c={time:400,randomRange:MageS.Game.cellSize*MageS.Game.rem*2,scale:.15,delay:400*Math.random()+200};this.spells.moveIcon("icon-stone-sphere","color-brown",0,0,0,0,c)}var d="Y";MageS.Game.monimations.camShake(d,800,6,{delay:200}),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},800)},this.finishEarthProtection=function(a){this.finishStandartEarth(200);for(var b="icon-bullet-cercle-cast",c={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:1,beamWidth:10,segment1:["100%","100%"],segment2:["-50%","0%"],"delete":!0},d=0;8>d;d++)this.spells.beamStrike(2+2*Math.random(),45*d,b,MageS.Game.color.brown,c);setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1e3)},this.finishStalactitesFall=function(a){if(this.finishStandartEarth(200),0==a.targets.length)return MageS.Game.spells.endSpellAnimation(),void info("no targets for StalactitesFall");for(var b in a.targets){var c=a.targets[b],d=c[0],e=c[1],f={delay:600*b,time:300,scale:3},g=d,h=e-16;this.spells.moveIcon("icon-stalactite","color-brown",g,h,d,e-1,f),MageS.Game.monimations.camShake("Y",200,8,{delay:300+600*b});for(var i=[],j=0;10>j;j++){var k={time:.3,beamWidth:17,"delete":!0,delay:600*b};i[0]=2*Math.random()-1,i[1]=2*Math.random()-1,MageS.Game.spells.beam(g+i[0],h+i[1],d+i[0],e+i[1],MageS.Game.color.brown,"icon-bullet-line",k)}for(var l={moveLeft:(.5+d)*MageS.Game.cellSize+"rem",moveTop:(.5+e)*MageS.Game.cellSize+"rem",time:.3,beamWidth:10,segment1:["0%","0%"],segment2:["100%","200%"],delay:300+600*b,"delete":!0},m=0;10>m;m++)this.spells.beamStrike(2,36*m,"icon-bullet-start-spin",MageS.Game.color.brown,l)}setTimeout(function(){MageS.Game.spells.endSpellAnimation()},600*a.targets.length)},this.finishEarthquake=function(a){this.finishStandartEarth(100),MageS.Game.monimations.camShake("Y",300,4,{delay:50}),MageS.Game.monimations.camShake("X",300,8,{delay:400}),MageS.Game.monimations.camShake("Y",300,12,{delay:750}),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1e3)},this.finishAstonishing=function(a){this.finishStandartEarth(200);for(var b=this.spells.getRightHandCoordinates(.7),c=this.spells.getLeftHandCoordinates(.7),d=[MageS.Game.color.brown,MageS.Game.color.grey],e=.4,f=0;2>f;f++){var g={time:e,time2:e,delay2:200,segment1:["0%","0%"],segment2:["0%","100%"],segment3:["100%","200%"],"delete":!0};this.spells.beam(b[0],b[1],a.targetX,a.targetY,d[f],"icon-bullet-cast-angle-"+(2+2*f),g);var h={time:e,time2:e,delay2:200,segment1:["0%","0%"],segment2:["0%","100%"],segment3:["100%","200%"],"delete":!0};this.spells.beam(c[0],c[1],a.targetX,a.targetY,d[f],"icon-bullet-cast-angle-"+(1+2*f),h)}setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1e3)},this.finishWallUp=function(a){this.finishStandartEarth(200),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},200)},this.finishMilestoneHit=function(a){this.finishStandartEarth(200);for(var b=parseInt(a.targetX),c=parseInt(a.targetY),d=b,e=c-2,f={moveLeft:(.5+d)*MageS.Game.cellSize+"rem",moveTop:(.5+e)*MageS.Game.cellSize+"rem",time:.4,beamWidth:12,segment1:["100%","100%"],segment2:["-100%","0%"],delay:0,"delete":!0},g=0;10>g;g++)this.spells.beamStrike(3,36*g,"icon-bullet-cast-angle-1",MageS.Game.color.brown,f);var h=this.spells.createIcon("icon-stone-tablet","color-brown");h.css({"margin-top":e*MageS.Game.cellSize+"rem","margin-left":d*MageS.Game.cellSize+"rem"}),$(".animation-field").append(h),MageS.Game.monimations.blastInScale(h,2,function(){},500),setTimeout(function(){h.animate({"margin-top":c*MageS.Game.cellSize+"rem"},{duration:400,easing:"easeOutBounce"})},500),MageS.Game.monimations.camShake("Y",150,6,{delay:700}),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1100)},this.finishRollingStones=function(a){var b=500;for(var c in this.spells.savedData[0]){var d=this.spells.savedData[0][c],e=90*c-7;d.animateRotate(e,e+7,100,"linear");var f=d.find("svg");f[0].style.transform="scale(1)",f.animate({"margin-left":5*MageS.Game.cellSize*MageS.Game.rem},{duration:b,complete:function(){$(this).remove()}})}for(var g in this.spells.savedData[1]){var h=this.spells.savedData[1][g];h.animate({opacity:0},{duration:100,complete:function(){$(this).remove()}})}for(var i in this.spells.savedData[2]){var h=this.spells.savedData[2][i];h.animate({opacity:0},{duration:100,complete:function(){$(this).remove()}})}for(var j=0,k=0,l=0,m=0,n="icon-bullet-sinus",o=0;4>o;o++){switch(o){case 0:l=0,m=-5;break;case 1:l=5,m=0;break;case 2:l=0,m=5;break;case 3:l=-5,m=0}for(var p={time:.5,beamWidth:10,segment1:["8%","8%"],segment2:["100%","200%"],"delete":!0},c=0;3>c;c++){var q=Math.random()-.5,r=Math.random()-.5;this.spells.beam(j,k,l+q,m+r,MageS.Game.color.orange,n,p)}}MageS.Game.monimations.camShake("Y",350,6,{delay:100}),setTimeout(function(){MageS.Game.spells.endSpellAnimation()},1100)}},MageS.Spells.Arcane=function(a,b){this.game=a,this.spells=b,this.startStandartArcane=function(){for(var a={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:1,beamWidth:7,segment1:["100%","100%"],segment2:["6%","16%"],"delete":!0},b=0;7>b;b++)this.spells.beamStrike(5,360/7*b,"icon-bullet-start-spin",MageS.Game.color.lightBlue,a);setTimeout(function(){MageS.Game.spells.air.iterateStandartAir()},1e3)},this.iterateStandartArcane=function(){for(var a="icon-bullet-cercle",b={moveLeft:.5*MageS.Game.cellSize+"rem",moveTop:.5*MageS.Game.cellSize+"rem",time:.5,beamWidth:10,segment1:["100%","100%"],segment2:["0%","5%"],"delete":!0},c=0;7>c;c++)this.spells.beamStrike(2.2,360/7*c,a,MageS.Game.color.lightBlue,b);setTimeout(function(){MageS.Game.spells.tryToEndFirstPart()},500)}},MageS.Worlds=function(a){this.game=a,this.worlds={Tutorial:{f1:{image:"tile-wood-plank"},f2:{image:"tile-wood-plank",d:1},f3:{image:"tile-wood-plank",d:2},f4:{image:"tile-wood-plank",d:3},s:{image:"tile-wood-plank",icon:"icon-rock"},s1:{icon:"tile-column-grey",image:"tile-wood-plank"},w1:{icon:"icon-brick-wall","icon-color":"color-grey"},w2:{icon:"icon-brick-wall","icon-color":"color-grey-darker"},w3:{icon:"icon-brick-wall","icon-color":"color-grey-lighter"},w4:{icon:"icon-brick-wall-damaged","icon-color":"color-grey"},w5:{icon:"icon-brick-wall-damaged","icon-color":"color-grey-darker"},w6:{icon:"icon-brick-wall-damaged","icon-color":"color-grey-lighter"}},WitchForest:{s:{icon:"icon-rock","icon-color":"color-grey"},s1:{image:"cave-rock-1"},s2:{image:"cave-rock-2"},s3:{image:"cave-rock-3"},s4:{image:"cave-rock-4"},f1:{image:"grass1"},f2:{image:"grass2"},f5:{image:"grass4"},f6:{image:"grass-flowers-1"},f7:{image:"grass-flowers-2"},f8:{image:"grass-flowers-3"},f9:{image:"grass-decor-1"},f0:{image:"grass-decor-2"},F1:{image:"grass-decor-3"},F2:{image:"grass-stump"},F3:{image:"grass3"},f3:{image:"grass-stump-burned"},t1:{image:"forest-tree"},t2:{image:"forest-tree2"},t3:{image:"forest-tree3"},t4:{image:"forest-tree4"},t5:{image:"forest-tree5"},t6:{image:"forest-tree6"},c1:{image:"cave-floor-1"},c2:{image:"cave-floor-2"},c3:{image:"cave-floor-3"},r2:{image:"cave-road"},w1:{icon:"icon-brick-wall","icon-color":"color-brown"},w2:{icon:"icon-obelisk","icon-color":"color-clay"},r3:{icon:"icon-footprints-2","icon-color":"color-grey-darkest"},r4:{icon:"icon-footprints-3","icon-color":"color-grey-darkest"},c:{image:"cave-wall-1"},cc:{image:"cave-wall-2"},cC:{image:"cave-wall-3"}}},this.cell=function(a,b,c){if(void 0===this.worlds[a])return!1;if(void 0===this.worlds[a][b])return!1;var d=this.worlds[a][b];void 0!==d.image&&this.addImage(d,c),void 0!==d.icon&&this.addIcon(d,c),void 0!==d.icon2&&this.addIcon(d.icon2,c)},this.cellsChange=function(a,b){var c=$(".battle-border .cell.x-"+a.targetX+".y-"+a.targetY),d=c.find(".svg");d.length>0&&d.remove();var e=c.data("class"),f=c.data("image");f&&c.removeClass(f),c.removeClass(e).addClass(a.cell).data("class",a.cell),this.game.worlds.cell(this.game.worldType,a.cell,c),MageS.Game.animations.singleAnimationFinished(b)},this.addIcon=function(a,b){var c=this.game.getIcon(a.icon),d=$("<div></div>").addClass("svg svg-cell").append($('<svg class="svg-icon" viewBox="0 0 512 512"></svg>'));if(void 0!==a.d){var e=[0,90,180,270],f=e[a.d];d.find("svg")[0].style.transform="rotate("+f+"deg)"}d.find("svg").append(c.clone()),b.append(d),void 0!==a["icon-color"]&&d.addClass(a["icon-color"])},this.addImage=function(a,b){if(b.addClass("tile-image "+a.image).data("image",a.image),void 0!==a.d){var c=[0,90,180,270],d=c[a.d];b[0].style.transform="rotate("+d+"deg)"}}},MageS.Objects=function(a){this.game=a,this.drawObject=function(a,b,c,d){d||(d=".battle-field.current");var e=$("#template-object").html();Mustache.parse(e);var f="";void 0!==a.viewData["class"]&&(f=a.viewData["class"]);var g=Mustache.render(e,{id:a.id,type:a.type,addClass:f}),h=$(g),i=$(this.game.svg).find("#"+a.config.icon+" path");return h.find("svg").append(i.clone()),void 0!==a.config.iconColor&&h.find(".svg").addClass(a.config.iconColor),$(d+" .cell.x-"+b+".y-"+c).append(h),void 0!==a.config.centered&&h.addClass("centered"),void 0!==a.config.morfIcon&&a.config.morfIcon&&this.morfObjectIcon(h,a.config.morfIcon,a.config.icon),this.appendAnimations(a.config.icon,h),h},this.morfObjectIcon=function(a,b,c){switch(c){case"icon-water-huracane":switch(b){case"lightBlue":a.find("svg .blue-wave").css("fill",MageS.Game.color.lightBlue)}}},this.appendAnimations=function(a,b){switch(a){case"icon-water-huracane":var c=b.find(".rotateble");new mojs.Tween({repeat:999,delay:10,duration:1500,onUpdate:function(a){var b=360*a;c[0].style.transform="rotate("+b+"deg)",c[1].style.transform="rotate("+-b+"deg)",c[2].style.transform="rotate("+b+"deg)"}}).run()}},this.spinObject=function(a,b){var c=$(".battle-border .object.id-"+a);if(0!=c.length){var d=1e3;c.find(b).each(function(){MageS.Game.monimations.rotate($(this),0,360,d,!1,!1,function(){})}),setTimeout(function(){MageS.Game.objects.spinObject(a,b)},d)}},this.activate=function(a,b){switch(a.action){case"doorOpen":var c=$(".object.id-"+a.object);c.addClass("openDoor"),setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},500);break;case"doorClose":var c=$(".object.id-"+a.object);c.removeClass("openDoor"),setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},500);break;case"bombTrigger":var d={marginLeft:a.targetX,marginTop:a.targetY};MageS.Game.spells.fire.blastSunRing("color-red-bright",d),setTimeout(function(){MageS.Game.spells.fire.blastSunRing("color-yellow",d)},100),setTimeout(function(){MageS.Game.spells.fire.blastSunRing("color-white",d)},200),setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},500);break;case"wallExplode":for(var e="icon-wall-particle-",d={time:400,startRandomRange:MageS.Game.cellSize*MageS.Game.rem,randomRange:4*MageS.Game.cellSize*MageS.Game.rem,scale:.25,rotate:!0},f=0;15>f;f++)MageS.Game.spells.moveIcon(e+(f%4+1),"color-grey",a.targetX,a.targetY,a.targetX,a.targetY,d);MageS.Game.monimations.camShake("X",300,6,{}),setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},400);break;case"fountainHeal":for(var d={beamWidth:20,"delete":!0},g=["#529BCA","#37A4F9","#ffffff"],h="",i=["icon-bullet-line-small-curve-right","icon-bullet-line-small-curve-left","icon-bullet-line","icon-bullet-sinus"],j="",f=0;10>f;f++)h=array_rand(g),j=array_rand(i),MageS.Game.spells.beam(a.targetX+.5*Math.random()-.25,a.targetY+.5*Math.random()-.25,0,0,h,j,d);setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},500);break;case"lightingZap":var k=["icon-bullet-lightning","icon-bullet-lightning-2"],d={time:.1,beamWidth:10,segment1:["100%","100%"],segment2:["0%","100%"],"delete":!0,delay:100,yesIWantToHaveBlinkBug:!0},e="";setTimeout(function(){for(var b=0;b<a.targets.length;b++)e=array_rand(k),MageS.Game.spells.beam(a.centerX,a.centerY,a.targets[b][0],a.targets[b][1],"#FFF",e,d)},300),setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},500)}},this.move=function(a,b){var c=$(".battle-field.current .object.id-"+a.id);if(c.length<1){info("object with ID = "+a.id+" was not on the map"),c=this.game.objects.drawObject(a.data,a.oldX,a.oldY);var d=a.oldX,e=a.oldY}else var f=c.parent(".cell"),d=f.data("x"),e=f.data("y");var g=$(".battle-field.current .cell.x-"+a.x+".y-"+a.y);$(".unit-field").append(c),c.css({"margin-left":d*this.game.cellSize+"rem","margin-top":e*this.game.cellSize+"rem"}),c.animate({"margin-left":a.x*this.game.cellSize+"rem","margin-top":a.y*this.game.cellSize+"rem"},{queue:!1,duration:MageS.Game.animationTime,complete:function(){return g.length<1?(MageS.Game.animations.singleAnimationFinished(b),void $(this).remove()):($(this).css({"margin-left":"0","margin-top":"0"}),g.append($(this)),void MageS.Game.animations.singleAnimationFinished(b))},easing:"linear"}),MageS.Game.objects.animateMove(c)},this.animateMove=function(a){}},MageS.Units=function(a){this.game=a,this.drawUnit=function(a,b,c,d){var e=$("#template-unit").html();Mustache.parse(e);var f=Mustache.render(e,{id:a.id,type:a.type}),g=$(f),h=this.game.getIcon(a.icon);return g.data("icon",a.icon),g.find("svg").append(h.clone()),void 0!==a.iconColor&&g.find(".svg").addClass(a.iconColor),d?(g.data("x",b),g.data("y",c),this.unitToCell(g,d)):this.unitToUnitField(g,b,c),void 0!==a.d&&(a.d>0&&(g.find(".rotate-div")[0].style.transform="rotate("+90*a.d+"deg)"),g.data("d",a.d)),this.addDescription(a,g),void 0!==a.data.f&&this.addUnitStatusIcons(g,a.data.f),void 0!==a.morfIcon&&a.morfIcon&&this.morfUnitIcon(g,a.morfIcon,a.icon),g},this.unitToUnitField=function(a,b,c){a.data("x",b),a.data("y",c),$(".battle-border .unit-field").append(a),a.css({"margin-left":b*MageS.Game.cellSize+"rem","margin-top":c*MageS.Game.cellSize+"rem"})},this.unitToCell=function(a,b){b||(b=".battle-field.current");var c=a.data("x"),d=a.data("y");a.css({"margin-left":"0","margin-top":"0"}),$(b+" .cell.x-"+c+".y-"+d).append(a)},this.allToCell=function(a){$(".battle-border .unit-field .unit").each(function(){a&&$(this).addClass(a),MageS.Game.units.unitToCell($(this))})},this.allBackToField=function(){$(".battle-field.current .unit").each(function(){var a=$(this);a.hasClass("toDelete")?a.remove():MageS.Game.units.unitToUnitField(a,a.data("x"),a.data("y"))})},this.morfUnitIcon=function(a,b,c){switch(c){case"icon-spider-2":switch(b){case"baby":a.find("svg .body").css("fill","#aaa"),a.find("svg .head").css("fill","#bab")}}},this.addDescription=function(a,b){var c=$("#template-unit-tooltip").html();Mustache.parse(c);var d=Mustache.render(c,{id:a.id,name:a.name,description:a.description,health:a.data.health,maxHealth:a.maxHealth}),e=$(d);$(".tooltip-unit-area").append(e),"pc"==this.game.device?b.on({mouseenter:function(){var a=$(this).data("id");$(".tooltip-unit-area .unit-tooltip.id-"+a).addClass("hover")},mouseleave:function(){var a=$(this).data("id");$(".tooltip-unit-area .unit-tooltip.id-"+a).removeClass("hover")}}):b.on({click:function(){MageS.Game.units.mobileUnitClick($(this))}})},this.moveUnit=function(a,b){var c=$(".battle-border .unit-field .unit.id-"+a.id);if(c.length<1){info("unit with ID = "+a.id+" was not on the map");var c=this.drawUnit(a.data,a.oldX,a.oldY)}c.animate({"margin-left":parseInt(a.x)*this.game.cellSize+"rem","margin-top":parseInt(a.y)*this.game.cellSize+"rem"},{duration:MageS.Game.animations.animationTime,complete:function(){$(this).data("x",a.x).data("y",a.y),(Math.abs(a.x)>MageS.Game.fieldRadius||Math.abs(a.y)>MageS.Game.fieldRadius)&&$(this).remove(),MageS.Game.animations.singleAnimationFinished(b)}}),MageS.Game.units.animateMove(c)},this.mobileUnitClick=function(a){MageS.Game.inventory.showInventory();var b=a.data("id"),c=$(".tooltip-unit-area .unit-tooltip.id-"+b);c.hasClass("hover")?MageS.Game.spellcraft.hideShadow():MageS.Game.spellcraft.showShadow(function(){MageS.Game.units.mobileUnitClick(a)}),c.toggleClass("hover")},this.animateMove=function(a){var b=a.data("icon");switch(b){case"icon-spider-2":this.spiderAnimateMove(a)}},this.meleeAttack=function(a,b,c,d){var e=$(".battle-border .unit.id-"+a.attackerId),f=e.data("icon");switch(f){case"icon-spider-2":this.spiderAnimateMelee(e,a,b);break;case"icon-mouse-1":this.mouseAnimateMelee(e,a,b)}setTimeout(function(){MageS.Game.attacks.finishAttack(c,d)},1e3)},this.rotateUnitToTarget=function(a,b){var c=this.game.spells.getDistanceBetweenTwoDots(b.fromX,b.fromY,b.targetX,b.targetY),d=c[1]+90,e=90*a.data("d");d-e>180?d-=360:e-d>180&&(d+=360),a.find(".rotate-div").animateRotate(e,d,150),a.data("attackAngle",d)},this.rotateUnitBack=function(a){var b=a.data("d"),c=a.data("attackAngle");a.find(".rotate-div").animateRotate(c,90*b,150),a.data("attackAngle","")},this.moveBodyPartForAttack=function(a,b,c,d){var e=150,f=650,g=500,h=200;setTimeout(function(){a.animate({whyNotToUseANonExistingProperty:100},{step:function(a,d){var e=a/100;$(this)[0].style.transform="translateY("+e*b+"px) scale("+(1+e*c)+")"},duration:g,easing:"easeOutBounce",queue:!1})},e),setTimeout(function(){a.animate({whyNotToUseANonExistingProperty:100},{step:function(a,d){var e=a/100;$(this)[0].style.transform="translateY("+(b-e*b)+"px) scale("+(1+c-e*c)+")"},duration:h,easing:"linear",queue:!1})},f)},this.spiderAnimateMove=function(a){var b=a.find(".group-leg-1");b.each(function(){MageS.Game.monimations.swing($(this),20,350)})},this.spiderAnimateMelee=function(a,b,c){this.rotateUnitToTarget(a,b);var d=a.find(".head,.eyes"),e=a.find(".body"),f=a.find(".leg"),g=this.game.spells.createIcon("icon-claw-slashes","color-white");c.append(g),g[0].style.transform="rotate("+(a.data("attackAngle")-90)+"deg)",g.css({opacity:0}),this.moveBodyPartForAttack(d,-100,.25,{}),this.moveBodyPartForAttack(e,-50,.25,{}),this.moveBodyPartForAttack(f,-30,0,{}),setTimeout(function(){g.animate({opacity:1},{duration:200,easing:"easeInExpo",complete:function(){var a=$(this);setTimeout(function(){a.remove()},100)}})},450),setTimeout(function(){MageS.Game.units.rotateUnitBack(a)},850)},this.mouseAnimateMelee=function(a,b,c){this.rotateUnitToTarget(a,b);var d=a.find(".head,.eyes"),e=a.find(".body"),f=a.find(".ears"),g=this.game.spells.createIcon("icon-claw-slashes","color-white");c.append(g),g[0].style.transform="rotate("+(a.data("attackAngle")-90)+"deg)",g.css({opacity:0}),this.moveBodyPartForAttack(d,-100,.25,{}),this.moveBodyPartForAttack(f,-90,.25,{}),this.moveBodyPartForAttack(e,-50,.25,{}),setTimeout(function(){g.animate({opacity:1},{duration:200,easing:"easeInExpo",complete:function(){var a=$(this);setTimeout(function(){a.remove()},100)}})},450),setTimeout(function(){MageS.Game.units.rotateUnitBack(a)},850)},this.unitSpawn=function(a,b){for(var c="icon-bullet-around-side-line",d={moveLeft:(.5+parseInt(a.targetX))*MageS.Game.cellSize+"rem",moveTop:(.5+parseInt(a.targetY))*MageS.Game.cellSize+"rem",time:.8,beamWidth:12,segment1:["100%","100%"],segment2:["-40%","0%"],"delete":!0},e=0;5>e;e++)MageS.Game.spells.beamStrike(3,72*e,c,MageS.Game.color.purpleDark,d);setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},800)},this.animateDeath=function(a,b){var c=a.data("icon");switch(c){case"icon-fireImp-1":this.standartDeath(a);var d={marginLeft:a.data("x"),marginTop:a.data("y")};MageS.Game.spells.fire.blastSunRing("color-red-bright",d),setTimeout(function(){MageS.Game.spells.fire.blastSunRing("color-yellow",d)},100),setTimeout(function(){MageS.Game.spells.fire.blastSunRing("color-white",d)},200);break;default:this.standartDeath(a)}setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},500)},this.standartDeath=function(a){$(".tooltip-unit-area .id-"+a.data("id")).remove(),a.animate({opacity:0},{duration:1e3,complete:function(){$(this).remove()}})},this.addUnitStatusIcons=function(a,b){this.addFlag(a,b)},this.addFlag=function(a,b){var c="",d="",e="";for(var f in b){switch(f){case"frozen":c="icon-cracked-glass",d="#37A4F9";break;case"burn":c="icon-flame-tunnel",d="#FF8360",e="under";break;case"web":c="icon-spider-web",d="#FFF";break;case"quicksand":c="icon-sand",d=MageS.Game.color.sand;break;case"stoned":c="icon-stoned",d=MageS.Game.color.grey;break;default:info('Flag "'+f+'" is not implemented');continue}var g=$('<div class="fuckthisshit svg flag-'+f+" "+e+' unit-status"><svg viewBox="0 0 512 512"></svg></div>'),h=$(this.game.svg).find("#"+c+" path").css({fill:d});g.find("svg").append(h.clone()),a.prepend(g)}}},MageS.Mage=function(a){this.game=a,this.bind=[],this.cantMoveTill=!1,this.moveStarted=!1,this.moveLoaded=!1,this.moveFinished=!1,this.moveStage=!1,this.beforeMoveD=!1,this.drawMage=function(a){var b=$("#template-mage").html();Mustache.parse(b);var c=Mustache.render(b,{d:a.d}),d=$(c),e=this.game.getIcon("icon-mage-1");d.find("svg").append(e.clone()),d.animateRotate(0,90*a.d,10),$(".mage-container").prepend(d),a.flags&&this.addMageStatus(a.flags),void 0!==a.firstTutorial&&this.tutorialFirstMessage()},this.moveMage=function(a,b){var c=$('<div class="battle-field new"></div>');for(var d in a.map)for(var e in a.map[d])this.game.drawCell(a.map[d][e],e,d,c);$(".battle-border").append(c);for(var d in a.objects)for(var e in a.objects[d])this.game.objects.drawObject(a.objects[d][e],e,d,".battle-field.new");$(".tooltip-unit-area .unit-tooltip").remove();for(var d in a.units)for(var e in a.units[d])this.game.units.drawUnit(a.units[d][e],e,d,".battle-field.new");if(void 0!==a.force||void 0!==a.bigMove){var f=a.mage.x,g=a.mage.y,h=a.mage.was.x,i=a.mage.was.y,j=this.game.fieldRadius*this.game.cellSize,k=this.game.animationTime,l=Math.abs(f-h),m=Math.abs(g-i),n=l+m;n>1&&(k=2*k),c.css({"margin-left":j+(f-h)*this.game.cellSize+"rem","margin-top":j+(g-i)*this.game.cellSize+"rem"}),c.animate({"margin-left":j+"rem","margin-top":j+"rem"},{duration:k}),MageS.Game.mage.moveFinished=!1,this.startMove(h-f,i-g)}this.moveStage=b,MageS.Game.mage.moveLoaded=!0,MageS.Game.mage.moveFinished&&MageS.Game.mage.finishMove()},this.startMove=function(a,b){this.moveStarted=!0;var c=this.game.fieldRadius*this.game.cellSize,d=this.game.animationTime,e=Math.abs(a),f=Math.abs(b),g=e+f;g>1&&(d=2*d),this.rotateTorso(d,2),this.game.spells.spellAnimationRunning||this.mageMoveHands(d),MageS.Game.units.allToCell("toDelete"),$(".battle-field.current").animate({"margin-left":c+a*this.game.cellSize+"rem","margin-top":c+b*this.game.cellSize+"rem"},{duration:d,complete:function(){MageS.Game.mage.moveFinished=!0,MageS.Game.mage.moveLoaded&&MageS.Game.mage.finishMove()}})},this.finishMove=function(){$(".battle-field.current").remove(),$(".battle-field.new").removeClass("new").addClass("current"),MageS.Game.units.allBackToField(),MageS.Game.animations.singleAnimationFinished(this.moveStage),this.moveLoaded=!1,this.moveFinished=!1,this.moveStage=!1,this.moveStarted=!1,this.beforeMoveD=!1},this.cancelMove=function(){if(this.beforeMoveD!==!1){var a=$(".battle-border .mage");this.game.animations.rotate(a,{d:this.beforeMoveD,wasD:a.data("d")},!1)}var b=this.game.fieldRadius*this.game.cellSize;$(".battle-field.current").animate({"margin-left":b+"rem","margin-top":b+"rem"},200),MageS.Game.chat.dialogMessage({targetX:0,targetY:0,message:"Wtf I just did? I can`t move there!",time:500})},this.addMageStatus=function(a){this.game.units.addFlag($(".mage-container .mage"),a);for(var b in a)switch(b){case"web":this.cantMoveTill=a[b]}},this.onLoad=function(){void 0!==this.bind.onload&&this.bind.onload()},this.tutorialFirstMessage=function(){this.bind.onload=function(){var a="You can swipe me to move!";"pc"==MageS.Game.device&&(a="Move me with W A S D ");var b={time:2e3,direction:2,message:a,targetX:0,targetY:0,noPost:!0,delay:1500};MageS.Game.chat.dialogMessage(b,!1)}},this.mageMoveHands=function(a){for(var b=$(".battle-border .mage svg"),c=b.find(".mage-hand-left"),d=b.find(".mage-hand-left-fist"),e=b.find(".mage-hand-right"),f=b.find(".mage-hand-right-fist"),g=[c,d],h=[e,f],i=Math.floor(a/100),j=0;i>j;j++)this.handSwitch(100*j,j%2==1?g:h);setTimeout(function(){
$(".battle-border .mage path.hand").show()},a)},this.handSwitch=function(a,b){setTimeout(function(){$(".battle-border .mage path.hand").show();for(var a in b)b[a].hide()},a)},this.rotateTorso=function(a,b){for(var c=Math.floor(a/100),d=0;c>d;d++)this.rotateTorsoSingle(100*d,b,d%2==1?-1:1);setTimeout(function(){$(".battle-border .mage path.mage-torso")[0].style.transform="rotate(0)"},a)},this.rotateTorsoSingle=function(a,b,c){setTimeout(function(){$(".battle-border .mage path.mage-torso")[0].style.transform="rotate("+b*c+"deg)"},a)}},MageS.Admin=function(a){this.game=a,this.isEnabled=!1,this.actions={},this.currentAction={},this.actionNumber=0,this.timeToLoadAjax=1e3,this.timeToLoadAjax2=5e3,this.timeToLoadAjax3=3e4,this.failedActions=0,this.init=function(){this.isEnabled=!0,$(".dead-mage").on("click",function(){$(this).next().slideToggle(),$(this).hasClass("active")?($(this).find("i").animateRotate(180,0,200,"easeInOutQuad"),$(this).removeClass("active")):($(this).find("i").animateRotate(0,180,400,"easeInOutQuad"),$(this).addClass("active"))})},this.start=function(){return this.actions=this.game.rawData.loggedActions,this.actions&&0!=this.actions.length?void this.performAction():void info("there was no actions...")},this.getNextAction=function(){var a=this.actions[0];return this.actions=this.actions.slice(1),this.currentAction=a,a&&this.actionNumber++,a},this.performAction=function(){var a=this.getNextAction();if(!a)return void 0!==this.game.rawData["public"]?void(window.location="/Spellcraft"):(info("Preloaded actions are finished"),void setTimeout(function(){MageS.Game.admin.loadActions()},MageS.Game.admin.timeToLoadAjax));if(a.data.fake=!0,"move"==a.action){var b=JSON.parse(a.data);switch(b.d){case"0":a.action="move-up";break;case"1":a.action="move-right";break;case"2":a.action="move-down";break;case"3":a.action="move-left"}}switch(this.game.action(a.action,a.data),a.action){case"spell":var c=JSON.parse(a.data),d=$(".spell.id-"+c.id).data("spell");MageS.Game.spells.startCast(d)}setTimeout(function(){MageS.Game.admin.finishAction()},150)},this.finishAction=function(){this.game.callback(this.currentAction.result)},this.actionEnded=function(){this.isEnabled&&setTimeout(function(){MageS.Game.admin.performAction()},300)},this.loadActions=function(){var a="/Spellcraft/admin/getActions/"+this.game.rawData.userId+"/"+this.game.rawData.pageTime;Ajax.json(a,{data:"action="+MageS.Game.admin.actionNumber,callBack:function(a){MageS.Game.admin.callback(a)}})},this.callback=function(a){if(a&&void 0!==a.actions&&a.actions.length>0)this.actions=a,this.failedActions=0,this.performAction();else{if(void 0!==this.game.rawData["public"])return void(window.location="/Spellcraft");if(void 0!==a.thisWasLast)return void MageS.Game.chat.dialogMessage({targetX:0,targetY:0,message:"This was last action on this page"});this.failedActions++;var b=MageS.Game.admin.timeToLoadAjax2;this.failedActions>5&&(b=MageS.Game.admin.timeToLoadAjax3),setTimeout(function(){MageS.Game.admin.loadActions()},b)}}},MageS.Chat=function(a){this.game=a,this.baseHeight=0,this.inventorySize=0,this.buildChat=function(){if("mobile"==this.game.device){var a=new Hammer(document.getElementById("last-message"),{});a.get("pan").set({direction:Hammer.DIRECTION_ALL}),a.get("swipe").set({direction:Hammer.DIRECTION_VERTICAL}),a.on("panstart",function(a){MageS.Game.chat.swipeStart(a)}),a.on("panup",function(a){MageS.Game.chat.swipeUp(a)}),a.on("pandown",function(a){MageS.Game.chat.swipeDown(a)}),a.on("panend",function(a){MageS.Game.chat.swipeEnd(a)})}$(window).resize(function(){MageS.Game.chat.windowResize()}),$(window).bind("orientationchange",function(){MageS.Game.chat.windowResize()}),this.windowResize()},this.windowResize=function(){MageS.Game.pageResize();var a=$(".bottom-panel"),b=$(".bottom-panel .last-message"),c=0;if("mobile"==this.game.device){var d=$(".right-panel"),e=d.offset().top;d.hide();var f=($(document).height()-e)/this.game.rem-this.game.cellSize;d.show(),$(".inventory, .spellBook, .right-panel").css({height:f+"rem"}),c=f,this.baseHeight=this.game.cellSize,this.inventorySize=f}else{var g=$(document).height()-a.offset().top-a.height();g>10&&(this.baseHeight=(a.height()+g-2)/this.game.rem),c=5*this.game.cellSize}b.height(this.baseHeight+"rem"),$(".chat-container").height(c+"rem")},this.hideChat=function(){if("mobile"==this.game.device){var a=$(".bottom-panel");a.hasClass("mobile-open")&&($(".bottom-panel .chat-container").hide(),a.animate({"margin-top":"0rem",height:this.baseHeight+"rem"},{easing:"easeOutElastic"}),a.removeClass("mobile-open"),$(".bottom-panel .last-message .cover .svg-icon").css({transform:"rotate(180deg)"}),$(".bottom-panel .last-message .cover .middle").css({opacity:0}))}},this.showChat=function(){var a=$(".bottom-panel");if(!a.hasClass("mobile-open")&&parseInt(a.height())>this.baseHeight+this.game.rem){MageS.Game.hideMenu(),a.addClass("mobile-open");var b=this.inventorySize;a.animate({"margin-top":"-"+b+"rem",height:this.baseHeight+b+"rem"},{easing:"easeOutElastic"}),a.find(".chat-container").css({opacity:1,"overflow-y":"scroll"}),$(".bottom-panel .last-message .cover .svg-icon").css({transform:"rotate(0deg)"}),$(".bottom-panel .last-message .cover .middle").css({opacity:1})}},this.swipeStart=function(a){$(".bottom-panel").hasClass("mobile-open")||$(".bottom-panel .chat-container").show().css({opacity:"0"})},this.swipeEnd=function(a){var b=$(".bottom-panel");b.hasClass("mobile-open")?this.hideChat():this.showChat()},this.swipeUp=function(a){if(!$(".bottom-panel").hasClass("mobile-open")){$(".bottom-panel").css({"margin-top":"-"+a.distance/this.game.rem+"rem",height:this.baseHeight+a.distance/this.game.rem+"rem"}),$(".bottom-panel .chat-container").css({opacity:a.distance/100}),$(".bottom-panel .last-message .cover .middle").css({opacity:a.distance/50});var b=180-2*a.distance;b>=0&&$(".bottom-panel .last-message .cover .svg-icon").css({transform:"rotate("+b+"deg)"})}},this.swipeDown=function(a){if($(".bottom-panel").hasClass("mobile-open")){$(".bottom-panel").css({"margin-top":"-"+(5*this.game.cellSize-a.distance/this.game.rem)+"rem",height:this.baseHeight+5*this.game.cellSize-a.distance/this.game.rem+"rem"}),$(".bottom-panel .chat-container").css({opacity:1-a.distance/100}),$(".bottom-panel .last-message .cover .middle").css({opacity:1-a.distance/50});var b=1.5*a.distance;180>=b&&$(".bottom-panel .last-message .cover .svg-icon").css({transform:"rotate("+b+"deg)"})}},this.postMessages=function(a){for(var b in a){var c=a[b];this.postMessage(c.message,c.type,c.data)}},this.postMessage=function(a,b,c){if(void 0===b&&(b="chat"),"chat"==b){var d=$("#template-chat-message").html();Mustache.parse(d);var e=Mustache.render(d,{content:a,type:b}),f=$(e);f.find(".text").css({color:"#F07818"}).animate({color:"#5E412F"}),$(".bottom-panel .chat-container").append(f.clone()),$(".bottom-panel .last-message .content").html("").append(f);var g=0;$(".chat-container .chat-message").each(function(a,b){g+=parseInt($(this).height())}),g+="",$(".chat-container").animate({scrollTop:g})}else"dialog"==b&&c.x&&c.y},this.dialogMessage=function(a,b){var c=0;void 0!==a.delay&&(c=a.delay),setTimeout(function(){var c=["top","right","bottom","left"],d=$(".battle-border .pattern-cell.x-"+a.targetX+".y-"+a.targetY),e=c[2];e=void 0!==a.direction?c[a.direction]:a.targetX==a.targetY&&0==a.targetY?array_rand([c[0],c[2]]):a.targetY>3?c[0]:a.targetY<-3?c[2]:a.targetX<-3?c[1]:a.targetX>3?c[3]:array_rand([c[0],c[2]]);var f={content:a.message,placement:e,trigger:"manual"};d.popover(f),d.popover("show"),setTimeout(function(){d.popover("hide"),d.popover("destroy"),void 0===a.noPost&&MageS.Game.chat.postMessage(a.message,"chat")},a.time+150),b&&setTimeout(function(){MageS.Game.animations.singleAnimationFinished(b)},a.showTime+150)},c)}},MageS.Home=function(a){this.game=a,this.mageType="",this.createMageSubmitFormAction=function(){var a=$("#create-mage-pop-up .last-step .mage-name").val(),b=MageS.Game.home.mageType;return a&&b?void Ajax.json("/Spellcraft/createMage",{data:"name="+a+"&type="+b+"&device="+MageS.Game.device,callBack:function(a){MageS.Game.callback(a)}}):!1},this.init=function(){$("a#mage-create-button").on("click",function(){MageS.Game.home.showCreateMagePopUp()}),$(".player-mage-list .mage-type-select").on("click",function(){MageS.Game.home.mageType=$(this).data("type");var a=$(this).parent();a.append($(".player-mage-list .last-step").slideDown())}),$("#create-mage-pop-up a.submit").on("click",function(){MageS.Game.home.createMageSubmitFormAction()}),$("#create-mage-pop-up form").on("submit",function(){return MageS.Game.home.createMageSubmitFormAction(),!1}),$(".open-dead-info").on("click",function(){$(this).parents(".dead-mage").next().slideToggle(),$(this).hasClass("active")?($(this).find("i").animateRotate(180,0,200,"easeInOutQuad"),$(this).removeClass("active")):($(this).find("i").animateRotate(0,180,400,"easeInOutQuad"),$(this).addClass("active"))}),$(".single-mage-type.locked").on("click",function(){$(this).find(".requirements").slideToggle()}),$(".progress-bar.colored").each(function(){var a=$(this).data("color");$(this).css({"background-color":MageS.Game.color[a]})})},this.showCreateMagePopUp=function(){$("#create-mage-pop-up").slideDown({easing:"easeOutBounce"})},this.startAnimation=function(){for(var a=$(".animation-layer"),b=a.width()/10*6,c=0,d=0;10>d;d++){var e=$("<div></div>").width("1").height("1").css({position:"absolute"});e.svg({onLoad:function(a){a.circle(0,b,.25*MageS.Game.rem,{fill:"none",stroke:"none"})}}),MageS.Game.monimations.portalStar(e,b,.25*MageS.Game.rem,c,1500*Math.random()),c+=36,a.append(e)}}},MageS.Spellcraft=function(a){this.game=a,this.craftingIsInProgress=!1,this.spellCraftProcess={},this.skweezing={},this.craftAnimationsInProcess=0,this.animationDestination={},this.isSpellBlenderAllowed=!0,this.isBlenderActive=!1,this.blenderSchool=0,this.init=function(){$(".craft-demo-zone .blend-spells-show-button").on("click",function(){MageS.Game.spellcraft.showBlender()})},this.spellCrafted=function(a){this.spellCraftProcess=[]},this.startSpellCraftAnimations=function(){$(".craft-spell-overlay").hide(),$(".craft-spell-overlay-blender").hide(),$(".confirm-create-spell").removeClass("active"),$(".helper-spell-craft-step-1, .helper-spell-craft-step-2, .spell-craft-info").remove(),this.isBlenderActive&&this.hideBlender(),this.spellCraftProcess={},$(".craft-demo-zone").removeClass("active"),this.game.spellbook.showSpellbook(),$(".spellBook .spells").append('<div class="spell empty-div"></div>');var a=$(".spellBook .empty-div");a.length<1&&(a=$(".spellBook")),this.animationDestination.top=a.offset().top,this.animationDestination.left=a.offset().left,$(".spellBook .empty-div").remove();for(var b=[[0,-50],[0,-100],[50,-100],[-50,-100]],c=0;4>c;c++){var d=$(".craft-animation-item.n-"+c);if(!(d.length<1)){var e=parseInt(d.css("top")),f=parseInt(d.css("left"));d.animate({top:e+b[c][1]+"px",left:f+b[c][0]+"px"},{duration:300,queue:!1,easing:"easeInOutCirc",complete:function(){}})}}},this.endSpellCraftAnimations=function(a,b){for(var c=0;4>c;c++){var d=$(".craft-animation-item.n-"+c);d.length<1||(d.animate({left:this.animationDestination.left+"px"},{duration:1e3,queue:!1,easing:"easeInBack"}),d.animate({top:this.animationDestination.top+"px",opacity:.3},{duration:1e3,easing:"easeInOutSine",complete:function(){$(this).remove()}}))}setTimeout(function(){MageS.Game.spellcraft.craftingIsInProgress=!1},1200),$(".inventory,.spellBook").removeClass("craft"),$(".inventory-shadow").animate({opacity:0},{duration:this.game.animationTime/3,complete:function(){$(this).hide()}}),$(".chemical-animation").html(""),$(".item-drop-zone").removeClass("filled"),this.game.inventory.turnOffFilters(),this.game.spellbook.turnOffFilters(),MageS.Game.animations.singleAnimationFinished(b)},this.cancelCrafting=function(){$(".inventory").removeClass("craft"),MageS.Game.spellcraft.hideShadow(),$(".item-drop-zone").removeClass("filled").removeClass("active"),$(".craft-animation-item").remove(),$(".craft-spell-overlay").hide(),$(".confirm-create-spell").removeClass("active"),$(".chemical-animation").html(""),$(".helper-spell-craft-step-1, .helper-spell-craft-step-2, .spell-craft-info").remove(),$(".craft-value.active").removeClass("active").html(""),$(".craft-demo-zone").removeClass("active"),this.isBlenderActive&&this.hideBlender(),this.spellCraftProcess={},setTimeout(function(){MageS.Game.spellcraft.craftingIsInProgress=!1},300),this.game.inventory.turnOffFilters()},this.hideBlender=function(){this.isBlenderActive=!1,this.blenderSchool=0,this.game.spellbook.turnOffFilters(),$(".craft-spell-overlay-blender").hide(),$(".items-col").prepend($(".craft-demo-zone")),$(".spellBook").removeClass("craft")},this.showSpellCrafting=function(){if(!this.craftingIsInProgress){"pc"!=this.game.device&&this.game.inventory.showInventory(),this.game.spellbook.removePermanentTooltip();var a=0;return $(".inventory .item.type-ingredient .value").each(function(){a+=1}),3>a?void this.game.chat.postMessage("You need more than 3 ingredients to create a spell"):void(this.game.admin.isEnabled||(this.craftingIsInProgress=!0,MageS.Game.hideMenu(),$(".craft-demo-zone").addClass("active"),MageS.Game.spellcraft.showShadow(function(){MageS.Game.spellcraft.cancelCrafting()}),$(".inventory").addClass("craft"),MageS.Game.inventory.filterItems($(".items-filter.name-ingredient")),this.showSpellCraftHelperStep1(),$(".craft-spell-overlay").show(),this.isSpellBlenderAllowed&&setTimeout(function(){$(".craft-demo-zone .blend-spells-show-button").fadeIn()},600)))}},this.showBlender=function(){this.isBlenderActive=!0,this.game.spellbook.showSpellbook(),this.game.spellbook.turnOffFilters(),$(".spellBook").addClass("craft"),$(".craft-demo-zone .blend-spells-show-button").fadeOut(),$(".spells-col").prepend($(".craft-demo-zone")),$(".craft-spell-overlay-blender").show(),$(".craft-spell-overlay").hide(),this.game.spellbook.filterAllWithValueLessThen(5)},this.blenderCheck=function(a){if(0===this.blenderSchool)this.blenderSchool=a.data("school"),this.game.spellbook.filterSpells($(".spell-filter.school-"+a.data("school"))),this.game.spellbook.filterAllWithValueLessThen(5);else if(a.data("school")!==this.blenderSchool)return!1;var b=parseInt(a.find(".value").html());return 5>b?!1:!0},this.showShadow=function(a){var b=$(".inventory-shadow");b.show().animate({opacity:.8},{duration:MageS.Game.animationTime/3}),a&&b.bind("click",a)},this.hideShadow=function(){var a=$(".inventory-shadow");a.animate({opacity:0},{duration:MageS.Game.animationTime/3,complete:function(){$(this).hide()}}),a.unbind("click")},this.itemClick=function(a){a.hasClass("type-catalyst")?this.SpellCraftStep2(a):a.hasClass("type-ingredient")?this.SpellCraftStep1(a):a.hasClass("spell")&&this.isBlenderActive===!0&&this.blenderCheck(a)&&this.SpellCraftStep1(a)},this.SpellCraftStep2=function(a){this.spellCraftProcess.catalyst=a,$(".helper-spell-craft-step-2").hide(200,function(){$(this).remove()}),this.skweezing.stop(),this.addItemToCrafting(a,!0),setTimeout(function(){MageS.Game.spellcraft.createSpellAction()},1e3)},this.SpellCraftStep1=function(a){if(this.spellCraftProcess.ingridients||(this.spellCraftProcess.ingridients=[]),!(this.spellCraftProcess.ingridients.length>3)){$(".craft-demo-zone .blend-spells-show-button").fadeOut(),$(".helper-spell-craft-step-2 .helper-spell-craft-step-2-error").remove(),this.spellCraftProcess.ingridients.push(a);var b=3==this.spellCraftProcess.ingridients.length;if(this.addItemToCrafting(a,!1),b)this.isBlenderActive===!0?setTimeout(function(){MageS.Game.spellcraft.createSpellAction()},1e3):($(".spell-craft-2").hide(200,function(){$(this).remove()}),$(".helper-spell-craft-step-2").hide(200,function(){$(this).remove()}),this.showCatalystStep());else{var c=$(".select-mode-ingredients");c.html(3-this.spellCraftProcess.ingridients.length),c.css("color","#FF8360").animate({color:"#FFF"})}}},this.addItemToCrafting=function(a,b){var c=a.find(".svg").clone();c.addClass("craft-animation-item"),a.before(c);var d=a.offset().top,e=a.offset().left;$(".mage-survival").append(c),c.css({top:d,left:e});var f=1;if(b){var g=$(".chemical-animation");f=0}else for(f=1;3>=f;f++){var g=$(".zone-"+f);if(!g.hasClass("filled"))break}c.addClass("n-"+f);var h=g.find(".svg"),i=h.offset().top/this.game.rem,j=h.offset().left/this.game.rem,k=.25*this.game.cellSize,l=0,m=0;f>1&&(k=.4*this.game.cellSize),b&&(k=0,l=-.5*this.game.cellSize,m=.05*this.game.cellSize),MageS.Game.monimations.skweeze(c),c.animate({top:i+k+m+"rem"},{duration:1e3,queue:!1,easing:"easeInOutCirc"}),c.animate({left:j+k+l+"rem"},{duration:1e3,queue:!1,easing:"easeOutBack",complete:function(){}}),g.addClass("filled"),a.addClass("filtered-out")},this.showSpellCraftHelperStep1=function(){var a=$("#template-helper-spell-craft-step-1").html();Mustache.parse(a);var b=Mustache.render(a),c=$(b);$(".craft-spell-overlay").append(c)},this.showCatalystStep=function(){var a=$("#template-spell-craft-catalyst").html();Mustache.parse(a);var b=Mustache.render(a,{}),c=$(b);MageS.Game.inventory.filterItems($(".items-filter.name-catalyst")),$(".craft-spell-overlay").append(c);var d=$(".confirm-create-spell");d.addClass("active"),this.game.monimations.blastInScale(d,1.33),d.on("click",function(){MageS.Game.spellcraft.createSpellAction()});var e=$("<div></div>").addClass("svg");$(".chemical-animation").append(e),e.svg({onLoad:function(a){a.circle(0,0,1.2*MageS.Game.rem,{fill:"none",stroke:"#fff",strokeWidth:.1*MageS.Game.rem})}});var f=e.find("svg").width("1").height("1");this.skweezing=MageS.Game.monimations.skweezeSlow(f)},this.createSpellAction=function(){var a=[];for(var b in this.spellCraftProcess.ingridients)a.push(this.spellCraftProcess.ingridients[b].data("id"));void 0!==this.spellCraftProcess.catalyst&&a.push(this.spellCraftProcess.catalyst.data("id"));var c=this.isBlenderActive;this.startSpellCraftAnimations();var d='{"ingredients": ["'+a[0]+'","'+a[1]+'","'+a[2];void 0!==a[3]&&(d+='","'+a[3]),d+='"]',c===!0&&(d+=',"blender":true'),d+="}",this.game.action("craftSpell",d)},this.showSpellCraftInfo=function(){var a=$("#template-spell-craft-info").html();Mustache.parse(a);var b={},c=[];for(var d in this.spellCraftProcess.ingridients)c.push(this.game.inventory.items[this.spellCraftProcess.ingridients[d].data("id")]);for(var d in c)var e=c[d];var f=Mustache.render(a,{stats:b}),g=$(f),h=g.find(".craft-items"),i=0;for(var d in c)if(!(h.find(".id-"+c[d].id).length>0)){i++;var j=$(".inventory .item.id-"+c[d].id).clone();j.removeClass("filtered-out").find(".value").remove(),j.find(".craft-value").css({"background-color":"#529BCA"});var k=j.find(".craft-value");1==parseInt(k.html())&&k.remove(),h.append(j),this.game.inventory.bindItemTooltip(j),j.find("path").css({fill:"#FFF"})}h.css("width",i*this.game.itemSize+"rem"),$(".craft-spell-overlay").append(g);var l=this.game.mageInventorySize;"mobile"==this.game.device&&(l=this.game.mageMobileInventorySize),g.animate({height:l+"rem"},{duration:this.game.animationTime,easing:"easeInCirc"}),$(".confirm-create-spell").on("click",function(){MageS.Game.spellcraft.createSpellAction()})}},MageS.Monimations=function(a){this.game=a,this.extremeInElasticOutEasing=mojs.easing.path("M0,100 C50,100 50,100 50,50 C50,-15.815625 53.7148438,-19.1218754 60.4981394,0 C62.2625924,4.97393188 66.4286578,6.07928485 68.3303467,0 C71.3633751,-6.23011049 74.5489919,-1.10166123 75.7012545,0 C79.6946191,3.60945678 84.2063904,-0.104182975 84.2063905,0 C87.5409362,-2.25875668 90.4589294,-0.0327241098 93.4950242,0 C97.3271182,0.20445262 100,-0.104182352 100,0"),this.parabola=mojs.easing.path("M -4.0677966e-8,0.42372886 C 50.556265,0.4136606 0.87095901,99.897877 49.035199,100.42373 99.628993,100.59012 50.713497,0.33895357 100,0"),this.singlePeak=mojs.easing.path("M 0,100 C 10.074957,75.575965 59.597896,94.558365 61.187447,5.4986503 61.889257,29.132172 84.521141,25.04019 100,25"),this.bounce50=mojs.easing.path("M 0,50 C 5.3102312,37.282606 2.5221993,12.853007 11.47837,12.648512 21.89607,12.410646 14.728785,69.440119 25.730114,69.491526 32.1567,70.369873 28.768715,24.96061 37.76202,25.02908 c 6.616381,0.05037 4.34318,33.035725 11.476824,33.230797 2.842319,0.07772 9.484178,-20.527049 18.631075,-18.920776 C 77.550759,41.039138 84.713696,50.105127 100,50"),this.wave50=mojs.easing.path("M 0,50 C 0.07849772,36.786 7.8365117,25.510818 20.649999,25.43824 72.008172,25.14734 27.752226,74.270293 75.305916,73.840196 91.127102,74.004292 100.57868,60.132927 100,50"),this.scaleInIntencePath=mojs.easing.path("M 0,100 C 5.3102312,87.282606 2.5221993,12.853007 11.47837,12.648512 21.89607,12.410646 14.728785,69.440119 25.730114,69.491526 32.1567,70.369873 28.768715,24.96061 37.76202,25.02908 c 6.616381,0.05037 4.34318,33.035725 11.476824,33.230797 2.842319,0.07772 9.484178,-20.527049 18.631075,-18.920776 C 77.550759,41.039138 84.713696,50.105127 100,50"),this.normalProgressionPath=mojs.easing.path("M 0,100 C 12.100531,70.665506 7.5311473,0.24009095 100,0"),this.spinItem=function(a){new mojs.Tween({repeat:0,delay:10,duration:1e3,onUpdate:function(b){var c=2*MageS.Game.monimations.parabola(b)-1;a[0].style.transform="scaleX("+c+")"}}).run()},this.bounce=function(a,b){b||(b=2),new mojs.Tween({repeat:0,delay:10,duration:1e3,onUpdate:function(c){var d=MageS.Game.monimations.bounce50(c)*b;a[0].style.transform="scale("+d+")"}}).run()},this.scaleIn=function(a,b){b||(b=1500),a[0].style.transform="scale(0)",new mojs.Tween({repeat:0,delay:10,duration:b,onUpdate:function(b){var c=3*MageS.Game.monimations.scaleInIntencePath(b)-.5;a[0].style.transform="scale("+c+")"},onComplete:function(){a[0].style.transform=""}}).run()},this.scaleInWithRotate=function(a){a[0].style.transform="scale(0)",new mojs.Tween({repeat:0,delay:10,duration:1500,onUpdate:function(b){var c=2*MageS.Game.monimations.scaleInIntencePath(b),d=MageS.Game.monimations.normalProgressionPath(b);a[0].style.transform="scale("+c+") rotate("+720*d+"deg)"}}).run()},this.blastInScale=function(a,b,c,d){d||(d=500),b||(b=1.33),a[0].style.transform="scale(0)",new mojs.Tween({repeat:0,delay:10,duration:d,onUpdate:function(c){var d=MageS.Game.monimations.singlePeak(c)*b;a[0].style.transform="scale("+d+")"},onComplete:c}).run()},this.rotate=function(a,b,c,d,e,f,g){new mojs.Tween({repeat:0,delay:10,duration:d,onUpdate:function(d){var g=d;f&&(g=f(d)),g=g*c-c,e&&(g*=-1),a[0].style.transform="rotate("+(b+g)+"deg)"},onComplete:g}).run()},this.rotateWithScale=function(a,b,c,d,e,f){new mojs.Tween({repeat:0,delay:10,duration:f,onUpdate:function(f){var g=MageS.Game.monimations.normalProgressionPath(f)*c-c,h=d+MageS.Game.monimations.normalProgressionPath(f)*e;a[0].style.transform="rotate("+(b+g)+"deg) scale("+h+")"}}).run()},this.portalStar=function(a,b,c,d,e){new mojs.Tween({repeat:9999,delay:e,duration:1500,onUpdate:function(e){var f=MageS.Game.monimations.normalProgressionPath(e);a.find("svg")[0].style.transform="rotate("+(d-60*f)+"deg) ",a.find("circle").css({svgR:c-c*f,svgCy:b-b*f})}}).run()},this.skweeze=function(a){new mojs.Tween({repeat:0,delay:10,duration:1500,onUpdate:function(b){var c=2*MageS.Game.monimations.bounce50(b),d=35;a[0].style.transform="skewX("+(c*d-d)+"deg) skewY("+(c*d-d)+"deg)"},onComplete:function(){a[0].style.transform=""}}).run()},this.swing=function(a,b,c){new mojs.Tween({repeat:0,delay:10,duration:c,onUpdate:function(c){var d=2*MageS.Game.monimations.wave50(c);a[0].style.transform="rotate("+(d-1)*b+"deg)"},onComplete:function(){a[0].style.transform=""}}).run()},this.skweezeSlow=function(a){return new mojs.Tween({repeat:999,delay:1,duration:1500,onUpdate:function(b){var c=MageS.Game.monimations.wave50(b)/2+.75;a[0].style.transform="scaleX("+c+") scaleY("+(2-c)+")"}}).run()},this.flame=function(a,b){return new mojs.Tween({repeat:0,delay:1,duration:200,onUpdate:function(b){if(!(Math.random()>.5)){var c=30*Math.random()-15,d=30*Math.random()-15;a[0].style.transform="skewX("+c+"deg) skewY("+d+"deg)"}},onComplete:b}).run()},this.camShake=function(a,b,c,d,e){d||(d={});var f=$(".battle-border");void 0!==d.el&&(f=d.el);var g=array_rand([1,-1]);if(a||(a="X"),"X"!==a&&"Y"!==a)switch(a){case 0:case 2:a="Y";break;case 1:case 3:a="X"}b||(b=600),c||(c=5);var h=0;return void 0!==d.delay&&(h=d.delay),new mojs.Tween({repeat:0,delay:h,duration:b,onUpdate:function(b){var d=(1-b)*c,e=d*g;g*=-1,f[0].style.transform="translate"+a+"("+e+"px)"},onComplete:function(){f[0].style.transform="",e&&e()}}).run()},this.shake=function(a,b){var c=0,d=500,e=20;return new mojs.Tween({repeat:0,delay:c,duration:d,onUpdate:function(b){var c=3*(MageS.Game.monimations.bounce50(b)-.5),d=c*e;a[0].style.transform="rotate("+d+"deg)"}}).run()}},Map=new Map,$(document).ready(function(){$("body.mage-map-builder").length&&(Map.Game=new Map.Game,Map.Game.init())}),Map.Game=function(){this.width=$("body").width(),this.height=$("body").height(),this.cellSize=32,this.yStart=0,this.xStart=0,this.perRow=0,this.perCol=0,this.fullMap={},this.offsetX=0,this.offsetY=0,this.coordinatOffsetX=0,this.coordinatOffsetY=0,this.init=function(){$(".container.main").css({padding:0,margin:0,width:"100%"}),$(".map-builder .map").css({width:this.width/2,"margin-left":this.width/2,height:this.height/2,"margin-top":this.height/2,position:"relative"}).addClass($("#map-name").val()),$(".export").on("click",function(){Map.Game["export"]()}),$(".go-top").on("click",function(){Map.Game.go(0)}),$(".go-right").on("click",function(){Map.Game.go(1)}),$(".go-bottom").on("click",function(){Map.Game.go(2)}),$(".go-left").on("click",function(){Map.Game.go(3)}),this.perRow=Math.floor(this.width/this.cellSize),this.perCol=Math.floor(this.height/this.cellSize),this.yStart=Math.round(this.perCol/2)-this.perCol,this.xStart=Math.round(this.perRow/2)-this.perRow,void 0!==window.mapBuilderValue&&(this.fullMap=mapBuilderValue),void 0!==window.mapBuilderOffsetX&&(this.offsetX=window.mapBuilderOffsetX),void 0!==window.mapBuilderOffsetY&&(this.offsetY=window.mapBuilderOffsetY),this.xStart+=this.offsetX,this.yStart+=this.offsetY;for(var a=this.yStart;a<this.yStart+this.perCol-1;a++)for(var b=this.xStart;b<this.xStart+this.perRow-2;b++){var c=$("<div></div>").addClass("cell x-"+b+" y-"+a).css({"margin-top":(a-this.offsetY)*this.cellSize+"px","margin-left":(b-this.offsetX)*this.cellSize+"px",width:this.cellSize+"px",height:this.cellSize+"px"});if(c.data("x",b),c.data("y",a),c.on("click",function(){Map.Game.click($(this))}),void 0!==this.fullMap[a]&&void 0!==this.fullMap[a][b]){var d=this.fullMap[a][b];c.html(d),c.data("value",d),c.addClass(this.getfirstPartOfValue(d))}$(".map-builder .map").append(c)}},this.click=function(a){$(".map .editor").each(function(){Map.Game.submit($(this))});var b=$('<form><input type="text" /></form>').addClass("editor"),c=b.find("input"),d=a.data("value");d&&(a.html(""),c.val(d)),a.append(b),c.width(this.cellSize).focus(),b.on("submit",function(){return Map.Game.submit($(this)),!1})},this.submit=function(a){var b=a.find("input").val(),c=a.parent(".cell"),d=c.data("value");d&&c.removeClass(this.getfirstPartOfValue(d)),c.html(b),c.data("value",b),c.addClass(this.getfirstPartOfValue(b))},this.getAll=function(){for(var a={},b=this.yStart;b<this.yStart+this.perCol-1;b++)for(var c=this.xStart;c<this.xStart+this.perRow-2;c++){var d=$(".cell.x-"+c+".y-"+b),e=d.data("value");e&&(void 0===a[b]&&(a[b]={}),a[b][c]=e)}return JSON.stringify(a)},this["export"]=function(){var a=this.getAll();Ajax.json("/Spellcraft/mapBuilder/save",{data:"name="+$("#map-name").val()+"&map="+a,callBack:function(a){Map.Game.callback(a)}})},this.go=function(a){var b=this.getAll();Ajax.json("/Spellcraft/mapBuilder/save",{data:"name="+$("#map-name").val()+"&map="+b,callBack:function(b){Map.Game.move(a)}})},this.getfirstPartOfValue=function(a){var b=a.split("-");b.length>1&&(a=b[0]);var c=a.split("+");return c.length>1&&(a=c[0]),a},this.callback=function(a){window.location="/Spellcraft/mapBuilder/show/"+$("#map-name").val()},this.move=function(a){var b=this.offsetX,c=this.offsetY;switch(a){case 0:c-=Math.round(this.perCol/2);break;case 1:b+=Math.round(this.perCol/2);break;case 2:c+=Math.round(this.perCol/2);break;case 3:b-=Math.round(this.perCol/2)}window.location="/Spellcraft/mapBuilder/"+$("#map-name").val()+"?x="+b+"&y="+c}};